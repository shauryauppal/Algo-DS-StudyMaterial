define("FluidityFunction",["ImageBuilder","EventUtils","MediaLoader",window.nut],function(g,f,l,h){var k=function(a,d,b,c){if(0==a.offsetHeight||0==a.offsetWidth)c();else if(a=h(".itemMediaContainer",a),a.length){a=a[0].getAttribute("data-baseUrl");a=(new g(a)).autoCrop().autoCrop().brightness(255).greyscale().scaleLongest(50).preloadAndBuild();var e=new Image;f.attach({event:"load",element:e,callback:function(){e.width<=1.25*e.height?(d.className=b+" vertical-container",f.trigger("dra-portrait",
!0)):f.trigger("dra-landscape",!0);c()}});e.src=a}else c()};return function(a,d){if(0<a.length){var b=a[0].parentNode.parentNode,c=b.className;b.className+=" horizontal-container";k(a[0],b,c,function(){d&&d()})}}});