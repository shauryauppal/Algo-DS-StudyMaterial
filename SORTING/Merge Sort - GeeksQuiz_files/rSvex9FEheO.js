if (self.CavalryLogger) { CavalryLogger.start_js(["Xdw2r"]); }

__d('UFIOrderingModeStore',['invariant','FluxReduceStore','immutable','UFIActionTypes','UFISharedDispatcher'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('FluxReduceStore'));j=i&&i.prototype;k.prototype.getInitialState=function(){return new (c('immutable').Map)();};k.prototype.areEqual=function(l,m){return c('immutable').is(l,m);};k.prototype.getMode=function(l,m){var n=this.getState().get(l),o=null;m.forEach(function(p){if(n&&p.value===n){o=p;}else if(p.selected)o=p;});!o?h(0):void 0;return o;};k.prototype.reduce=function(l,m){switch(m.type){case c('UFIActionTypes').INSTANCE.CHANGE_ORDER_MODE:var n=m.instanceID,o=m.mode;!(n&&o)?h(0):void 0;l=l.set(n,o);break;}return l;};function k(){i.apply(this,arguments);}f.exports=new k(c('UFISharedDispatcher'));},null);
__d('UFIOrderingModeSelector.react',['cx','ix','BanzaiLogger','InlineBlock.react','Link.react','React','Image.react','Random','ReactXUIMenu','PopoverMenu.react','UFIConfig'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('ReactXUIMenu').SelectableMenu,l=c('ReactXUIMenu').SelectableItem,m=c('React').createClass({displayName:'UFIOrderingModeSelector',propTypes:{onOrderChanged:j.func.isRequired,feedback:j.shape({orderingmodes:j.array.isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired,selectedMode:j.object.isRequired},onMenuItemClick:function(n,o){var p=o.item.getValue(),q=this.props.feedback;if(q.orderingmodes&&c('UFIConfig').logChangeOrderingModeUsageSampleRate>c('Random').random())c('BanzaiLogger').log('CommentsOrderingModeSelectorUsageLoggerConfig',{start_order:this.props.selectedMode.value,end_order:p,post_fbid:q.commentstargetfbid,post_owner_fbid:q.ownerid,available_orders:q.orderingmodes.map(function(r){return r.value;})});this.props.onOrderChanged(p);},render:function(){var n=c('React').createElement(k,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.feedback.orderingmodes.map(function(o){return (c('React').createElement(l,{key:o.value,value:o.value,label:o.name,selected:o.value===this.props.selectedMode.value},c('React').createElement('div',{className:"_3scm"},c('React').createElement('div',{className:"_3scn"},o.name),c('React').createElement('div',{className:"_3sco"},o.description))));}.bind(this)));return (c('React').createElement('div',{className:"_3scp"},c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('PopoverMenu.react'),{className:"_3scs",menu:n,alignh:'right'},c('React').createElement(c('Link.react'),null,this.props.selectedMode.name,c('React').createElement(c('Image.react'),{className:"_3sct",src:i('/images/ui/xhp/link/more/down_caret.gif')}))))));}});f.exports=m;},null);
__d('UFIOrderingModeSelectorContainer.react',['React','SubscriptionsHandler','UFIOrderingModeSelector.react','UFIOrderingModeStore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIOrderingModeSelectorContainer',propTypes:{onOrderChanged:h.func.isRequired,feedback:h.shape({orderingmodes:h.array.isRequired,commentstargetfbid:h.string.isRequired,ownerid:h.string.isRequired}).isRequired,ufiInstanceID:h.string.isRequired},getInitialState:function(){return {selectedMode:c('UFIOrderingModeStore').getMode(this.props.ufiInstanceID,this.props.feedback.orderingmodes),subscriptions:new (c('SubscriptionsHandler'))()};},componentDidMount:function(){this.state.subscriptions.addSubscriptions(c('UFIOrderingModeStore').addListener(function(){this.setState({selectedMode:c('UFIOrderingModeStore').getMode(this.props.ufiInstanceID,this.props.feedback.orderingmodes)});}.bind(this)));},componentWillUnmount:function(){this.state.subscriptions.release();},shouldComponentUpdate:function(j,k){return this.state.selectedMode.value!==k.selectedMode.value;},render:function(){return (c('React').createElement(c('UFIOrderingModeSelector.react'),{onOrderChanged:this.props.onOrderChanged,feedback:this.props.feedback,selectedMode:this.state.selectedMode}));}});f.exports=i;},null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/inline_photo_pivots_chaining\/events\/",{});},null);
__d('EntstreamAttachmentRelatedShare',['csx','cx','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','CSS','DOM','Event','XPubcontentInlinePhotoPivotsEventsController','ge','getOrCreateDOMID','tidyEvent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=2,k=3,l={loadRelatedAttachment:function(m,n,o){var p=null;if(typeof m==="string"){p=c('ge')(m);}else p=m;if(!p)return;var q=c('Event').listen(p,'click',function(){q.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:n,is_right_click:false,share_id:o});}),r=c('Event').listen(p,'mousedown',function(event){if(event.which===k||event.button===j){r.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,{attachment:p,global_share_id:n,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(m,n){var o=c('ge')(m);if(!o)return;var p=c('Event').listen(o,'click',function(){p.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').PHOTO_CLICK,{attachment:o,storyid:n});});},loadRelatedGameAttachment:function(m,n){var o=null;if(typeof m==="string"){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:o,global_share_id:n});}));c('tidyEvent')(c('Event').listen(o,'mousedown',function(event){if(event.which===k||event.button===j)c('Arbiter').inform(c('AttachmentRelatedShareConstants').GAME_CLICK,{attachment:o,global_share_id:n});}));},loadRelatedLSCVideoAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;var p="^div._4-u2",q=c('DOM').scry(o,p),r=c('Event').listen(o,'click',function(){r.remove();c('Arbiter').inform(c('AttachmentRelatedShareConstants').VIDEO_CLICK,{attachment:o,global_share_id:n});});},loadRelatedLSCInlineVideoAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;c('Event').listen(o,'click',function(){var p="^div._4-u2",q="_1d8v",r=c('DOM').scry(o,p),s=r.length===1?r[0]:null,t=s.parentNode,u=t.previousSibling;while(!u){t=t.parentNode;u=t.previousSibling;}if(!c('CSS').hasClass(u,q)){var v=c('DOM').create('div',{className:q}),w=c('DOM').insertBefore(s.parentNode,v),x=w.length>=1?w[0]:null;}else x=u;var y=c('getOrCreateDOMID')(x);new (c('AsyncRequest'))().setURI('/ajax/flash/expand_inline.php').setData({share_id:n,target_div:y,max_width:470,max_height:264,replace_target_div:true}).setMethod('GET').setReadOnly(true).setRelativeTo(o.parentNode).send();});},loadRelatedEventsPivotAttachment:function(m,n){var o=null;if(typeof m==="string"){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').EVENT_JOIN,{attachment:o,event_id:n});}));},loadRelatedProductAttachment:function(m,n){var o=null;if(typeof m==='string'){o=c('ge')(m);}else o=m;if(!o)return;c('tidyEvent')(c('Event').listen(o,'click',function(){c('Arbiter').inform(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,{attachment:o,product_id:n});}));},closeButton:function(m,n){c('Event').listen(m,'click',function(){c('DOM').remove(n);});},closeButtonPhotoPivots:function(m,n,o,p){c('Event').listen(m,'click',function(){var q=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),r={story_id:o,search_query_type:p,event:'hide'};new (c('AsyncRequest'))().setMethod('POST').setURI(q.getURI()).setData(r).send();c('DOM').remove(n);});},seeAllLinkPhotoPivots:function(m,n,o){c('Event').listen(m,'click',function(){var p=c('XPubcontentInlinePhotoPivotsEventsController').getURIBuilder(),q={story_id:n,search_query_type:o,event:'see_all'};new (c('AsyncRequest'))().setMethod('POST').setURI(p.getURI()).setData(q).send();});},removeOldSuggestions:function(m){var n=c('ge')(m);if(!n)return;var o=c('DOM').scry(n.parentNode,"._5d73");for(var p=1;p<o.length;p++)c('DOM').remove(o[p]);setTimeout(function(){c('CSS').show(o[0]);},1000);},showHiddenSuggestions:function(m){var n=c('Event').listen(m,'click',function(){n.remove();var o="^._1ui8",p=c('DOM').scry(m,o);if(!p)return;c('CSS').hide(p[0]);var q=p[0].previousSibling;while(q){c('CSS').show(q);q=q.previousSibling;}});}};f.exports=l;},null);