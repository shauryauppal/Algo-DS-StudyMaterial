<!DOCTYPE html>
<!-- saved from url=(0150)http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&utm_medium=email&utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff) -->
<html dir="ltr" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="./10 Tips for C and C++ Performance Improvement Code Optimization_files/css.css.gzip" media="screen, projection">
<title>10 Tips for C and C++ Performance Improvement Code Optimization</title>
<meta name="description" content="When you start writing your code in C, C++ or any other programming language, your first objective might be to write a program that works. After you accomp">
<meta name="robots" content="noodp, noydir">
<link rel="canonical" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/">
<link rel="alternate" type="application/rss+xml" title="The Geek Stuff feed" href="http://www.thegeekstuff.com/feed/">
<link rel="pingback" href="http://www.thegeekstuff.com/xmlrpc.php">

<!-- All in One SEO Pack 2.2.6.2 by Michael Torbert of Semper Fi Web Design[295,365] -->
<meta name="description" content="When you start writing your code in C, C++ or any other programming language, your first objective might be to write a program that works. After you">

<link rel="canonical" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/">
<!-- /all in one seo pack -->
<link rel="alternate" type="application/rss+xml" title="The Geek Stuff » 10 Tips for C and C++ Performance Improvement Code Optimization Comments Feed" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/feed/">
		<script src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/ca-pub-8090601437064582.js"></script><script type="text/javascript" async="" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/ga.js"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.thegeekstuff.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.4"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;return g&&g.fillText?(g.textBaseline="top",g.font="600 32px Arial","flag"===a?(g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3):"diversity"===a?(g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e):("simple"===a?g.fillText(h(55357,56835),0,0):g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="https://api.w.org/" href="http://www.thegeekstuff.com/wp-json/">
<link rel="alternate" type="application/json+oembed" href="http://www.thegeekstuff.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.thegeekstuff.com%2F2015%2F01%2Fc-cpp-code-optimization%2F">
<link rel="alternate" type="text/xml+oembed" href="http://www.thegeekstuff.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.thegeekstuff.com%2F2015%2F01%2Fc-cpp-code-optimization%2F&amp;format=xml">
<link rel="shortcut icon" href="http://static.thegeekstuff.com/wp-content/uploads/2015/05/favicon.ico.gzip">
</head>
<body class="template-single">
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5302569-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<div class="container">
	<div id="header" class="header">
<p id="logo"><a href="http://www.thegeekstuff.com/"><img src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/thegeekstuff.gif" alt="The Geek Stuff"></a></p><div id="header_ad"><div id="header_ad1">
<script async="" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/adsbygoogle.js"></script>
<!-- TGS Logo Header -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-8090601437064582" data-ad-slot="4708993701" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/saved_resource.html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div></div>
	</div>
	<span class="menu_control">≡ Menu</span>
<ul id="menu-tgs-menu" class="menu"><li id="menu-item-15798" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15798"><a href="http://www.thegeekstuff.com/">Home</a></li>
<li id="menu-item-15797" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15797"><a href="http://www.thegeekstuff.com/linux-101-hacks-ebook/">Free eBook</a></li>
<li id="menu-item-15805" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15805"><a href="http://www.thegeekstuff.com/best-of-the-blog/">Start Here</a></li>
<li id="menu-item-15800" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15800"><a href="http://www.thegeekstuff.com/contact/">Contact</a></li>
<li id="menu-item-15802" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15802"><a href="http://www.thegeekstuff.com/about/">About</a></li>
</ul>
	<div class="columns">
		<div class="content">
			<div id="post-16434" class="post_box grt top" itemscope="" itemtype="http://schema.org/Article">
				<div class="headline_area">
					<h1 class="headline" itemprop="name">10 Tips for C and C++ Performance Improvement Code Optimization</h1>
					<div class="byline small">
						<span class="post_author_intro">by</span> <span class="post_author" itemprop="author">Koscica Dusko</span>
						<meta itemprop="datePublished" content="2015-01-15">
						<meta itemprop="dateModified" content="2015-01-08">
						<span class="post_date_intro">on</span> <span class="post_date" title="2015-01-15">January 15, 2015</span>
					</div>
				</div>
				<div class="post_content" itemprop="articleBody">
<div style="margin:7px 0px 6px 0px; padding:5px;">

<div style="float:left; width=95px">
<g:plusone size="medium"></g:plusone>
</div>

<div style="float:left; padding:2px; width:90px"><iframe src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/like.html" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowtransparency="true"></iframe>
</div>

<div style="width=95px">
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal">Tweet</a><script type="text/javascript" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/widgets.js"></script>
</div>

</div>
<p>When you start writing your code in C, C++ or any other programming language, your first objective might be to write a program that works.</p>
<p>After you accomplished that, the following are few things you should consider to enhance your program.</p>
<ol>
<li>Security of the program</li>
<li>Memory consumption</li>
<li>Speed of the program (Performance Improvement)</li>
</ol>
<p><span id="more-16434"></span><br>
This article will give some high-level ideas on how to improve the speed of your program.</p>
<p>Few general points to keep in mind:</p>
<ul>
<li>You could optimize your code for performance using all possible techniques, but this might generate a bigger file with bigger memory footprint.</li>
<li>You might have two different optimization goals, that might sometimes conflict with each other. For example, to optimize the code for performance might conflict with optimize the code for less memory footprint and size. You might have to find a balance.</li>
<li>Performance optimization is a never-ending process. Your code might never be fully optimized. There is always more room for improvement to make your code run faster.</li>
<li>Sometime we can use certain programming tricks to make a code run faster at the expense of not following best practices such as coding standards, etc. Try to avoid implementing cheap tricks to make your code run faster.</li>
</ul>
<h3>1. Optimize your Code using Appropriate Algorithm</h3>
<p>For any code you write, you should always take some time to think through and pick the right algorithm to use for your specific scenario.</p>
<p>The problem we are going to analyze for this example is to find a maximum value of the function in a two dimensional segment.</p>
<p>We’ll consider only whole numbers.</p>
    <center>
      <div style="margin-left:2px; margin-top:10px; margin-bottom:10px; ">

        <!-- AD BLOCK -->
		
<script async="" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/adsbygoogle.js"></script>
<!-- TGS Inside Content -->
<ins class="adsbygoogle" style="display: inline-block; width: 300px; height: 250px;" data-ad-client="ca-pub-8090601437064582" data-ad-slot="8643685131" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe width="300" height="250" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/saved_resource(1).html"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

        <!-- END AD BLOCK -->

	  </div>
    </center>


<p>First we’ll write the program without consider performance. Then, we’ll discuss few ways to boost the performance of this program.</p>
<p>Our Scenario: We have interval for x [-100…100] and interval for y [-100…100]. Now in these two intervals we are looking for a maximum of the function (x*x + y*y)/(y*y + b).</p>
<p>This is a function of two variables: x and y. There is one more constant which could be different and user will enter it. This constant b is always greater than 0 and also lesser than 1000.</p>
<p>In our program ,we will not use function pow() that is implemented in math.h library. It would be interesting exercise to figure out which approach would create faster code.</p>
<p>Example code:</p>
<pre>#include &lt;iostream&gt;

#define LEFT_MARGINE_FOR_X -100.0
#define RIGHT_MARGINE_FOR_X 100.0
#define LEFT_MARGINE_FOR_Y -100.0
#define RIGHT_MARGINE_FOR_Y 100.0

using namespace std;

int
main(void)
{
//Get the constant value
cout&lt;&lt;"Enter the constant value b&gt;0"&lt;&lt;endl;
cout&lt;&lt;"b-&gt;"; double dB; cin&gt;&gt;dB;

if(dB&lt;=0)   return EXIT_FAILURE;
if(dB&gt;1000) return EXIT_FAILURE;

//This is the potential maximum value of the function
//and all other values could be bigger or smaller
double dMaximumValue = (LEFT_MARGINE_FOR_X*LEFT_MARGINE_FOR_X+LEFT_MARGINE_FOR_Y*LEFT_MARGINE_FOR_Y)/ (LEFT_MARGINE_FOR_Y*LEFT_MARGINE_FOR_Y+dB);

double dMaximumX = LEFT_MARGINE_FOR_X;
double dMaximumY = LEFT_MARGINE_FOR_Y;

for(double dX=LEFT_MARGINE_FOR_X; dX&lt;=RIGHT_MARGINE_FOR_X; dX+=1.0)
  for(double dY=LEFT_MARGINE_FOR_Y; dY&lt;=RIGHT_MARGINE_FOR_Y; dY+=1.0)
    if( dMaximumValue&lt;((dX*dX+dY*dY)/(dY*dY+dB)))
    {
      dMaximumValue=((dX*dX+dY*dY)/(dY*dY+dB));
      dMaximumX=dX;
      dMaximumY=dY;
    }

cout&lt;&lt;"Maximum value of the function is="&lt;&lt; dMaximumValue&lt;&lt;endl;
cout&lt;&lt;endl&lt;&lt;endl;
cout&lt;&lt;"Value for x="&lt;&lt;dMaximumX&lt;&lt;endl
    &lt;&lt;"Value for y="&lt;&lt;dMaximumY&lt;&lt;endl;

	return EXIT_SUCCESS;
}</pre>
<p>Now, if we analyze the code more carefully, we notice that the part for dX*dX is calculated more times than it should, in this case it is calculated 200 times and this is a was of CPU time. What we could do?</p>
<p>One of the trick is to create one variable dX_Squer = dX*dX, and calculate after first for repetition, then we could use that in all calculations afterwards. You just need to add one more brackets.</p>
<p>There are few more optimizations you can do in the above code, just try to spot them.</p>
<p>The next point we could consider is how general our algorithm is, versus how optimal is it from speed point of view.</p>
<p>In that case we could apply few algorithms depending on the size of input set. What do we mean by that?</p>
<p>For example, in one our earlier c++ articles, we discussed about <a href="http://www.thegeekstuff.com/2014/01/cpp-binary-exercise/">binary numbers</a> that have only two ones in many zeros.</p>
<p>We could use MVA algorithm that could outperform the original algorithm from speed point of view on smaller numbers, the ones that are fit for unsigned long long int, but if you use my algorithm combined with vectors it could be used in some problems where you try to pick two objects that are in set.</p>
<p>So, in order to create the best possible solution you could merge two algorithms and apply one according to the size of the problem. So, if the number used is smaller than unsigned long long int, you could use first algorithm and if number will not fit already mentioned type of data you could use vectors or some other data structures.</p>
<p>Similar to this would be addition of numbers, where it is simple to consider case of long long int, but in case we need to add to big numbers that are in size way bigger than unsigned long long int you could use vectors to store them and apply operation of addition with your algorithm. If you prefer classes you could use them to, but if you don’t need OOP approach you could just use double linked list or arrays or some other more appropriate data structure.</p>
<h3>2. Optimize Your Code for Memory</h3>
<p>Now we will look how you could optimize your code from point of memory consumption.</p>
<p>Let us take a simple example. Let us try to swap two values in the memory, which is done in many sorting algorithms.</p>
<p>Some people like to think of this as two people sitting on two chairs and adding one more chair as temporary holder for one of them during the swap.</p>
<pre>int nFirstOne =1, nSecondOne=2;
int nTemp = nFirstOne;
nFirstOne = nSecondOne;
nSecondOne = nTemp;</pre>
<p>This is nice. But usage of nTemp which in memory reserves some place that will be used for copy of one variable.</p>
<p>This could be done without nTemp like this:</p>
<pre>int nFirsOne = 3, nSecondOne = 7;
nFirstOne += nSecondOne;
nSecondOne = nFirstOne ? nSecondOne;
nFirstOne -= nSecondOne;</pre>
<p>In some cases you could have large objects in memory that need to swap their places. So, what could you do? Instead of coping to many memory locations you could use their addresses and instead of replacing all of the memory locations you could just change their address.</p>
<p>How do you know if your code is faster and how do you calculate it?</p>
<p>Well, when you finish your code it will translate in some assembler and then into something that is called machine code. Each operation is performed in processor or in some other part of computer like mathematical coprocessor or in graphic card or something similar.</p>
<p>One operation could be done in one clock circle or few, this is the reason why it could be faster to multiply than to divide, but it could be also important did you pick some optimization done by your compiler.</p>
<p>Sometimes, the task of optimization could be left to compiler. For all available C++ compiler, check this <a href="http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html">GCC Optimization Options</a>.</p>
<p>To understand how fast program is, you should know the architecture of a device you are working with. Sometimes things become faster because your program is in the cache memory or you use mathematical coprocessor or because branch predictor got it right most of the times.</p>
<p>Now let’s consider these numbers O(n), O(log(n) *n), n*n, n!. To estimate the algorithm according to the size of the input set you use this numbers.</p>
<p>If you have an algorithm of size n and you input 10 elements you get time t, and if you input 100 elements you will end up with time 10 times longer than t. If you deal with a program that has equivalent to n*n and you increase the size of set from 10 to 100, the program will not be 10 times slower but rather approximately 10*10 times. You should be aware of these types of limits a number can have on your algorithm.</p>
<p>Some people think that they could time the code and have good idea how fast the algorithm is. Ok, let us think. Most of the programs you write are not in kernel mode, which means that they could be stopped by operating system and processor could be given to another task and so on. This means that your program will be stopped and started many times. It could be even tougher to figure out what could happen to program if you have few cores or even processors.</p>
<p>Idea of measuring the speed of algorithm is pretty iffy. Well, the results are just useful as a snowflake on a North Pole or like hand of sand in desert.</p>
<p>The only good results are if you find a way to prevent your program from losing the core he is in, or perhaps to stop the counter of time and then continue, but you need to eliminate interrupt time that will be added each time you stop your program, as well as the starting initializations.</p>
<p>There are also differences you will notice due to the fact that same code will not be transformed into machine code if you apply different optimization, and as you should know that already one product could translate code in different way than some other version, by the way it is important what architecture is it executed as well and also due to installed amount of memory, cache memory, prediction methods, etc.</p>
<h3>3. printf and scanf Vs cout and cin</h3>
<p>Sometimes, if you use different functions for same task you will get faster code.</p>
<p>Those first two functions are mostly used in C style of programming, but you could use it sometimes with file manipulation and small difference in speed could add up a lot saved time.</p>
<p>For example, let us assume that you have numbers in a file to read.<br>
From point of security, cout and cin would be considered as better option for files, as you would have adequate instructions in fstream header.</p>
<p>If you use C or printf in C++ you should consider some other functions that could even more increase the speed of your program.</p>
<p>For strings you could use puts, gets or their equivalents for file operations. Well they are not formatted and to write data in one way takes some time.</p>
<h3>4. Using Operators</h3>
<p>Most basic operations like +=, -=, and *=, when applied on basic data types could slow down the program as well. To be sure you will need to know how it gets transformed into assembler on your computer.</p>
<p>One interesting idea is to replace postfix increment and decrement with their prefix versions.</p>
<p>Sometimes you could try to use operators &gt;&gt; or &lt;&lt; instead of multiplication or division, but be very careful, you could end up with bad mistake this way, and then to fix it you could add some range estimations and that will be way slower than original code you have started with.</p>
<p>Bit operators, and tricks that go with them could increase the speed of program, but you should be very careful because you could end up with machine dependant code and that is something to avoid. To be sure, you could still code with add move from assembler in C++.</p>
<p>It is important to understand that this is hybrid language and it will support assembler coding, problem orientated solutions, the object orientated solutions, and if you add some additional libraries you could use some more advanced tricks that are not commonly used.</p>
<h3>5. if Condition Optimization</h3>
<p>If you use if in your code, when possible, it is a good idea to replace if with switch. In “if”, you usually have tests and that could produce code that is bit slower.</p>
<p>One good fact to know about if command is to know that it has some of the optimizations built in. Well, if you have few conditions that are connected with &amp;&amp; or || it could be evaluated that this is true or false without calculating complete expression.</p>
<p>Let us illustrate this with two condition that are connected with &amp;&amp; operator. If you have expression p and q, as soon as you have p equal to false you know that there is no way to get true as a result, this is used in C/C++ and sometimes it could be reason why people do get wrong code.</p>
<p>If you have situations in which you could say that something could occur more often put it before, because there is a better chance to say that expression is false or true. If you have many conditions to calculate, and if they could be sorted, consider splitting that range into few sub ranges first.</p>
<p>One bad thing that could happen is that you create the branch that will never be used or even few lines of the code that could be added and you will never use those cases.</p>
<p>Sometimes you will have a very long expression composed of many conditions, one could use function that will return true or false, but functions are expensive, they use stack and few copies could be created, if possible you could use a macro or a macro with a variable to increase the speed and create code that will be more easy to maintain.</p>
<p>Also, don’t forget that negation is an operation too.</p>
<h3>6. Problems with Functions</h3>
<p>While using functions, if you are not careful, you might end-up creating a bad code.</p>
<p>For example, if you have a code like this, it might be a bad thing.</p>
<pre>for(int i=1; i&lt;=10; ++i)
     DoSomething(i);</pre>
<p>Why? As soon as you code something like this you will have to call DoSomething 10 times, and we have mentioned that function calls could be expensive.</p>
<p>To implement this better, you could do it like this, and implement that for repetition in your function.</p>
<pre>DoSomething(n);</pre>
<p>Next thing to consider is inline functions. There is a chance that they will be used like macros if they are small. This way you benefit from point of speed, from point of better organization, and as well as reusability.</p>
<p>When passing a big object to a function, you could use pointers or references. Prefer to use references because they would create the code that is way easier to read.</p>
<p>If you are not worried about the changing the value that is passed to the function, use references. If you use object that is constant, it could be useful to use const, which will save some time.</p>
<p>When you use C that will support C99 standard you have option to use restrict on pointers to.</p>
<p>In certain situations casting in function might increase the speed of the code. You should consider this depending on your specific situation.</p>
<p>Creating temporary objects in the function could slow the program. I have already shown how you could avoid using temp variable in some situations.</p>
<p>Also, while recursion is extremely helpful in certain specific scenarios, in general, it will generate a slow performing code. If possible, try to avoid recursion, when you don’t need to use it to solve your problem.</p>
<h3>7. Optimizing Loops</h3>
<p>If you like to check if a number is lower than 10 or greater than zero, pick the second option.</p>
<p>It is faster to test if something is equal to zero than to compare two different numbers.</p>
<p>In other words, the following is slower when compared to the alternative option shown below:</p>
<pre>for( i =0; i&lt;10; i++)</pre>
<p>The following is faster when compared to the above for loop. But, this might be harder to read for beginners.</p>
<pre>for(i=10; i--; )</pre>
<p>Similar to this is case if you are in a situation where you could pick form !=0 and &lt;=n, use the first one it will be faster. For example, when you try to calculate factorial in the separate function.</p>
<p>It is better to avoid loop in situations where you have few functions called with different arguments that are ranging from 1 to 5, it is better to use linear calls with five calls.</p>
<p>If you are in the situation to use: one loop and few tasks or few loops with one task in each loop. Pick the first option. It is a trick that could generate faster code. I am not sure, but compiler probably could not optimize this still.</p>
<h3>8. Data Structure Optimization</h3>
<p>Is the data structure that we use affect the performance of the code?</p>
<p>The answer this this question is not simple, that you could expect from simple math. It is rather vague and hard to formulate.</p>
<p>To illustrate my statement, we will analyze one example. If your task is to create permutations that are like the following, then you could use array or linked list.</p>
<pre>1, 2, 3, 4,
2, 3, 4, 1,
3, 4, 1, 2,
4, 1, 2, 3,</pre>
<p>If you use array, you could copy first element and move all others toward first element and then move the first element at the last place. This would create so many not needed operations that your program or a function would be very slow.</p>
<p>If you keep your data in the list, you could very easy create the program that will outperform one with array we have mentioned.</p>
<p>Sometimes, if you save your data in some form of tree you could create program that will perform faster than the one without adequate data structure.</p>
<p>Be careful when using data structure. Sometimes a problem could be solved without keeping all elements of array or using any data structure at all.</p>
<p>To elaborate on this subject, refer to the discussion we had on the <a href="http://www.thegeekstuff.com/2014/03/fibonacci-number-algorithm/">Fibonacci algorithm</a>. If you look at the Fibonacci elements you could be tricked in applying the vector in combination with recursion, but instead you could use some trick from applied math to create very fast code.</p>
<h3>9. Binary Search or Sequential Search</h3>
<p>Should we use binary search or sequential search to solve a problem?</p>
<p>One of the common tasks we need to do when we program is to search for some value in some data structure. Yes, it is basis for a hash tables, multi-level hash tables, etc.</p>
<p>If you are trying to find one number in an array of numbers you could have two strategies.</p>
<p>The first strategy is very simple. You have your array and value you are looking for. From beginning of the array you start to look for the value and if you find it you stop the search, and if you don’t find the value you will be at the end of the array. There are many improvements to this strategy.</p>
<p>The second strategy requires the array to be sorted. If array is not sorted you will not get the results that you wish for. If the array is sorted you split it in two half. In the first half, the elements of array are smaller than the middle one in another half the elements are bigger than the middle one. If you get yourself in situation that two markers are not situated the way they should you know that you don’t have the value you have been looking for.</p>
<p>What is the dilemma here? If you sort elements of array you will lose some time, but if you invest in that you could benefit from faster binary search.</p>
<p>This is one of situations where you would need to understand the problem well and act according to best possible situation based on your specific scenario.</p>
<h3>10. Optimizing Arrays</h3>
<p>The array is one of the most basic data structures that occupy some space in memory for its elements.</p>
<p>To understand how these optimizations work, you should be aware of the arrays structure. Ok, what do I mean by this. The name of array is a constant pointer that points at first element of an array. This means that you could use pointers and pointer arithmetic.</p>
<p>If you access members of array like this:</p>
<pre>for(int i=0; i&lt;n; i++) nArray[i]=nSomeValue;</pre>
<p>Instead of the above code, the following is better:</p>
<pre>for(int* ptrInt = nArray; ptrInt&lt; nArray+n; ptrInt++) *ptrInt=nSomeValue;</pre>
<p>The reason for this is in the operations with pointers. In the above example, we have pointer to int data type that takes address from the name of the array. In this case, it is nArray, and we increase that address for one element, and the pointer is moved toward the end of the array for size of int data type.</p>
<p>If you have used double, your compiler would know how far it should move the address.</p>
<p>It is way harder to read code this way, but it will increase the speed of program. In other words, when you don’t use better algorithm, but your program still runs faster, the increased speed might be due to better syntax that will generate faster code.</p>
<p>If you use matrix, and you have chance to approach the elements of matrix row by row or in some other manner you should always pick to go row after the row in your matrix. The matrix is an array of arrays it will be stored in memory row after the row, so the most natural way to do approach the array members is to go row by row.</p>
<p>Avoid initialization of large portions of memory with some element. If you could not avoid this type of situation, consider memset and similar commands.</p>
<p>When you use array of chars, these are sometimes called strings in style of language C, you could create faster code if you use pointers trick as well. If you use string as instance from C++ class, you might feel more comfortable, but you could create slower code and sometime even the a bigger file size.</p>
<p>If you use new to create your array, your program could perform badly because you use a lot of growth in memory at one moment, which is the reason why you should use vectors. They will add some space in memory and grow in better way.</p>
<p>If you try to move large set of data in memory, you could use array of pointers. This way, you will not move the real data in memory, but replace the addresses instead.</p>
<div style="margin:7px 0px 3px 0px; padding:5px; background:#F2F0E8">

<div style="float:left; width=95px">
<g:plusone size="medium"></g:plusone>
</div>

<div style="float:left; width=95px">
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal">Tweet</a><script type="text/javascript" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/widgets.js"></script>
</div>

<div style="float:left; padding:2px; width:90px"><iframe src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/like(1).html" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowtransparency="true"></iframe>
</div>

<div style="padding:1px">
&gt;&nbsp;<a href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#commentform" rel="nofollow">Add your comment</a>
</div>

</div>
<h3>If you enjoyed this article, you might also like..</h3>
<table>
<tbody><tr>
<td valign="top">
<ol>
<li><a href="http://www.thegeekstuff.com/2010/12/50-unix-linux-sysadmin-tutorials/">50 Linux Sysadmin Tutorials</a></li>
<li><a href="http://www.thegeekstuff.com/2010/11/50-linux-commands/">50 Most Frequently Used Linux Commands (With Examples)</a></li>
<li><a href="http://www.thegeekstuff.com/2011/12/linux-performance-monitoring-tools/">Top 25 Best Linux Performance Monitoring and Debugging Tools</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/15-practical-linux-find-command-examples/">Mommy, I found it! – 15 Practical Linux Find Command Examples</a></li>
<li><a href="http://www.thegeekstuff.com/linux-101-hacks-ebook/">Linux 101 Hacks 2nd Edition eBook</a>&nbsp;<img title="Linux 101 Hacks Book" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/free-small.png" alt="Linux 101 Hacks Book"></li>
</ol>
</td>
<td>
<ul>
<li><a href="http://www.thegeekstuff.com/2010/01/awk-introduction-tutorial-7-awk-print-examples/">Awk Introduction – 7 Awk Print Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/10/unix-sed-tutorial-advanced-sed-substitution-examples/">Advanced Sed Substitution Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2009/03/8-essential-vim-editor-navigation-fundamentals/">8 Essential Vim Editor Navigation Fundamentals</a></li>
<li><a href="http://www.thegeekstuff.com/2011/06/iptables-rules-examples/">25 Most Frequently Used Linux IPTables Rules Examples</a></li>
<li><a href="http://www.thegeekstuff.com/2008/08/turbocharge-putty-with-12-powerful-add-ons-software-for-geeks-3/">Turbocharge PuTTY with 12 Powerful Add-Ons</a></li>
</ul>
</td>
</tr>
</tbody></table>
<br>
<center>
<table id="booktable">
<tbody><tr>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/bash-101-hacks-ebook/"><img title="Bash 101 Hacks Book" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/bash-132.png" alt="Bash 101 Hacks Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/sed-awk-101-hacks-ebook/"><img title="Sed and Awk 101 Hacks Book" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/sed-and-awk-132.png" alt="Sed and Awk 101 Hacks Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/nagios-core-ebook/"><img title="Nagios Core 3 Book" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/nagios-core-132.png" alt="Nagios Core 3 Book"></a>
</td>
<td>
<a rel="nofollow" href="http://www.thegeekstuff.com/vim-101-hacks-ebook/"><img title="Vim 101 Hacks Book" src="./10 Tips for C and C++ Performance Improvement Code Optimization_files/vim-101-hacks-132.png" alt="Vim 101 Hacks Book"></a>
</td>
</tr>
</tbody></table>
</center>
<br>
				</div>
			</div>
			<div id="comments">
				<p class="comments_intro"><span class="bracket">{</span> <span class="num_comments">17</span> comments… <a href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#commentform" rel="nofollow">add one</a> <span class="bracket">}</span></p>
				<ul class="comment_list">
					<li class="comment even thread-even depth-1" id="comment-3569097">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">santosh ydv</span>
							<span class="comment_date">January 16, 2015, 2:08 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3569097"><p>using inline functions cautiously can improve performance.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3569097" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3569108">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">santosh ydv</span>
							<span class="comment_date">January 16, 2015, 2:10 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3569108"><p>declare constants value holding variables as constants, so that compiler can optimize accessing those values,</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3569108" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3572021">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">January 16, 2015, 1:31 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-3572021"><p><a href="http://www.linux-kongress.org/2009/slides/compiler_survey_felix_von_leitner.pdf" rel="nofollow">This</a> one is promising.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3572021" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3572441">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Erlo Haugen</span>
							<span class="comment_date">January 16, 2015, 2:44 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-3572441"><p>In my opinion, optimisation is best left to the compiler. Picking the optimal algorithm and implementing it wisely is of course up to the programmer, but ‘microoptimization’, e.g Your for-loop example and array access using pointers is best left to the compiler. In the case of array access, the (good) compiler will use pointers anyway.<br>
One useful ‘hand optimization’ however is to use the appropriate data type for the job at hand. Don’t use float or dpuble if an integer type will do, use unsigned insted of integer if possible.<br>
Just my two cents.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3572441" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3576980">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">January 17, 2015, 4:38 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3576980"><p>@santosh ydv</p>
<p>is this some improvement for encryption thing, I mean ydv, or U just hate: a,e, i, o, u ?</p>
<p>Nice comment it is useful in some situations. THX!</p>
<p>@Erlo Haugen it would be best to create computer that wold make programs. So, there would not be dissccusions about this.<br>
Some compilers would be able to use one thing and some not, it might be problem for people that don’t understand the pointer syntax.<br>
It is worth investing into it.<br>
Appropriate data type for pro is bid different than this data types used like, but it is not an issue to use them, however I would like to have them changed even in C++ standard, …</p>
<p>Stingy from you ….</p>
<p>I have not covered all tricks, I hope people would contribute with some of they own, that would be point of C++ and open source, wouldn’t it?</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3576980" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3577536">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">January 17, 2015, 6:04 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3577536"><p>‘And nice picture to go with it&gt;<br>
<a href="http://osborne-friends-hannover.de/Stiere/toro_06.jpg-for-web-LARGE.jpg" rel="nofollow">http://osborne-friends-hannover.de/Stiere/toro_06.jpg-for-web-LARGE.jpg</a></p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3577536" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3615701">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">January 21, 2015, 9:46 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3615701"><p>Ok!</p>
<p>This one is for swap of addresses&gt;</p>
<p>int* ptrTemp= i;<br>
i = j;<br>
j = ptrTemp;</p>
<p>This way you only exchange the addresses. It is basis for exchange of pointers that are in an array.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3615701" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3636611">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscicaca</span>
							<span class="comment_date">January 23, 2015, 11:07 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3636611"><p>There are few more C++ optimization tutorials: 1. <a href="http://www.tantalon.com/pete/cppopt/main.htm" rel="nofollow">here</a> 2. <a href="http://en.wikibooks.org/wiki/Optimizing_C%2B%2B/Code_optimization/Faster_operations" rel="nofollow">here</a> 3. <a href="http://www.eventhelix.com/realtimemantra/basics/optimizingcandcppcode.htm#.VMJ-oSwg_r8" rel="nofollow">here</a> 4. <a href="http://people.cs.clemson.edu/~dhouse/courses/405/papers/optimize.pdf" rel="nofollow">here</a> 5. <a href="http://www.agner.org/optimize/optimizing_cpp.pdf" rel="nofollow">here</a></p>
<p>Yeah, like after party!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3636611" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3720893">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Kiran</span>
							<span class="comment_date">February 2, 2015, 8:22 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3720893"><p>&gt;&gt; nSecondOne = nFirstOne ? nSecondOne;</p>
<p>This line should be </p>
<p>nSecondOne = nFirstOne – nSecondOne;</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3720893" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3727050">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">February 3, 2015, 3:58 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3727050"><p>One thing that could be influenced by operating system.</p>
<p>If you have connection to the Internet you would need more security.<br>
If you are not connected to the internet you would not need complete safety thing.</p>
<p>One idea to consider if it is not implemented already.</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3727050" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3770102">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">dusKO*2scica</span>
							<span class="comment_date">February 9, 2015, 12:15 pm</span>
						</div>
						<div class="comment_text grt" id="comment-body-3770102"><p>Yeah!</p>
<p>One thing I am sure about do. I will never write the article that will try to persue the programmer to trust their compiler any way…</p>
<p>It is just not my kind of compiler, we have open source we could trust to!</p>
<p>Obvious difference, for real!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3770102" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3781760">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">February 11, 2015, 2:24 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3781760"><p>HI!</p>
<p>One thing I know, I will never write the article that has purpose to convince people to use optimizations by their compiler.<br>
If you don’t believe you could check it and you could double check with source code as well.</p>
<p>Have nice day!!!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3781760" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment even thread-even depth-1" id="comment-3879111">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">duskoKoscica</span>
							<span class="comment_date">March 8, 2015, 6:39 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-3879111"><p>Yes this is ok, as well</p>
<p><a href="http://en.wikipedia.org/wiki/International_Women%27s_Day" rel="nofollow">http://en.wikipedia.org/wiki/International_Women%27s_Day</a></p>
<p>to all woman that celebrate that!</p>
						</div>
						<div class="comment_footer">
							<a class="comment_permalink" href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization/?utm_source=feedburner&amp;utm_medium=email&amp;utm_campaign=Feed%3A+TheGeekStuff+(The+Geek+Stuff)#comment-3879111" title="permalink to this comment" rel="nofollow">Link</a>
						</div>
</li><!-- #comment-## -->
					<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4240233">
						<div class="comment_head">
							<span class="avatar"></span>
							<span class="comment_author">Avinish</span>
							<span class="comment_date">June 15, 2015, 5:41 am</span>
						</div>
						<div class="comment_text grt" id="comment-body-4240233"><p>how can i optimize this code snippet</p>
<p>result = 1<br>
        for (int32_t x = 1, pxcount = 0; primes[x] &lt;= n; ++x, pxcount = 0) {<br>
            for (int32_t y = primes[x]; y &lt;= n; y *= primes[x])<br>
                pxcount += n / y;<br>
            result = </p></div></li></ul></div></div></div></div></body></html>