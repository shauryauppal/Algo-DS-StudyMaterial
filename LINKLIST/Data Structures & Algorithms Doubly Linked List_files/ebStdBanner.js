EBGInfra={declareNamespace:function(a){for(var b=window.EBG,a=a.split("."),c=0;c<a.length;c++){var d=a[c],e=b[d];e||(e=b[d]={});b=e}},declareClass:function(a,b){a.prototype.constructor=a;if(b)a.__superClass=b,a.__basePrototypePending=!0,EBG._resolveInheritance(a);return a},runTimed:function(a,b,c,d){return setTimeout(function(){b.apply(a,c)},d)},setInterval:function(a,b,c,d){return setInterval(function(){b.apply(a,c)},d)},clearInterval:function(a){clearInterval(a)},sequence:function(){var a=[],b=
function(c){c.count--;if(0<=c.count)return EBG.runTimed(this,b,[c],c.interval),c.tfunc.apply(c.context,c.args);EBG.isFunc(c.callback)&&c.callback.apply(c.cbContext,c.cbArgs);a[c.index]=null};return function(c,d,e,f,g,h,i,j,m,l){if(EBG.isFunc(d)){var k;a:{for(k=0;k<a.length;k++)if(a[k]&&a[k].func==d)break a;k=!1}h=EBG.isNumber(h)?h:g;l=l||{};if(EBG.isFunc(j)&&!EBG.isDefined(l.trailing))l.trailing=!1;c={context:c,func:d,tfunc:!1===k?this.throttle(d,h,l):a[k].tfunc,args:e?e:[],count:f,interval:g,cbContext:i,
callback:j,cbArgs:m?m:[]};d=a.push(c)-1;a[d].index=d;return b(c)}return!1}}(),debounce:function(a,b,c){var d,e,f,g,h,i=function(){var j=(new Date).getTime()-g;j<b&&0<=j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this;e=arguments;g=(new Date).getTime();var j=c&&!d;d||(d=setTimeout(i,b));j&&(h=a.apply(f,e),f=e=null);return h}},throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:(new Date).getTime();g=null;f=a.apply(d,e);
g||(d=e=null)};return function(){var j=(new Date).getTime();!h&&!1===c.leading&&(h=j);var m=b-(j-h);d=this;e=arguments;0>=m||m>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):!g&&!1!==c.trailing&&(g=setTimeout(i,m));return f}},_resolveInheritance:function(a){if(a.__basePrototypePending){var b=a.__superClass;EBG._resolveInheritance(b);var b=b.prototype,c=a.prototype,d;for(d in b)c[d]=c[d]||b[d];delete a.__basePrototypePending}},callSuperConstructor:function(a,b,c){(a=a.__superClass)&&
(c?a.apply(b,c):a.apply(b));return b},callSuperFunction:function(a,b,c,d){if(a=a.__superClass)var e=a.prototype[c];try{if(e)return d?e.apply(b,d):e.apply(b)}catch(f){}},typeOf:function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&("[object Function]"==
Object.prototype.toString.call(a)||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call")))return"function"}else return"function"==b&&"undefined"==typeof a.call?"object":"null";return b},isFunc:function(a){return"function"==EBG.typeOf(a)},isDefined:function(a){return"undefined"!=EBG.typeOf(a)},notNull:function(a){return null!=a},isDefinedNotNull:function(a){return this.isDefined(a)&&this.notNull(a)},hasValue:function(a){return null!=a&&"undefined"!=
EBG.typeOf(a)},hasOwnValue:function(a,b,c){for(var d in a)if(a.hasOwnProperty(d))if(c){if(a[d].toLowerCase()===b.toLowerCase())return!0}else if(a[d]===b)return!0;return!1},getRandomNumber:function(){var a="";try{a=Math.random().toString(),a=a.substr(a.indexOf(".")+1)}catch(b){a=""}return a},isObj:function(a){return"object"==EBG.typeOf(a)},isArray:function(a){return"array"==EBG.typeOf(a)},isBool:function(a){return"boolean"==EBG.typeOf(a)},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},
format:function(a){for(var b=1;b<arguments.length;b++)a=a.replace(RegExp("\\{"+(b-1)+"\\}","gi"),""+arguments[b]);return a},throwEx:function(a){throw{name:"",message:a};},mergeObj:function(a,b,c){var c=!!c,d;for(d in a)if(a.hasOwnProperty(d)&&(!b.hasOwnProperty(d)||c))b[d]=a[d]},cloneObj:function(a){if(!EBG.isObj(a))return null;var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=EBG.isObj(a[c])?EBG.cloneObj(a[c]):a[c]);return b},combinePaths:function(a,b){a=a||"";b=b||"";a&&"/"!=a[a.length-1]&&b&&"/"!=
b[0]&&(a+="/");var c=a;b&&(c+=b);return c},px:function(a){return EBG.format("{0}px",a)},strEQ:function(a,b,c){return a&&b?c?a===b:a.toLowerCase()===b.toLowerCase():!1},indexOfArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},filterArray:function(a,b,c){var d=a.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=[],f=0;f<d;f++)if(f in a){var g=a[f];b.call(c||window,g,f,a)&&e.push(g)}return e},mapArray:function(a,b,c){var d=a.length>>>0;if("function"!=typeof b)throw new TypeError;
for(var e=[],f=0;f<d;f++)f in a&&e.push(b.call(c||window,a[f],f,a));return e},isGlobalDef:function(a,b){var c="undefined"!=typeof window[a];b&&c&&(c=eval(a+"=="+b));return c},numberToEnum:function(a,b){var c="",d;for(d in b)if(b.hasOwnProperty(d)&&b[d]===a){c=d;break}return c},getPageUrl:function(a){try{return a&&a.location&&a.location.href?a.location.href:null}catch(b){return null}},_isXMLHttpRequestSupported:function(){var a=window.XMLHttpRequest?new XMLHttpRequest:null;return a&&EBG.isBool(a.withCredentials)},
htmlDecode:function(a){this.helperDiv=this.helperDiv?this.helperDiv:document.createElement("div");this.helperDiv.innerHTML=a;return this.helperDiv.textContent},htmlEncode:function(a){this.helperDiv=this.helperDiv?this.helperDiv:document.createElement("div");this.helperDiv.textContent=a;return this.helperDiv.innerHTML},getDataFromRemoteServer:function(a,b,c,d,e){if(!a||EBG.isOfflineDemo)return!1;var d=EBG.isBool(d)?d:!0,e=EBG.isBool(e)?e:!1,f=function(){try{if(e){var a,d;9===document.documentMode?
d=(new window.DOMParser).parseFromString(i.responseText,"text/xml"):(a=document.createElement("div"),a.innerHTML="<xml>"+i.responseText+"</xml>",document.body.appendChild(a),d=a.firstChild.XMLDocument,document.body.removeChild(a));b.call(c,d)}else b.call(c,i.responseText)}catch(f){b.call(c)}},g=!1;try{if(this._isXMLHttpRequestSupported()){var h=new XMLHttpRequest;h.open("GET",a,d);g=!0;if(d)h.onreadystatechange=function(){4==h.readyState&&(200==h.status?b.call(c,e?h.responseXML:h.responseText):b.call(c))};
h.send();d||b.call(c,e?h.responseXML:h.responseText)}else if(window.XDomainRequest&&d){var i=new XDomainRequest;if(i)i.onerror=function(){EBG.log.error("XDomain request error");b.call(c)},i.ontimeout=function(){EBG.log.error("XDomain request timeout");b.call(c)},i.onload=f,i.onprogress=function(){},i.open("get",a),i.send(),g=!0}}catch(j){g=!1}return g},getFeatureFlagValue:function(a,b){if(!EBG.isDefined(a))return!1;if(EBG.isArray(a)){for(var c=0;c<a.length;c++)if(a[c].name==b)return a[c].state;return!1}return!!a[b]},
isPercentage:function(a){return a instanceof String?-1<a.indexOf("%"):!1},getTime:function(){var a=(new Date).getTime()/1E3;return function(){return(new Date).getTime()/1E3-a}}(),getObjKeys:function(a){a=a||{};if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},serializeObject:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},getTopAccessibleWindow:function(){var a=
window.ebO&&ebO.ffs&&ebO.ffs||window.EB&&EB._adConfig&&EB._adConfig.ffs;if(!a){var b=arguments.callee;return function(){return b()()}}var c=window;if(c.location.ancestorOrigins&&a&&a.CFF_ancestorOrigins){for(var d=window,e=window,a=c.location.ancestorOrigins,f=!1,g=0;g<a.length;g++)c=c.parent,window.location.origin===a[g]?(e=c,f||(d=c)):f=!0;return function(a){return("boolean"==typeof a?a:1)?d:e}}try{if(c.top.document.domain||""===c.parent.document.domain)c=c.top;else throw new DOMException;}catch(h){try{for(c=
window;c!==c.parent&&c.self!==c.parent;)if(c.parent.document.domain||""===c.parent.document.domain)c=c.parent}catch(i){}}return function(){return c}}(),getBigScript:function(){var a;if(document.currentScript)a=document.currentScript;else{var b=document.getElementsByTagName("script");a=b[b.length-1]}return function(){return a}}(),valueFromPath:function(a,b,c){for(var b=b.split("."),d=0;d<b.length;d++)a=a[b[d]];return EBG.isObj(a)&&c?EBG.cloneObj(a):a}};EBG=window.EBG||{};
EBGInfra.mergeObj(EBGInfra,EBG,!1);EBG.declareNamespace("Logging");EBG.Logging.LoggerLevels={NONE:0,ERROR:1,INFO:2,WARN:3,DEBUG:4};EBG.Logging.Logger=function(a){this._level=a;this.startNestingGroupNames=[];this.endNestingGroupNames=[];this._stringFilters=[];this._fGroupFilter=!1;this._maxIndent=15};
EBG.Logging.Logger.prototype={setLevel:function(a){this._level=a},setFilter:function(a,b){"string"==EBG.typeOf(a)&&(a=[a]);this._fGroupFilter=EBG.isDefined(b)?b:!0;this._stringFilters=a},debug:function(a){this._reportToLog(EBG.Logging.LoggerLevels.DEBUG,arguments)},info:function(a){this._reportToLog(EBG.Logging.LoggerLevels.INFO,arguments)},warn:function(a){this._reportToLog(EBG.Logging.LoggerLevels.WARN,arguments)},error:function(a){this._reportToLog(EBG.Logging.LoggerLevels.ERROR,arguments)},exception:function(a,
b){var c="string"!==b?EBG.format("Exception in {0}. message: {1}",a,b.message):EBG.format("Exception in: {0}. message: {1}",a,b);b.stack&&(c+=EBG.format(" stack: {0}",b.stack));this._reportToLog(EBG.Logging.LoggerLevels.ERROR,[c])},startGroup:function(a){this._supportNesting()&&this._passesFilter(a)&&this.startNestingGroupNames.push(a)},endGroup:function(){this._supportNesting()&&0<this.endNestingGroupNames.length&&window.console.groupEnd(this.endNestingGroupNames.pop())},_consoleAvailable:function(){return void 0!==
window.console},_supportNesting:function(){return this._consoleAvailable()?void 0!==window.console.group:!1},_supportErrorMessage:function(){return void 0!==window.console.error},_supportInfoMessage:function(){return void 0!==window.console.info||void 0!==window.opera},_supportWarnMessage:function(){return void 0!==window.console.warn||void 0!==window.opera},_supportObjectView:function(){return void 0!==window.console.dir||void 0!==window.opera},_callConsoleFunction:function(a,b){var c=!1;switch(a){case EBG.Logging.LoggerLevels.INFO:this._supportInfoMessage()&&
(window.console.info(b),c=!0);break;case EBG.Logging.LoggerLevels.WARN:this._supportWarnMessage()&&(window.console.warn(b),c=!0);break;case EBG.Logging.LoggerLevels.ERROR:this._supportErrorMessage()&&(consoleFunction=window.console.error(b),c=!0)}c||window.console.log(b)},_resetNesting:function(){for(var a=0;a<=this._maxIndent;a++)this.endGroup();console.warn("Reset log group nesting. MaxIndent = "+this._maxIndent)},_passesFilter:function(a){var b=!1;if(0==this._stringFilters.length)b=!0;else for(var c=
0;c<this._stringFilters.length;c++)if(-1<a.indexOf(this._stringFilters[c])){b=!0;break}return b},_reportToLog:function(a,b){if(this._level>=a&&this._consoleAvailable()){var c=b[0];"[object String]"!==Object.prototype.toString.call(c)?this._supportObjectView()||(c=c.toString()):c=EBG.format.apply(null,b);if(void 0===window.opera){for(;this.startNestingGroupNames.length;)window.console.group(this.startNestingGroupNames[0]),this.endNestingGroupNames.push(this.startNestingGroupNames.shift());(this._passesFilter(c)||
this._fGroupFilter&&0<this.endNestingGroupNames.length)&&this._callConsoleFunction(a,c);this.endNestingGroupNames.length>this._maxIndent&&this._resetNesting()}else this._passesFilter(c)&&opera.postError(c)}}};EBG.declareClass(EBG.Logging.Logger,null);EBG.log=EBG.log||new EBG.Logging.Logger(EBG.Logging.LoggerLevels.DEBUG);EBG.declareNamespace("Reporter");EBG.Reporter.ServerReporter=function(a){this.reportFrequency=a.reportFrequency||0};
EBG.Reporter.ServerReporter.prototype={report:function(a){this._shouldReport()&&this._reportMessage(a)},getCallStack:function(){try{throw Error();}catch(a){return formatCallStack(a.stack)}},_shouldReport:function(){var a=!1;0<this.reportFrequency&&this.reportFrequency/100>Math.random()&&(a=!0);return a},formatCallStack:function(a){if(a){for(var b;b!=a;)b=a,a=a.replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");a=a.replace(/\n/g,"")}return a},_reportMessage:function(a){var b=EBG.format("{0}{1}/BurstingPipe/adServer.bs?cn=cLog&ord={2}",
EBG.protocol,EBG.bs,Math.random()),c;for(c in a)a.hasOwnProperty(c)&&(b+="&"+c+"="+a[c]);EBG.adaptor.reportToRemoteServerUsingImage(b)}};EBG.declareClass(EBG.Reporter.ServerReporter,null);EBG.declareNamespace("API");EBG.API.InjectionMethod={APPEND:"append",INSERT_BEFORE:"insertBefore",INSERT_AFTER:"insertAfter",FIRST_CHILD:"firstChild",LAST_CHILD:"lastChild"};EBG.API.BrowserTypes={NON_SUPPORTED:0,IE:1,FF:2,NN:3,SAFARI:4,CHROME:5,AOL:6,OPERA:7,EDGE:8};
EBG.API.PlatformTypes={NON_SUPPORTED:0,WIN_95:1,WIN_98:2,WIN_2000:3,WIN_XP:4,WIN_ME:5,WIN_NT:6,MAC:7,WIN_VISTA:8,WIN_7:9,IPHONE:10,IPAD:11,IPOD:12,ANDROID_2_TAB:13,ANDROID_3_TAB:14,WIN_10:15,ANDROID_5_TAB:16,ANDROID_2_MOBILE:17,ANDROID_3_MOBILE:18,WIN_MOBILE_7:19,ANDROID_4_TAB:20,ANDROID_4_MOBILE:21,WIN_8:22,MAC_NEW:23,MAC_YOSEMITE:24,ANDROID_5_MOBILE:25,CROS:26,FBAN:27,SMART_TV:28,UBUNTU:29,LINUX:30,ANDROID_1:31};EBG.API.DeviceTypes={DESKTOP:0,MOBILE:1,TABLET:2,UNKNOWN:3};
EBG.API.EventNames={CREATE_AD:"CREATE_AD",CREATE_ADAPTOR:"CREATE_ADAPTOR",CREATE_INT_MGR:"CREATE_INT_MGR",CREATE_ANIM_MGR:"CREATE_ANIM_MGR",CREATE_POSITIONING_HELPER:"CREATE_POSITIONING_HELPER",SHOW_AD:"SHOW_AD",ADD_CREATIVES:"ADD_CREATIVES",ADD_INTERACTION:"ADD_INTERACTION",ADD_EYE_DIV:"ADD_EYE_DIV",ADD_HTML5_MAIN_CREATIVE:"ADD_HTML5_MAIN_CREATIVE",ADD_HTML5_PANEL_CREATIVE:"ADD_HTML5_PANEL_CREATIVE",ADD_EMPTY_BANNER_CREATIVE:"ADD_EMPTY_BANNER_CREATIVE",ADD_BANNER_DEFAULT_IMAGE_CREATIVE:"ADD_BANNER_DEFAULT_IMAGE_CREATIVE",
ADD_BANNER_PRELOAD_IMAGE_CREATIVE:"ADD_BANNER_PRELOAD_IMAGE_CREATIVE",ADD_BANNER_DEFAULT_FLASH_CREATIVE:"ADD_BANNER_DEFAULT_FLASH_CREATIVE",ADD_BANNER_RICH_FLASH_CREATIVE:"ADD_BANNER_RICH_FLASH_CREATIVE",ADD_FLOATING_INTRO_CREATIVE:"ADD_FLOATING_INTRO_CREATIVE",ADD_FLOATING_REMINDER_CREATIVE:"ADD_FLOATING_REMINDER_CREATIVE",ADD_FLOATING_MINISITE_CREATIVE:"ADD_FLOATING_MINISITE_CREATIVE",ADD_PANEL_RICH_FLASH_CREATIVE:"ADD_PANEL_RICH_FLASH_CREATIVE",SHOW_BANNER_RICH_FLASH_CREATIVE:"SHOW_BANNER_RICH_FLASH_CREATIVE",
SHOW_PANEL_RICH_FLASH_CREATIVE:"SHOW_PANEL_RICH_FLASH_CREATIVE",SHOW_PANEL_CREATIVE:"SHOW_PANEL_CREATIVE",SHOW_REMINDER:"SHOW_REMINDER",SHOW_MINISITE:"SHOW_MINISITE",PAGE_LOAD:"PAGE_LOAD",COLLECT_TIMERS:"COLLECT_TIMERS",PAGE_UNLOAD:"PAGE_UNLOAD",PAGE_BEFORE_UNLOAD:"PAGE_BEFORE_UNLOAD",PAGE_HIDE:"PAGE_HIDE",PAGE_RESIZE:"PAGE_RESIZE",PAGE_SCROLL:"PAGE_SCROLL",PAGE_FOCUS:"PAGE_FOCUS",PAGE_FOCUSIN:"PAGE_FOCUSIN",PAGE_FOCUSOUT:"PAGE_FOCUSOUT",PAGE_BLUR:"PAGE_BLUR",PAGE_HIDDEN:"PAGE_HIDDEN",PAGE_VISIBLE:"PAGE_VISIBLE",
INTERACTION_REPORT_REMOTE_SERVERS:"INTERACTION_REPORT_REMOTE_SERVERS",START_TIMER:"START_TIMER",STOP_TIMER:"STOP_TIMER",UPDATE_TIMER:"UPDATE_TIMER",HANDLE_COUNTER_INTERACTION:"HANDLE_COUNTER_INTERACTION",HANDLE_TIMER_INTERACTION:"HANDLE_TIMER_INTERACTION",DEFAULT_CLICK:"DEFAULT_CLICK",EXPAND:"EXPAND",COLLAPSE:"COLLAPSE",USER_INTERACTION:"USER_INTERACTION",MOUSE_OVER:"MOUSE_OVER",MOUSE_OUT:"MOUSE_OUT",MOUSE_MOVE:"MOUSE_MOVE",MODULE_LOAD:"MODULE_LOAD",USER_INITIATED_VIDEO:"USER_INITIATED_VIDEO",DWELL_UNIQUE:"DWELL_UNIQUE",
DWELL_VIDEO_START:"DWELL_VIDEO_START",DWELL_VIDEO_STOP:"DWELL_VIDEO_STOP",CREATIVE_CONTAINER_READY:"CREATIVE_CONTAINER_READY",RICH_FLASH_PLAYED:"RICH_FLASH_PLAYED",REPLAY_AD:"REPLAY_AD",BANDWITH_DETECTED:"BANDWITH_DETECTED",FULL_SCREEN_START:"FULL_SCREEN_START",FULL_SCREEN_END:"FULL_SCREEN_STOP",ANIMATE_PANEL:"ANIMATE_PANEL",CLOSE_AD:"CLOSE_AD",OPEN_PAGE:"OPEN_PAGE",MAX_AD_DURATION:"MAX_AD_DURATION",FLASH_IN_FRAME_TWO:"FLASH_IN_FRAME_TWO",SHOW_HIDE_ELEMENTS:"SHOW_HIDE_ELEMENTS",DEFAULT_IMPRESSION:"DEFAULT_IMPRESSION",
AIE_LOADED:"AIE_LOADED",INIT_MANAGERS:"INIT_MANAGERS",MOUSE_MOVE_NEEDED:"MOUSE_MOVE_NEEDED",VISIBILITY_CHECK:"VISIBILITY_CHECK",VISIBILITY_HIDDEN:"VISIBILITY_HIDDEN",AD_START:"AD_START",ELEMENT_LOADED:"ELEMENT_LOADED",AD_STACKING:"AD_STACKING",SCREEN_ORIENTATION:"SCREEN_ORIENTATION",PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE",CHANGE_PANEL_POSITION:"CHANGE_PANEL_POSITION",PANEL_FREQUENCY_LOADED:"PANEL_FREQUENCY_LOADED",THROTTLED:"THROTTLED",FLASH_DETECTED:"FLASH_DETECTED",ANIMATION:"ANIMATION"};
EBG.API.EbEventNames={PAGE_LOAD:EBG.API.EventNames.PAGE_LOAD,SCREEN_ORIENTATION:EBG.API.EventNames.SCREEN_ORIENTATION,VISIBILITY:EBG.API.EventNames.VISIBILITY_CHECK};
EBG.VideoInteraction={STARTED:"ebVideoStarted",PERCENT_25_PLAYED:"eb25Per_Played",PERCENT_50_PLAYED:"eb50Per_Played",PERCENT_75_PLAYED:"eb75Per_Played",FULLPLAY:"ebVideoFullPlay",MUTE:"ebVideoMute",UNMUTE:"ebVideoUnmute",PAUSE:"ebVideoPause",REPLAY:"ebVideoReplay",UNMUTED:"ebVideoUnmuted",FULLSCREEN_START:"ebFSStart",FULLSCREEN_END:"ebFSEnd",FULLSCREEN_MUTE:"ebFSVideoMute",FULLSCREEN_PAUSE:"ebFSVideoPause",SLIDER_DRAGGED:"ebSliderDragged",VIDEO_PLAY_DURATION:"ebVideoPlayDuration",VIDEO_ASSET_DURATION:"ebVideoAssetDuration",
FULLSCREEN_DURATION:"ebFSVideoPlayDuration",FULLSCREEN_ASSET_DURATION:"ebFSVideoAssetDuration",USER_INITIATED_VIDEO:"ebUserInitiatedVideo"};EBG.VideoQuartiles=[EBG.VideoInteraction.STARTED,EBG.VideoInteraction.PERCENT_25_PLAYED,EBG.VideoInteraction.PERCENT_50_PLAYED,EBG.VideoInteraction.PERCENT_75_PLAYED,EBG.VideoInteraction.FULLPLAY];
EBG.EBMessage={REQ_INIT:"reqInit",INIT:"ebInit",INITDONE:"ebInitDone",GET_ENVIROMENT:"ebGetEnvironment",SHOW_DEFAULT_IMAGE:"ebShowDefaultImage",CLICKTHROUGH:"ebclickthrough",NOTIFIED_INTERACTION:"ebNotifiedInteraction",VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",USER_ACTION_COUNTER:"ebCIUserActionCounter",AUTOMATIC_EVENT_COUNTER:"ebCIAutomaticEventCounter",START_TIMER:"ebCIStartTimer",UPDATE_TIMER:"ebUpdateTimer",STOP_TIMER:"ebCIStopTimer",START_VIDEO_TIMER:"ebStartVideoTimer",STOP_VIDEO_TIMER:"ebendvideotimer",
VIDEO_INTERACTION:"ebVideoInteraction",VIDEO_LOAD:"ebVideoLoad",INIT_VIDEO_LOADER:"ebInitVideoLoader",VIDEO_FS_OPEN:"ebVideoFSOpen",VIDEO_FS_CLOSE:"ebVideoFSClose",VIDEO_FS_AUTO_CLOSE:"ebVideoFSAutoClose",START_VIDEO:"ebtStartVideo",STOP_VIDEO:"ebtStoptVideo",UPDATE_VIDEO_DURATION:"ebtUpdateVideoDuration",FULL_SCREEN_OPEN:"ebFullScreenOpen",FULL_SCREEN_CLOSE:"ebFullScreenClose",FULL_SCREEN_AUTO_CLOSE:"ebFullScreenAutoClose",MOUSE_MOVE:"ebMouseMove",PAGE_LOAD:"ebPageLoad",TRIGGER_AD_START:"ebTriggerAdStart",
INIT_EXPANSION_PARAMS:"ebInitExpansionParams",RESET_COLLAPSE_TIMER:"ebResetCollapseTimer",NEW_SE:"ebNewSE",EXPAND:"ebExpandPanel",EXPAND_DONE:"ebExpandDone",COLLAPSE:"ebCollapsePanel",COLLAPSE_DONE:"ebCollapseDone",NOTIFY_INTERACTION_MONITOR:"NotifyInteractionMonitor",HIDE_INTRO:"ebHideIntro",INTRO_FULL_PLAY:"ebIntroFullPlay",KEEP_AD_OPREN:"ebKeepAdOpen",GO_TO_MINISITE:"ebGoToMiniSite",UPDATE_CLICK:"ebUpdateClick",DOCUMENT_LOADED:"ebDocumentLoaded",PLAY_VIDEO_ON_NATIVE_PLAYER:"playVideoOnNativePlayer",
CREATE_CALENDAR_EVENT:"createCalendarEvent",STORE_PICTURE:"storePicture",SDK_DATA_CHANGE:"sdkDataChange",SDK_EVENT:"sdkEvent",ADAPTOR_READY:"adaptorReady",SWIPE:"ebSwipe",DISPOSE:"ebDispose",SET_RESIZE_PROPS:"ebResizeProperties",RESIZE:"ebResize",SET_EXPAND_PROPS:"ebExpandProperties",SET_ORIENTATION_PROPS:"ebOrientationProperties",CLOSE:"ebClose",CLOSE_AD:"ebclosead",SET_STATE:"ebSetstate",RESET_STATE:"ebResetstate",REQ_MOUSE_MOVE:"ebReqMouseMove",ANIMATION:"ebAnimation",VISIBILITY:"ebVisibility"};
EBG.DurationInteraction={TIMER:"Timer",AGGREGATE:"Aggregate"};
EBG.Animation={Easing:{linear:"linear",easeInQuad:"easeInQuad",easeOutQuad:"easeOutQuad",easeInOutQuad:"easeInOutQuad",easeInCubic:"easeInCubic",easeOutCubic:"easeOutCubic",easeInOutCubic:"easeInOutCubic",easeInQuart:"easeInQuart",easeOutQuart:"easeOutQuart",easeInOutQuart:"easeInOutQuart",easeInQuint:"easeInQuint",easeOutQuint:"easeOutQuint",easeInOutQuint:"easeInOutQuint"},TransitionEasing:{ease:"ease",linear:"linear",easeIn:"easeIn",easeOut:"easeOut",easeInOut:"easeInOut"}};
EBG.INNERIFRAMEMessage={LOADED:"ebInnerIframeLoaded",INIT:"ebInitInnerIframe",VERIFY:"ebVerifyInnerIframe",EBO:"ebO",GLOBALPARAMS:"ebGlobalParams",CONTINUE_SENDING:"ContinueSending",NOT_LASTMSG:"NotLastMsg",LASTMSG:"LastMsg",ADCONFIG_REQUEST:"AdConfig_Request",SECRET_TAGS:"Secret_Tags"};
EBG.FS={EB_VERSION_TRACKING_IMPRESSION:"ebversiontrackingimpression",EB_CLICKTHROUGH:"ebclickthrough",EB_CREATIVE_EVENT_SUBSCRIPTION:"ebcreativeaddhdr",EB_CI_USER_ACTION_COUNTER:"ebciuseractioncounter",EB_CI_AUTOMATIC_EVENT_COUNTER:"ebciautomaticeventcounter",EB_VIDEO_INTERACTION:"ebvideointeraction",EB_START_TIMER:"ebstarttimer",EB_END_TIMER:"ebendtimer",EB_CI_START_TIMER:"ebcistarttimer",EB_CI_STOP_TIMER:"ebcistoptimer",EB_UPDATE_TIMER:"ebupdatetimer",EB_START_VIDEO_TIMER:"ebstartvideotimer",EB_STOP_VIDEO_TIMER:"ebendvideotimer",
EB_PAGE_LOAD:"ebpageload",EB_COMMAND:"ebcommand",EB_MSG:"ebmsg",EB_EXPAND_PANEL:"ebexpandpanel",EB_COLLAPSE_PANEL:"ebcollapsepanel",EB_SET_STATE:"ebsetstate",EB_RESET_STATE:"ebresetstate",EB_MOUSE_TRACKER:"ebmousetracker",EB_MOUSE_MOVE:"ebmousemove",EB_TEST_DC:"ebtestdc",EB_CLOSE_AD:"ebclosead",EB_REPLAY_AD:"ebreplayad",EB_REPLAY_EXP:"ebreplayexp",EB_LOAD_RICH_BANNER:"ebloadrichbanner",EB_SHOW_RICH_BANNER:"ebshowrichbanner",EB_INIT_VIDEO_LOADER:"ebinitvideoloader",EB_HIDE_INTRO:"ebhideintro",EB_INTRO_FULL_PLAY:"ebintrofullplay",
EB_KEEP_AD_OPREN:"ebkeepadopen",EB_GO_TO_MINISITE:"ebgotominisite",EB_VIDEO_LOAD:"ebvideoload",EB_VIDEO_LOAD_AND_PLAY:"ebvideoloadandplay",EB_FULL_SCREEN_OPEN:"ebfullscreenopen",EB_FULL_SCREEN_CLOSE:"ebfullscreenclose",EB_FULL_SCREEN_AUTO_CLOSE:"ebfullscreenautoclose",EB_VIDEO_FS_OPEN:"ebvideofsopen",EB_VIDEO_FS_CLOSE:"ebvideofsclose",EB_VIDEO_FS_AUTO_CLOSE:"ebvideofsautoclose",EB_START_VIDEO:"ebtstartvideo",EB_STOP_VIDEO:"ebtstopvideo",EB_UPDATE_VIDEO_DURATION:"ebtupdatevideoduration",EB_GET_JS_VAR:"ebgetjsvar",
EB_GET_ALL_JS_VARS:"ebgetalljsvars",EB_SET_JS_VAR:"ebsetjsvar",EB_INIT_SE:"ebinitse",EB_SET_SE_PROXY:"ebsetseproxy",EB_SE_EXPAND_STARTED:"ebseexpandstarted",EB_SE_RETRACT_STARTED:"ebseretractstarted",EB_SE_RETRACT_FINISHED:"ebseretractfinished",EB_NOTIFICATION:"notification",EB_VIDEO_ACTIVE_MODE:"ebvideoactivemode",EB_THROTTLE:"ebthrottle"};EBG.ActionType={USER:"user",AUTO:"auto"};EBG.ExpBaseInteractions={PANELS_VIEWED:"ebPanelsViewed",AUTO_SHOW:"autoshow",DURATION:"duration"};
EBG.SingleExpInteractions=EBG.ExpBaseInteractions;EBG.orientation={Both:"BOTH",Landscape:"LANDSCAPE",Portrait:"PORTAIT"};
EBG.adTypes={RichBannerHtml5:"Html5Banner",PoliteBannerHtml5:"Html5PoliteBanner",SEBannerHtml5:"Html5SEBanner",ExpBannerHtml5:"Html5ExpBanner",StdBanner:"StdBanner",Banner:"Banner",SingleExpBanner:"SingleExpBanner",ExpBanner:"ExpBanner",VisibilityAd:"Visibility",FloatingAd:"FloatingAd",FloatingAdWithRem:"FloatingAdWithReminder",TrackingAd:"Tracking",StdBannerHtml5:"Html5StdBanner",WallpaperAd:"WallpaperAd"};EBG.adParts={BANNER:"banner",PANEL:"panel",DEFAULTBANNER:"defaultBanner",RICHBANNER:"richBanner"};
EBG.WindowTarget={BLANK:"_blank",SELF:"_self",PARENT:"_parent",TOP:"_top"};EBG.Const={OUTER_DIV:"eyeDiv",DATACAPTURE:"/BurstingPipe/BurstingDataCapturePipe.asp",AKAMAIFCS_PLUID_9:"rtmp://flv.stream.atwola.com/flash/flv/mm",AKAMAIFCS_PLUID_43:"rtmp://eyeblaster.fcod.msecnd.net/vod/a10061/e1",AKAMAIFCS_PLUID_42_45:"rtmp://cp57388.edgefcs.net/ondemand",AKAMAI_DEFAULT:"rtmp://cp16207.edgefcs.net/ondemand",SHOW_HIDE_FLAG:"data-ebhidingoverlappingelement",SHOW_HIDE_BACKUP:"data-ebvisibilitybackup"};
EBG.PanelPositionType={PAGE_RELATIVE_PERCENTAGE:0,BANNER_RELATIVE_PIXELS:1,PAGE_RELATIVE_PIXELS:2,VIEWPORT_RELATIVE_PERCENTAGE:3,VIEWPORT_RELATIVE_PIXELS:4};EBG.PanelCorner={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4};EBG.AnimationType={NONE:"none",LINEAR:"linear",EASE_OUT:"easeout",EASE_OUT_SNAP:"easeoutsnap"};EBG.ExpandCollapseMethod={CLIP:"clip",RESIZE:"resize"};
EBG.AnimationDefaults={easeOutCoefficient:0.1,stepTime:10,linearSteps:50,snapThreshold:10,animationType:EBG.AnimationType.NONE,snap:!1,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!0,removeAssetAfterCollapse:!0,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};
EBG.AnimationPushDownDefaults={easeOutCoefficient:0.1,stepTime:50,linearSteps:20,snapThreshold:10,animationType:EBG.AnimationType.LINEAR,snap:!1,method:EBG.ExpandCollapseMethod.RESIZE,checkShowHideOnEachStep:!1,hideAssetAfterExpand:!1,removeAssetAfterExpand:!1,hideAssetAfterCollapse:!0,removeAssetAfterCollapse:!0,method:EBG.ExpandCollapseMethod.ExpBanner,endAnimationHideAsset:!1,endAnimationRemoveAsset:!1};
EBG.AnimProps={easeOutCoefficient:"easeOutCoefficient",snapThreshold:"snapThreshold",method:"method",endAnimationHideAsset:"endAnimationHideAsset",endAnimationRemoveAsset:"endAnimationRemoveAsset"};EBG.AnimDefaultProps={stepTime:"stepTime",linearSteps:"linearSteps",animationType:"animationType"};EBG.AnimNonDefaultPanelValues={animationType:EBG.AnimationType.NONE,stepTime:0,linearSteps:1};EBG.AnimExpansionProps={hideAssetAfterExpand:"hideAssetAfterExpand",removeAssetAfterExpand:"removeAssetAfterExpand"};
EBG.AnimCollapseProps={hideAssetAfterCollapse:"hideAssetAfterCollapse",removeAssetAfterCollapse:"removeAssetAfterCollapse"};EBG.ProtectedElementIds=["ebAd","eyeDiv","ebDefault","ebRich","ebDiv"];EBG.VisibilityMode={DEFAULT_MODE:"defaultMode",BASIC_MODE:"basicMode",ENHANCED_MODE:"enhancedMode"};EBG.AcCertProgram={IAB_EU:0,NAI_US:1};EBG.AcIconPosition={TopRight:0,TopLeft:1,BottomRight:2,BottomLeft:3};EBG.PreloadType={DefaultImg:0,PreloadImg:1,DefaultFlash:2};
EBG.ThrottleStates={LOAD:"load",THROTTLE:"throttle",RESUME:"resume",PAUSE:"pause",POLLED:"polled"};EBG.WebEnvironment={BROWSER:0,ANDROID_MOBILE_BROWESR:1,ANDROID_WEB_VIEW:2,IOS_MOBILE_BROWSER:3,IOS_WEB_VIEW:4,OTHER_MOBILE_BROWSER:5,OTHER_WEB_VIEW:6,ANDROID_UNKNOWN:97,IOS_UNKNOWN:98,UNKNOWN:99};EBG.SDK_STATES=EBG.SDK_STATES||{};EBG.SDK_STATES.API={DEFAULT:"SDKdefault",EXPANDED:"SDKexpanded",LOADING:"SDKloading",RESIZED:"SDKresized"};EBG.SDK_EVENTS=EBG.SDK_EVENTS||{};
EBG.SDK_EVENTS.API={STATE_CHANGE:"SDKstateChange",ERROR:"SDKerror",READY:"SDKready",VIEWABLE_CHANGE:"SDKviewableChange",SIZE_CHANGE:"SDKsizeChange",RESIZE_PROPS_CHANGE:"SDKresizePropsChange",EXPAND_PROPS_CHANGE:"SDKexpandPropsChange",WINDOW_SIZE_CHANGE:"windowSizeChange"};EBG.declareNamespace("Events");EBG.Events.EventTiming={BEFORE:"BEFORE",ONTIME:"ONTIME",AFTER:"AFTER",ONTIME_AND_AFTER:"ONTIME_AND_AFTER"};EBG.Events.EventNames=EBG.API.EventNames;EBG.Events.EbEventNames=EBG.API.EbEventNames;
EBG.Events.EventSubscription=function(a,b,c){this.eventName=a;this.callback=b;this.callbackBinding=c?c:null};
EBG.Events.EventSubscription.prototype={dispatcherFilters:null,timing:EBG.Events.EventTiming.ONTIME,isElementEvent:!1,elementId:"",isDocumentEvent:!1,isValid:function(){return EBG.isFunc(this.callback)&&(!this.callbackBinding||EBG.isObj(this.callbackBinding))},toString:function(){return EBG.format("EventSubscription: eventName={0}, timing={1}, callback={2}, callbackBinding={3}, dispatcherFilters={4}",this.eventName,this.timing,EBG.typeOf(this.callback),EBG.typeOf(this.callbackBinding),EBG.typeOf(this.dispatcherFilters))}};
EBG.declareClass(EBG.Events.EventSubscription,null);EBG.Events.Event=function(a){this.name=a;this.creationTime=+new Date};EBG.Events.Event.prototype={dispatcher:null,eventData:null,timing:null,toString:function(){return EBG.format("Event: name={0}, creationTime={1}, dispatcher={2}, eventData={3}",this.name,this.creationTime,EBG.typeOf(this.dispatcher),EBG.typeOf(this.eventData))}};EBG.declareClass(EBG.Events.Event,null);EBG.Events.EventManager=function(){this._subscriptions={}};
EBG.Events.EventManager.prototype={_subscriptions:{},subscribeToEvent:function(a){if(a.isValid())if(a.isElementEvent)EBG.adaptor&&EBG.adaptor.subscribeToEventOnElement(a.eventName,a.elementId,a.callback);else{var b=this._subscriptions[a.eventName]=this._subscriptions[a.eventName]||{},c;for(c in EBG.Events.EventTiming)EBG.Events.EventTiming.hasOwnProperty(c)&&(b[c]=b[c]||[]);-1==this._getSubscriptionId(a,b[a.timing])&&(b[a.timing].push(a),EBG.adaptor&&EBG.adaptor.hasEvent(a.eventName)&&EBG.adaptor.subscribeToEvent(a.eventName,
a.isDocumentEvent))}},unsubscribeFromEvent:function(a){if(a&&a.isValid())if(a.isElementEvent)EBG.adaptor&&EBG.adaptor.unsubscribeFromEventOnElement(a.eventName,a.elementId,a.callback);else if(this._subscriptions[a.eventName]&&this._subscriptions[a.eventName][a.timing]){var b=this._subscriptions[a.eventName][a.timing],a=this._getSubscriptionId(a,b);-1!=a&&(b[a]=null)}},dispatchEvent:function(a){var b=!1;switch(a.timing){case EBG.Events.EventTiming.BEFORE:case EBG.Events.EventTiming.ONTIME:case EBG.Events.EventTiming.AFTER:b=
this._dispatchEventByTiming(a,a.timing);break;case EBG.Events.EventTiming.ONTIME_AND_AFTER:b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER);break;default:b=(b=(b=this._dispatchEventByTiming(a,EBG.Events.EventTiming.BEFORE))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.ONTIME))||this._dispatchEventByTiming(a,EBG.Events.EventTiming.AFTER)}return b},attachToAdaptor:function(){EBG.adaptor.setListener(this.dispatchEvent,
this)},_dispatchEventByTiming:function(a,b){var c=this._subscriptions[a.name];if(!c)return!1;for(var c=c[b],d=!1,e=0;e<c.length;e++){var f=c[e];if(f&&(f=this._dispatchEventToSubscription(a,f),EBG.isBool(f)&&!f)){d=!0;break}}return d},_dispatchEventToSubscription:function(a,b){var c=b.dispatcherFilters;if(EBG.isObj(c))for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=!0,g=d.split("."),h=a.dispatcher;if(h)for(var i=0;i<g.length;i++){var h=h[g[i]],j=i==g.length-1;if(!h||j&&h!==e){f=!1;break}}if(!f)return null}c=
null;d=b.callback;if(EBG.isFunc(d)){e=[a];try{c=d.apply(b.callbackBinding,e)}catch(m){}}return c},_getSubscriptionId:function(a,b){for(var c=0;c<b.length;c++)if(b[c]&&b[c].callback===a.callback&&b[c].callbackBinding===a.callbackBinding&&b[c].isDocumentEvent===a.isDocumentEvent&&this._compareFilters(b[c].dispatcherFilters,a.dispatcherFilters))return c;return-1},_compareFilters:function(a,b){if(!EBG.isObj(a))return EBG.isObj(b)?!1:!0;if(!EBG.isObj(b))return!1;for(var c in a)if(a.hasOwnProperty(c))if(b.hasOwnProperty(c)){if(a[c]!==
b[c])return!1}else return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}};EBG.declareClass(EBG.Events.EventManager,null);EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;EBG.declareNamespace("Adaptors");EBG.Adaptors.TagNames={DIV:"div",IFRAME:"iframe",IMG:"img",SCRIPT:"script",OBJECT:"object",EMBED:"embed",SPAN:"span",A:"a",BODY:"body"};EBG.Adaptors.InjectionMethod=EBG.API.InjectionMethod;
EBG.Adaptors.WindowProp={top:"top",left:"left",location:"location",menubar:"menubar",width:"width",height:"height"};EBG.Adaptors.MoreSupportedEvent={visibilitychange:1,mozvisibilitychange:1,msvisibilitychange:1,webkitvisibilitychange:1};EBG.Adaptors.StdWebAdaptor=function(){this._setEvents()};EBG.Adaptors.StdWebAdaptor.onEnvEvent=function(){EBG.adaptor._handleEvent.apply(EBG.adaptor,arguments)};
EBG.Adaptors.StdWebAdaptor.prototype={_environmentEvents:{},_logicalEvents:{},_subscribedEvents:{},_subscribedEventsOnElement:[],_listener:null,_listenerBinding:null,_loadedModules:{},initInnerModules:function(a,b,c,d,e){if(!this.browser)this.browser=new EBG.Adaptors.Browser(a,b,c,d,e);if(!this.flash)this.flash=EBG.Adaptors.FlashDetector?new EBG.Adaptors.FlashDetector:null},registerSpecialBrowserEvents:function(){},loadModule:function(a,b,c,d){if(!a||!b||!b.modulesDir)return!1;var e=this,b=0==a.indexOf("http")?
a:b.modulesDir+a+".js",a=a.toLowerCase(),f=new EBG.Events.Event(EBG.Events.EventNames.MODULE_LOAD);f.dispatcher=this;f.eventData={name:a};f.timing=EBG.Events.EventTiming.BEFORE;if(!EBG.eventMgr.dispatchEvent(f))if(this._loadedModules[a])this._loadedModules[a].loading&&c?this._loadedModules[a].callback.push({func:c,binding:d||window}):EBG.runTimed(this,function(){this._handleModuleLoaded(a)},[],0);else{this._loadedModules[a]={loading:!0,loaded:!1,callback:c?[{func:c,binding:d||window}]:[]};var g=document.createElement("script");
g.type="text/javascript";g.async=!0;g.readyState?g.onreadystatechange=function(){if("loaded"===g.readyState||"complete"===g.readyState)g.onreadystatechange=null,e._handleModuleLoaded(a)}:g.onload=function(){e._handleModuleLoaded(a)};g.src=b;(EBG.getBigScript().parentElement||document.getElementsByTagName("html")[0]).appendChild(g)}},_handleModuleLoaded:function(a){var b=this._loadedModules[a];b.loading=!1;b.loaded=!0;var c=new EBG.Events.Event(EBG.Events.EventNames.MODULE_LOAD);c.dispatcher=this;
c.eventData={name:a};c.timing=EBG.Events.EventTiming.ONTIME;if(!EBG.eventMgr.dispatchEvent(c)){for(a=0;a<b.callback.length;a++){var d=b.callback[a];d.func.apply(d.binding)}c.timing=EBG.Events.EventTiming.AFTER;EBG.eventMgr.dispatchEvent(c)}},copy:function(a){for(var b in this._subscribedEvents)this._subscribedEvents.hasOwnProperty(b)&&(this._removeEventListener(window,this._environmentEvents[b].name,EBG.Adaptors.StdWebAdaptor.onEnvEvent),a.subscribeToEvent(b));for(b=0;b<this._subscribedEventsOnElement.length;b++){var c=
this._subscribedEventsOnElement[b];if(c){var d=c.elementId,e=c.eventName,c=c.callback,f=this.getElementById(d);f&&(this._removeEventListener(f,e,c),a.subscribeToEventOnElement(e,d,c))}}a.flash=this.flash||null},intMonitorExist:function(){return EBG.isPreview&&top.ebHandleFsCommandsPrev},notifyIntMonitor:function(a){top.ebHandleFsCommandsPrev(a.command,a.args,a.objName,a.adId,a.elapsedTime)},hasEvent:function(a){return!!this._environmentEvents[a]},generateElementId:function(a,b){return EBG.format("eb{0}_{1}",
a,b)},_getTags:function(a,b){EBG.isGlobalDef("JSON");var c="";if(b&&a.tagName==EBG.Adaptors.TagNames.SCRIPT&&a.text&&!a.attributes)b.push(a);else{c="";a.attributes&&(this._setObjDefaultAttributes(a),c=this._getObjAttributesStr(a));c=EBG.format("<{0} {1}>",a.tagName,c);a.innerHTML&&(c+=a.innerHTML);a.text&&(c+=a.text);a.params&&(c+=this._getObjParamsStr(a));if(a.children)for(var d=0;d<a.children.length;d++)c+=this._getTags(a.children[d],b);c+=EBG.format("</{0}>",a.tagName)}return c},writeReportingIFrame:function(a,
b,c){this.inject({tagName:EBG.Adaptors.TagNames.IFRAME,attributes:{id:a,src:b,style:{width:"0px",height:"0px"},frameborder:0}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))},writeScript:function(a,b,c){try{this.inject({tagName:EBG.Adaptors.TagNames.SCRIPT,attributes:{id:a,name:a,src:b}},EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(c))}catch(d){}},write:function(a){this._documentWrite(this._getTags(a))},inject:function(a,b,c){var d=c.ownerDocument.createElement(a.tagName);
if(a.attributes){this._setObjDefaultAttributes(a);for(var e in a.attributes)EBG.isObj(a.attributes[e])?this.setStyleToElem(d,a.attributes[e]):d.setAttribute(e,a.attributes[e])}switch(b){case EBG.Adaptors.InjectionMethod.INSERT_BEFORE:c.parentNode.insertBefore(d,c);break;default:c.appendChild(d)}e="";if(a.innerHTML)e=a.innerHTML;var f=[];if(a.children)for(var g=0;g<a.children.length;g++){var h=a.children[g];e+=EBG.adaptor._getTags(h,f);h.meta&&!0==h.meta.isChromePowerSaver&&this._resizeAfterPaint(h.attributes.id,
h.meta.origWidth,h.meta.origHeight)}if(e)d.innerHTML=e;if(a.text)d.text=a.text;for(g=0;g<f.length;g++)this.inject(f[g],b,c);return d},addInlineDOM:function(a,b){this.inject(a,EBG.Adaptors.InjectionMethod.APPEND,this.getElementById(b))},setInnerHtml:function(a,b){a.innerHTML=b},setStyleToElem:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])},getStyleOfElem:function(a){if(a)return a.style},setListener:function(a,b){this._listener=a;this._listenerBinding=b},hasHiddenParent:function(a){if(!a)return!1;
for(var b="none"==window.getComputedStyle(a).display;(a=a.parentElement)&&!(b="none"==window.getComputedStyle(a).display););return b},subscribeToEvent:function(a,b){var c=this.getDisplayWin(),d=this.getPageWin();if(this.hasEvent(a)&&!this._subscribedEvents[a]){var e=this._environmentEvents[a],f=e.inCurWin?window:this.getPageWin();if(b)f=f.document;this._logicalEvents[e.name].signInAllWindows&&this.serving.detectServingMode(!0)===EBG.Adaptors.ServingMode.FRIENDLY_IFRAME&&c!==d?(this._addEventListener(d,
e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent),this._addEventListener(c,e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent)):this._addEventListener(f,e.name,EBG.Adaptors.StdWebAdaptor.onEnvEvent);this._subscribedEvents[a]={}}},subscribeToEventOnElement:function(a,b,c){var d=!1,e="string"==typeof b?this.getDisplayWin().document.getElementById(b):b;e||(d=!0);for(var f=this._subscribedEventsOnElement.length,g=0;g<f;g++)if(this._subscribedEventsOnElement[g]&&this._subscribedEventsOnElement[g].elementId==b&&
this._subscribedEventsOnElement[g].eventName==a){d=!0;break}d||(this._addEventListener(e,a,c),this._subscribedEventsOnElement[f]={elementId:b,eventName:a,callback:c})},unsubscribeFromEventOnElement:function(a,b,c){var d="string"==typeof b?this.getDisplayWin().document.getElementById(b):b;if(d){for(var e=this._subscribedEventsOnElement.length,f=-1,g=0;g<e;g++)if(this._subscribedEventsOnElement[g]&&this._subscribedEventsOnElement[g].elementId==b&&this._subscribedEventsOnElement[g].eventName==a&&this._subscribedEventsOnElement[g].callback==
c){f=g;break}0<=g&&(this._removeEventListener(d,a,c),this._subscribedEventsOnElement[f]=null)}},_addEventListener:function(a,b,c){"load"==b&&this.isPageLoaded()?setTimeout(function(){c({type:"load"})},5):window.addEventListener?a.addEventListener(b,c,!1):window.attachEvent&&a.attachEvent("on"+b,c)},_removeEventListener:function(a,b,c){window.removeEventListener?a.removeEventListener(b,c,!1):window.detachEvent&&a.detachEvent("on"+b,c)},_checkIfPropExist:function(a,b){return a&&0<=a?EBG.format(", {0}={1}",
b,a):""},openPage:function(a,b){var c=EBG.WindowTarget.BLANK,d="",e=null;if(b&&(c=b.target,b.xPos||b.yPos||b.width||b.height))d="titlebar=1,resizable=1,scrollbars=1,directories=0,toolbar=1,status=1"+this._checkIfPropExist(b.yPos,EBG.Adaptors.WindowProp.top),d+=this._checkIfPropExist(b.xPos,EBG.Adaptors.WindowProp.left),d+=this._checkIfPropExist(b.showAddressBar,EBG.Adaptors.WindowProp.location),d+=this._checkIfPropExist(b.showMenuBar,EBG.Adaptors.WindowProp.menubar),d+=this._checkIfPropExist(b.width,
EBG.Adaptors.WindowProp.width),d+=this._checkIfPropExist(b.height,EBG.Adaptors.WindowProp.height);return e=""!=d?window.open(a,c,d):window.open(a,c)},reportBeacon:function(a){navigator&&EBG.isFunc(navigator.sendBeacon)&&navigator.sendBeacon(a)},reportToRemoteServerUsingImage:function(){var a=[];return function(b){for(var c=0;c<a.length;c++)if(a[c]===b)return;this.ReportingImg=new Image;this.ReportingImg.src=b;a.push(b)}}(),getDataFromRemoteServer:function(a,b,c,d,e){return EBG.getDataFromRemoteServer(a,
b,c,d,e)},reportToRemoteServer:function(a,b,c,d){if(a&&!EBG.isOfflineDemo){var b=!!b,d=d||this.getRequestMethod(a),e;"POST"==d&&(e=a.split("?"),a=e[0],e=e[1]);var f=!1;try{if(this.browser.isSafari()&&"POST"==d){var g=document.createElement("iframe");g.style.display="none";g.style.width="0px";g.style.height="0px";document.body.appendChild(g);g=g.contentWindow?g.contentWindow:g.contentDocument.document?g.contentDocument.document:g.contentDocument;g.document.open();g.document.write(this.getIframeFormScript(a,
e));g.document.close();f=!0}else if(EBG._isXMLHttpRequestSupported()){var h=new XMLHttpRequest;h.open(d,a,b);if(b||!b&&!this.browser.isFF())h.withCredentials=!0;try{h.send(e)}catch(i){if(b)throw i;}f=!0}else if(window.XDomainRequest&&!c&&b){var j=new XDomainRequest;j.open(d,a);j.send(e);f=!0}}catch(m){f=!1}f||this.reportToRemoteServerUsingImage(a)}},getIframeFormScript:function(a,b){return'<script>var e=document.createElement("form"),t="'+b+'".split("&");e.setAttribute("method","post"),e.setAttribute("action","'+
a+'");for(var i=0;i<t.length;++i){var a=t[i].substr(0,t[i].indexOf("=")),r=t[i].substr(t[i].indexOf("=")+1),m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name",a),m.setAttribute("value",r),e.appendChild(m)}e.submit();<\/script>'},getElementById:function(a,b){var c=null,b=b?b:this.getDisplayWin();EBG.isDefinedNotNull(a)&&(c=b.document.getElementById(a));return c},supportsPageLoadEvents:function(){return!(this.browser.isOpera()&&14>this.browser.getVersion())&&!(this.browser.isIE()&&
7>this.browser.getVersion())},getHostName:function(a){return(a?a:this.getDisplayWin()).location.hostname},getDomain:function(a){return(a?a:this.getDisplayWin()).document.domain},getDisplayWin:function(){return window},getPageWin:function(){return window},inInnerIframe:function(){return!1},inPlacementIframe:function(){return!1},_setEvents:function(){this.supportsPageLoadEvents&&(this._setEvent(EBG.Events.EventNames.PAGE_LOAD,"load"),this._setEvent(EBG.Events.EventNames.PAGE_UNLOAD,"unload",!0),this._setEvent(EBG.Events.EventNames.PAGE_BEFORE_UNLOAD,
"beforeunload",!0),this._setEvent(EBG.Events.EventNames.PAGE_HIDE,"pagehide",!0));this._setEvent(EBG.Events.EventNames.PAGE_RESIZE,"resize");this._setEvent(EBG.Events.EventNames.SCREEN_ORIENTATION,"orientationchange");this._setEvent(EBG.Events.EventNames.MOUSE_MOVE,"mousemove",!1,["clientX","clientY","pageX","pageY","view"],!0)},_setEvent:function(a,b,c,d,e){this._environmentEvents[a]={name:b,inCurWin:c?c:!1};this._logicalEvents[b]={name:a,signInAllWindows:e};if(d){this._logicalEvents[b].attr=[];
for(a=0;a<d.length;a++)this._logicalEvents[b].attr[a]=d[a]}},_documentWrite:function(a){document.write(a)},isPageLoaded:function(){if(this._isPageLoaded)return!0;this._isPageLoaded=EBGInfra.isDefined(window.gEBMainWindow)&&EBGInfra.isDefined(gEBMainWindow.EBP)&&gEBMainWindow.EBP.isPageLoaded;if(!this._isPageLoaded&&this.getPageWin().document.readyState)this._isPageLoaded="complete"==this.getPageWin().document.readyState;return EBG.adaptor._isPageLoaded},_handleEvent:function(a){var b=this._logicalEvents[a.type].name;
switch(b){case EBG.Events.EventNames.PAGE_LOAD:this._isPageLoaded=!0;break;case EBG.Events.EventNames.PAGE_RESIZE:EBG.adaptor.inInnerIframe()&&this.serving.rehidePlacementIframe();break;case EBG.Events.EventNames.SCREEN_ORIENTATION:this._handleOrientationEvent();return;case EBG.Events.EventNames.PAGE_BEFORE_UNLOAD:if(this.browser.isIE()&&this._isPageLoaded)return}b&&(b=new EBG.Events.Event(b),EBGInfra.isDefinedNotNull(this._logicalEvents[a.type].attr)&&this._prepareLogicalEventData(b,a,this._logicalEvents[a.type].attr),
EBG.isFunc(this._listener)&&this._listener.call(this._listenerBinding,b))},_handleOrientationEvent:function(){},_prepareLogicalEventData:function(a,b,c){try{a.eventData={};for(var d=0;d<c.length;d++)a.eventData[c[d]]=b[c[d]]}catch(e){}},_getDefaultAttributes:function(a){var b={};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.IFRAME:b={marginheight:"0px",marginwidth:"0px",frameborder:"0",scrolling:"no"}}return b},_getDefaultStyle:function(a){var b={border:"0px",padding:"0px",margin:"0px"};switch(a.toLowerCase()){case EBG.Adaptors.TagNames.DIV:EBG.mergeObj({top:"0px",
left:"0px",overflow:"visible",fontSize:"0px",lineHeight:"0px",textAlign:"left"},b,!0)}return b},_setObjDefaultAttributes:function(a){var b=this._getDefaultAttributes(a.tagName);EBG.mergeObj(a.attributes,b,!0);b.style=this._getDefaultStyle(a.tagName);a.attributes.style&&EBG.mergeObj(a.attributes.style,b.style,!0);a.attributes=b},_getObjParamsStr:function(a){var a=a.params,b="",c;for(c in a)a.hasOwnProperty(c)&&(b+=EBG.format("<PARAM name='{0}' value='{1}'>",c,a[c]));return b},_getObjAttributesStr:function(a){var a=
a.attributes,b="",c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(EBG.isObj(d)){var e=d,d="",f;for(f in e)if(e.hasOwnProperty(f)){var g=e[f];"textAlign"==f&&(f="text-align");d+=EBG.format("{0}:{1}; ",f,g)}}if(d)try{d=d.toString().replace(/\"/ig,"&quot;"),b+=EBG.format(' {0}="{1}"',c,d)}catch(h){}}return b},_resizeAfterPaint:function(a,b,c){b&&c&&EBG.runTimed(this,function(){var d=this.getElementById(a);this.setElemStyle(d,"width",b);this.setElemStyle(d,"height",c)},[],50)},handleEvent:function(a){this._handleEvent(a)},
setElemStyle:function(a,b,c){a.style[b]=c},getBrowserLanguage:function(){var a="en-US";if("undefined"!==typeof navigator.language)a=navigator.language;else if("undefined"!==typeof navigator.userLanguage)a=navigator.userLanguage;return a},getPositioningById:function(a,b,c){return this.getPositioningByElement(this.getElementById(a),b,c)},getPositioningByElement:function(a,b,c){a=a&&a.getBoundingClientRect?a.getBoundingClientRect():null;if(!a)return null;b=this.getScrollLeftTop(b,c);return{X:Math.floor(a.left)+
b.X,Y:Math.floor(a.top)+b.Y}},getScrollLeftTop:function(a,b){var c=this._getCurrentWindow(a,b),d=c.document,e={X:{"0":"XOffset",1:"Left"},Y:{"0":"YOffset",1:"Top"}},f;for(f in e)e[f]=c["page"+e[f][0]]||(d.documentElement?d.documentElement["scroll"+e[f][1]]:d.documentElement["page"+e[f][0]])||(d.body?d.body["scroll"+e[f][1]]:0);return e},_getCurrentWindow:function(a){try{return a?this.getDisplayWin():top}catch(b){}},getRequestMethod:function(a){return this.browser.isIE()&&6==this.browser.getVersion()||
this.isInApp()?"GET":2E3<a.length?"POST":"GET"},removeElement:function(a){if(a=this.getElementById(a))a.parentNode.removeChild(a),a.removeNode&&a.removeNode(!0)},appendChildElement:function(a,b){a&&b&&this.getElementById(a).appendChild(b)},getMaxZIndex:function(a){if(this.browser.isIE()&&8>this.browser.getVersion())return 10001;var b=0;if(a){var c=this.getStyleOfElem(a);c&&c.zIndex&&(b=c.zIndex);for(var d in a.childNodes)d&&a.childNodes[d]&&(c=this.getMaxZIndex(a.childNodes[d]),b=b>c?b:c)}return b},
setCookieKeyValuePair:function(a,b,c){if(EBG.isDefined(a)&&""!=a&&EBG.isDefined(b))b=EBG.isDefined(c)&&c?escape(b):b,document.cookie=a+"="+b+";"},isSafeFrame:function(){return!(!window.$sf||!$sf.ext)},isInApp:function(){return!1},isSkype:function(){try{return!!(window.$WLXRmAd||window.parent&&window.parent.$WLXRmAd)}catch(a){return!1}},isReady:function(){return!0},getBoundingClientRect:function(a,b){if(!a||!this.getElementById(a.id))return null;var b=b||{},c=a.getBoundingClientRect(),c={top:~~c.top,
left:~~c.left,bottom:~~c.bottom,right:~~c.right};c.width=~~c.width||c.right-c.left;c.height=~~c.height||c.bottom-c.top;if(b.clip)try{var d=/rect\((.*?)px(.*?)px(.*?)px(.*?)px\)/g.exec(this.getComputedStyle(a).getPropertyValue("clip"));if(d){for(var e=1;e<d.length;e++)d[e]=parseFloat(d[e].replace(",",""));if(0!=d[1]+d[2]+d[3]+d[4]){var f={top:c.top+d[1],left:c.left+d[4]};f.right=Math.min(f.left+(d[2]-d[4]),c.right);f.bottom=Math.min(f.top+(d[3]-d[1]),c.bottom);f.width=f.right-f.left;f.height=f.bottom-
f.top;c=f}}}catch(g){}if(b.relativeToTop){for(var e=d=0,f=EBG.getTopAccessibleWindow(),h=a.ownerDocument,h=h.defaultView||h.parentWindow;h!==f&&h.frameElement;)var i=h.frameElement.getBoundingClientRect(),d=d+i.top,e=e+i.left,h=h.parent;c.top+=d;c.left+=e;c.bottom+=d;c.right+=e}b.relativeToWindow&&(h=this.getElementWindow(a),d=h.pageXOffset||h.document.documentElement.scrollLeft,e=h.pageYOffset||h.document.documentElement.scrollTop,c.top+=e,c.left+=d,c.bottom+=e,c.right+=d);return c},getComputedStyle:function(){return window.getComputedStyle?
function(a,b){return(this.getElementWindow(a)||window).getComputedStyle(a,b)}:function(a){var b={};b.el=a;b.getPropertyValue=function(b){var d=/(\-([a-z]){1})/g;"float"==b&&(b="styleFloat");d.test(b)&&(b=b.replace(d,function(a,b,c){return c.toUpperCase()}));return a.currentStyle[b]?a.currentStyle[b]:a.style[b]?a.style[b]:null};return b}}(),isPageVisible:function(a){var b=!0;(b=(b=this._getVisibilityEventHidden())&&document[b]?!1:!0)&&this.browser.isIE()&&this.serving.detectServingMode(!0)!=EBG.Adaptors.ServingMode.IFRAME&&
(b=b&&(this.focused||a));return b},_getVisibilityEventHidden:function(){var a=null;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return a},getObjKeys:function(a){a=a||{};if(Object.keys)return Object.keys(a);var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},isNode:function(a){return"object"===typeof Node?a instanceof
Node:a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},isElement:function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName},isElementOrNode:function(a){return this.isElement(a)||this.isNode(a)}};EBG.declareClass(EBG.Adaptors.StdWebAdaptor,null);EBG.Adaptors=EBG.Adaptors||{};EBG.Adaptors.Browser=function(a,b,c,d,e){this.set(a,b,c,d,e)};
EBG.Adaptors.Browser.prototype={_platform:0,_browserType:0,_browserVer:0,_browserCode:0,_deviceType:0,_browserTypes:EBG.API.BrowserTypes,_platformTypes:EBG.API.PlatformTypes,_deviceTypes:EBG.API.DeviceTypes,set:function(a,b,c,d,e){a=a?a:this._platformTypes.NON_SUPPORTED;b=b?b:this._browserTypes.NON_SUPPORTED;e=e?e:this._browserTypes.NON_SUPPORTED;this._platform=a;this._browserType=b;this._browserVer=c?c:0;this._browserCode=e;this._deviceType=d?d:0},getVersion:function(){return this._browserVer},getDocumentMode:function(){return window.document.documentMode},
isIE:function(){return this._browserType==this._browserTypes.IE||this._browserType==this._browserTypes.AOL},isEdge:function(){return this._browserType==this._browserTypes.EDGE},isStrictType:function(a){var b=!1;this.isIE()&&(b=a?"CSS1Compat"==a.compatMode:"CSS1Compat"==document.compatMode);return b},isFF:function(){return this._browserType==this._browserTypes.FF},isSafari:function(){return this._browserType==this._browserTypes.SAFARI},isChrome:function(){return this._browserType==this._browserTypes.CHROME},
isOpera:function(){return this._browserType==this._browserTypes.OPERA},isMac:function(){return this._platform==this._platformTypes.MAC||this._platform==this._platformTypes.MAC_NEW||this._platform==this._platformTypes.MAC_YOSEMITE},isMobile:function(){var a=!1;if(this._deviceType==this._deviceTypes.MOBILE||this._deviceType==this._deviceTypes.TABLET)a=!0;return a},isiOS:function(){for(var a in this._platformTypes)if(this._platformTypes[a]==this._platform&&a.match(/mac|iphone|ipad|ipod/i))return!0;return!1},
isAndroid:function(){for(var a in this._platformTypes)if(this._platformTypes[a]==this._platform&&0<=a.indexOf("ANDROID"))return!0;return!1},isAndroidNative:function(){return this.isAndroid()&&this.isSafari()},isThirdPartyAllowed:function(){return!this.isSafari()||this.isMobile()},getEnvironment:function(){var a=navigator.userAgent||navigator.vendor||window.opera;if(EBG.adaptor.browser.isMobile()){if(EBG.adaptor.browser.isiOS()){var b=window.navigator&&window.navigator.standalone;return!a.match(/safari/i)&&
!b?EBG.WebEnvironment.IOS_WEB_VIEW:EBG.WebEnvironment.IOS_MOBILE_BROWSER}return EBG.adaptor.browser.isAndroid()?a.match(/version/i)?EBG.WebEnvironment.ANDROID_WEB_VIEW:EBG.adaptor.browser.isChrome()||EBG.adaptor.browser.isFF()?EBG.WebEnvironment.ANDROID_MOBILE_BROWESR:EBG.WebEnvironment.ANDROID_UNKNOWN:EBG.adaptor.browser.isIE()?EBG.WebEnvironment.OTHER_MOBILE_BROWSER:EBG.WebEnvironment.UNKNOWN}return EBG.WebEnvironment.BROWSER}};
EBG.Adaptors.FlashDetector=function(){this._init();this._customScript=!!window.ebAdCS};
EBG.Adaptors.FlashDetector.prototype={version:0,checkingBlock:!1,checkedBlock:!1,isBlocked:null,_flashPlayerVersion:null,_detectionPixelTimeout:null,_throttleTimeout:null,_detectionPixelTimeoutDuration:2E3,_init:function(){var a=-1;try{a=(new ActiveXObject("Shockwaveflash.Shockwaveflash.7")).GetVariable("$version"),a=this._splitFlashMajorMinorVersions(a),a=Number(a)}catch(b){}if(-1==a)try{var c=0,d=0,e=0;if(null!=navigator.plugins&&0<navigator.plugins.length){var f=navigator.mimeTypes;if(f&&f["application/x-shockwave-flash"]&&
f["application/x-shockwave-flash"].enabledPlugin&&f["application/x-shockwave-flash"].enabledPlugin.description){var g=f["application/x-shockwave-flash"].enabledPlugin.description.split(" "),h=g[2].split("."),c=h[0],d=h[1],e=g[3];""==e&&(e=g[4]);isNaN(e[0])&&(e=e.substring(1));0<e.indexOf("d")&&(e=e.substring(0,e.indexOf("d")))}a=Number(c+"."+d+e)}}catch(i){}if(!isNaN(a))this.version=a},_splitFlashMajorMinorVersions:function(a){if(a)return a=a.split(" ")[1].split(","),EBG.format("{0}.{1}{2}",a[0],
a[1],a[2])},_handlePixelMessage:function(a){clearTimeout(this._detectionPixelTimeout);this._detectionPixelTimeout=null;this.flashPlayerVersion=a;this.isBlocked=!1;EBG.runTimed(this,this._dispatchFlashDetected,[],10)},_handleDetectionPixelTimeout:function(a){var b=EBG.adaptor.browser.isFF()||EBG.adaptor.isPageVisible(),c=EBG.adaptor.hasHiddenParent(EBG.adaptor.getElementById("ebFlashDetection"));if(b&&a&&!c){this.checkedBlock=!0;this.checkingBlock=!1;a=EBG.adaptor.getDisplayWin();if(a.EBG&&a.EBG!=
EBG&&a.EBG.adaptor.flash&&EBG.isDefinedNotNull(a.EBG.adaptor.flash.flashPlayerVersion))this.flashPlayerVersion=a.EBG.adaptor.flash.flashPlayerVersion;this.isBlocked=!this.flashPlayerVersion;this._dispatchFlashDetected();clearTimeout(this._detectionPixelTimeout);this._detectionPixelTimeout=null}else clearTimeout(this._detectionPixelTimeout),this._detectionPixelTimeout=EBG.runTimed(this,this._handleDetectionPixelTimeout,[b],this._detectionPixelTimeoutDuration)},_dispatchFlashDetected:function(){this.checkedBlock=
!0;this.checkingBlock=!1;var a=new EBG.Events.Event(EBG.Events.EventNames.FLASH_DETECTED);a.dispatcher=this;a.eventData={isBlocked:this.isBlocked,versionStr:this.flashPlayerVersion,versionInt:this.version};EBG.eventMgr.dispatchEvent(a);EBG.adaptor.removeElement("ebFlashDetectionDiv")},_buildRenderPixelJson:function(){var a={play:"true",resId:"ebFlashDetection",resPath:ebBigS+"/Res/Assets/Pixel"+EBG.flashPixelVer+"/pixel.swf",unique:0,wmode:"opaque",tagName:EBG.Adaptors.TagNames.OBJECT,attributes:{id:"ebFlashDetection",
dir:"ltr",name:"ebFlashDetection",style:{position:"absolute",textAlign:"left",width:"1px",height:"1px"},codebase:EBG.format("{0}download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#",EBG.protocol),version:"9,0,0,0"},params:{play:"true",wmode:"opaque",menu:"false",flashVars:"id=ebFlashDetection",allowScriptAccess:"always",allowFullScreen:"true"}};this.isSupportShockwave()?(a.attributes.type="application/x-shockwave-flash",a.attributes.data=a.resPath):(a.attributes.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
a.params.movie=a.resPath);return a},_createScriptTag:function(){var a=EBG.format("function {0}(args)","DoFS_FlashDetectionPixel"),a=a+EBG.format("{ try{ if(!args||args=='null')args=''; return {0}(args);}catch(e){if(window.mmFSExceptionAlert)mmFSExceptionAlert('Command: '+command+'\\nargs: '+args.toString()+'\\n\\nexception in DoFS func:\\n'+e.message)}}","EBG.adaptor.flash._handlePixelMessage");return{tagName:EBG.Adaptors.TagNames.SCRIPT,text:a}},_handleThrottleEvent:function(a){a&&a.state&&(a.state==
EBG.ThrottleStates.THROTTLE||a.state==EBG.ThrottleStates.PAUSE?this._setThrottleState(a):a.state==EBG.ThrottleStates.RESUME?(clearTimeout(this._throttleTimeout),this._setThrottleState(a)):a.state==EBG.ThrottleStates.LOAD&&a.elemId&&a.id&&this._verifyThrottleDetectLocation(a))},_verifyThrottleDetectLocation:function(a){if(a.elemId&&a.id){var b=EBG.adaptor.getBoundingClientRect(EBG.adaptor.getElementById(a.elemId)),c=EBG.adaptor.getElementById(a.id),d=EBG.adaptor.getBoundingClientRect(c);if(b&&d&&EBG.isNumber(b.width)&&
EBG.isNumber(d.width))if(0==b.width||0==b.height)EBG.runTimed(this,this._verifyThrottleDetectLocation,[a],30);else{if(EBG.serializeObject(b)!=EBG.serializeObject(d)){var e=parseInt(c.style.marginTop,10),f=parseInt(c.style.marginLeft,10);c.style.marginTop=EBG.px(e-(d.top-b.top));c.style.marginLeft=EBG.px(f-(d.left-b.left));c.style.width=EBG.px(b.width);c.style.height=EBG.px(b.height)}this._customScript&&(b=(b=a.adUId&&EBG.ads[a.adUId])&&b._CCs&&b._CCs[a.elemId])&&EBG.RichFlashPanelCC&&b instanceof
EBG.RichFlashPanelCC&&EBG.runTimed(this,this._verifyThrottleDetectLocation,[a],250)}}},_setThrottleState:function(a){if(a.adUId){var b=new EBG.Events.Event(EBG.Events.EventNames.THROTTLED),c=a.adUId.split("_")[1];b.dispatcher={_adConfig:{rnd:c,uid:a.adUId}};b.eventData=a;EBG.eventMgr.dispatchEvent(b)}},removeThrottleDetectionSwf:function(a){EBG.adaptor.removeElement("ebFlashThrottleDetection_"+a)},isSupportShockwave:function(){var a=!0;if(EBG.adaptor.browser.isIE()&&11>EBG.adaptor.browser.getVersion()||
10<EBG.adaptor.browser.getVersion()&&9>EBG.adaptor.getDisplayWin().document.documentMode)a=!1;return a},doFlashBlockDetection:function(a){this.checkingBlock=!0;var b={tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:"ebFlashDetectionDiv",style:{width:"0px",height:"0px"}},children:[this._buildRenderPixelJson(),this._createScriptTag()]};EBG.adaptor.inInnerIframe()?EBG.adaptor.inject(b,EBG.Adaptors.InjectionMethod.INSERT_BEFORE,EBG.adaptor.serving.placementIframe):a&&EBG.adaptor.getElementById(a)&&EBG.adaptor.addInlineDOM(b,
a);this._detectionPixelTimeout=EBG.runTimed(this,this._handleDetectionPixelTimeout,[],this._detectionPixelTimeoutDuration)},getFlashVersionForBlockingDetection:function(){var a=0;try{if(!(document.documentMode||navigator.appName&&"Opera"==navigator.appName)){var b=navigator.mimeTypes;if(b&&b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.version){var c=b["application/x-shockwave-flash"].enabledPlugin.version,d=c.split(".");
if(18>d[0]||18==d[0]&&209>d[3])a=20}else if(b&&b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.filename&&(c=b["application/x-shockwave-flash"].enabledPlugin.filename,d=c.split(".")[0].split("_"),18>d[1]||18==d[1]&&209>d[4]))a=21}}catch(e){}return a}};EBG.declareNamespace("Interactions");
EBG.Interactions.SystemInts={CLICK:"_eyeblaster",AD_DURATION:"ebAdDuration",REPLAY:"ebReplay",CLOSE:"ebClose",CLOSE_REM:"ebRemClose",DEFAULT_CLICK:"ebDefaultClick",USER_INTERACTION:"ebUserInteraction",UNIQUE_VIDEO_STARTED:"ebUniqueVideoStarted",DWELL_TIME:"ebDwellTime",DWELL_UNIQUE:"ebUniqueDwell",RICH_FLASH_PLAYED:"ebRichFlashPlayed",INT_DURATION:"ebIntDuration",VISIBILITY_RECORDABLE:"VsR",VISIBILITY_AGENCY_RECORDABLE:"VsRAg",VISIBILITY_ADVERTISER_RECORDABLE:"VsRAd",VISIBILITY_ADVERTISER:"VsAd",
VISIBILITY_AGENCY:"VsAg",VISIBILITY_IAB:"VsIAB",VISIBILITY_ADVERTISER_DURATION:"VsAdDu",VISIBILITY_AGENCY_DURATION:"VsAgDu",VISIBILITY_AVG_AD_SURFACE:"VsAvSu",VISIBILITY_AVG_SCREEN_SHARE:"VsAvSc",REM_DURATION:"ebRemDuration",INTRO_FULL_PLAY:"ebFullPlay",REM_FULL_PLAY:"ebRemFullPlay",SWIPE:"ebSwipe",AD_START:"AdStart",AD_STACKING:"AdStacking",MULTI_BURN:"MultiBurn",AD_COLLISION:"AdCollision",AD_CAROUSEL:"AdCarousel",AD_PARAMS:"AdParams",PLAYER_PARAMS:"plparams",VER_URL:"verURL"};
if(!ebO.ffs.CFF_RemoveVideoInteractionOrder)EBG.Interactions.VideoInteractionOrder=[EBG.VideoInteraction.STARTED,EBG.VideoInteraction.PERCENT_25_PLAYED,EBG.VideoInteraction.PERCENT_50_PLAYED,EBG.VideoInteraction.PERCENT_75_PLAYED,EBG.VideoInteraction.FULLPLAY];EBG.Interactions.Categories={SYSTEM:2,VIDEO:1,CUSTOM:0};EBG.Interactions.InitiationTypes={AUTO:"auto",USER:"user"};EBG.Interactions.InteractionTypes={COUNTER:"Counter",TIMER:"Timer"};
EBG.Interactions.checkURL=function(a){var b=a.toLowerCase();-1==b.indexOf("http://")&&-1==b.indexOf("https://")&&-1==b.indexOf("ftp://")&&-1==b.indexOf("aim:")&&-1==b.indexOf("mailto:")&&-1==b.indexOf("fb://")&&(a=0==b.indexOf("/")?"http://"+EBG.adaptor.getHostName()+a:"http://"+a);return a};EBG.Interactions.RemoteServersData=function(){};EBG.Interactions.RemoteServersData.prototype={networkUrl:null,agencyUrl:null};EBG.declareClass(EBG.Interactions.RemoteServersData,null);
EBG.Interactions.InteractionData=function(a,b,c){this.reportingName=a;this.adUId=b;this.category=c};EBG.Interactions.InteractionData.prototype={initiationType:EBG.Interactions.InitiationTypes.AUTO,category:EBG.Interactions.Categories.SYSTEM,isPanel:!1};EBG.declareClass(EBG.Interactions.InteractionData,null);EBG.Interactions.CounterInteractionData=function(a,b,c){EBG.callSuperConstructor(EBG.Interactions.CounterInteractionData,this,[a,c,b]);this.remoteServers=new EBG.Interactions.RemoteServersData};
EBG.Interactions.CounterInteractionData.prototype={reportImmediately:!1,countAsClick:!1,remoteServers:null,clickURL:null,numLeftToReport:10,state:null};EBG.declareClass(EBG.Interactions.CounterInteractionData,EBG.Interactions.InteractionData);EBG.Interactions.TimerInteractionData=function(a,b,c){this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.TimerInteractionData,this,[a,c,b])};EBG.Interactions.TimerInteractionData.prototype={value:0,startTime:0,idleDuration:0};
EBG.declareClass(EBG.Interactions.TimerInteractionData,EBG.Interactions.InteractionData);EBG.Interactions.AggregationInteractionData=function(a,b,c){this.reportingName=a;EBG.callSuperConstructor(EBG.Interactions.AggregationInteractionData,this,[a,c,b])};EBG.Interactions.AggregationInteractionData.prototype={value:0,isPlaying:!1};EBG.declareClass(EBG.Interactions.AggregationInteractionData,EBG.Interactions.InteractionData);EBG.declareNamespace("Utilities.InteractionUtil");
EBG.Utilities.InteractionUtil=function(){};
EBG.Utilities.InteractionUtil.prototype={getBannerRedirectUrl:function(a){if(!a||!a.adConfig)return"";var b=a.adConfig.protocol+EBG.combinePaths(a.adConfig.bsPath,EBG.format("{0}/adServer.bs?cn=brd&Page={1}&PluID={2}&Pos={3}&EyeblasterID={4}",a.adConfig.interactionServer,a.adConfig.page,a.adConfig.pluId,a.adConfig.rnd,a.adConfig.adId));EBGInfra.isDefinedNotNull(a.clickVal)&&(b+="&clk="+a.clickVal);!a.adConfig.isPreview&&!a.isClickTag&&(b+="&sct=1");if(a.adConfig.massVersioning){if(a.adConfig.massVersioning.adVersions||a.adConfig.massVersioning.defaultAdVersion)a.sClickedVersion?
b+="&vid="+a.sClickedVersion+"&vcl=1":a.versionToReport&&(b+="&vid="+a.versionToReport);a.adConfig.massVersioning.targetAudienceId&&(b+="&ta="+a.adConfig.massVersioning.targetAudienceId);a.adConfig.massVersioning.deliveryGroupId&&(b+="&dg="+a.adConfig.massVersioning.deliveryGroupId);a.adConfig.massVersioning.versionTargetAudienceId&&(b+="&tav="+a.adConfig.massVersioning.versionTargetAudienceId);a.adConfig.massVersioning.dgTargetAudienceId&&(b+="&tadg="+a.adConfig.massVersioning.dgTargetAudienceId);
a.adConfig.massVersioning.originalDeliveryGroupId&&(b+="&dgo="+a.adConfig.massVersioning.originalDeliveryGroupId)}a.sJumpUrl&&(b+="&rtu="+encodeURIComponent(a.sJumpUrl));a.cvurl&&(b+=EBG.format("&cvurl={0}",encodeURIComponent('"'+a.cvurl.split("|").join('","')+'"')));a.fIsDefClick=EBG.isBool(a.fIsDefClick)?a.fIsDefClick:!1;a.fIsDefClick||(b+="&di=0");EBGInfra.isDefinedNotNull(a.adConfig.sPublisherPlacementId)&&(b+="&pc="+a.adConfig.sPublisherPlacementId);EBGInfra.isDefinedNotNull(a.adConfig.sID)&&
(b+="&sessionid="+a.adConfig.sID);a.adConfig.usercookie&&(b+="&usercookie="+a.adConfig.usercookie);EBGInfra.isDefinedNotNull(a.adConfig.optOut)&&(b+="&OptOut="+a.adConfig.optOut);EBGInfra.isDefinedNotNull(a.adConfig.ncu)&&(b+="&ncu="+encodeURIComponent(a.adConfig.ncu));EBGInfra.isDefinedNotNull(a.adConfig.ebReferrer)&&(b+="&ebReferrer="+encodeURIComponent(a.adConfig.ebReferrer));EBGInfra.isDefinedNotNull(a.adConfig.lineId)&&(b+="&lineid="+encodeURIComponent(a.adConfig.lineId));EBGInfra.isDefinedNotNull(a.adConfig.diAppId)&&
(b+="&diappid="+a.adConfig.diAppId);return b}};EBG.declareClass(EBG.Utilities.InteractionUtil,null);EBG.InteractionUtil=EBG.InteractionUtil||new EBG.Utilities.InteractionUtil;EBG.Interactions.Interaction=function(){};
EBG.Interactions.Interaction.prototype={unique:1,_escapeInteractionName:function(a){a=a.toString();a=a.replace(/\~/ig,"_");a=a.replace(/\^/ig,"_");a=a.replace(/\|/ig,"_");return escape(a)},_buildReportFormat:function(a,b,c,d){d||(d=0);return EBG.format("{0}{2}{1}{3}{1}{4}{1}{5}{6}{7}{8}{9}",EBG.Interactions.InteractionManager.charIntDelimeter,EBG.Interactions.InteractionManager.charAdFieldsDelimeter,this._escapeInteractionName(this.interactionData.reportingName),c,d,a,this.unique,b,this.interactionData.category,
this.interactionData.isPanel?1:0)}};EBG.Interactions.CounterInteraction=function(a){EBG.callSuperConstructor(EBG.Interactions.CounterInteraction,this);this.interactionData=a?a:new EBG.Interactions.CounterInteractionData};
EBG.Interactions.CounterInteraction.prototype={type:EBG.Interactions.InteractionTypes.COUNTER,handle:function(a){var b=this.interactionData,c=b.counterJumpUrlData,d=c&&c.tmpData?c.tmpData.isClick:!1,e=c&&c.tmpData?c.tmpData.isProductClick:!1,f=!1,g=!0,h=!1,h="",i=(c&&c.tmpData?c.tmpData.clickUrl:null)||(c?c.jumpUrl:""),j=c&&c.tmpData&&c.tmpData.windowWasOpen?!0:!1,c=!j;this.interactionData.adConfig.ffs.CFF_openWindowParam&&(c=c&&this.interactionData.adConfig.openWindow);this.shouldReportInteraction()?
(this._handleRemoteServers(),b.counterJumpUrlData&&(g=i&&this._isEBClick()?!1:!0,f=i&&(d||this._isEBClick())?!0:!1,(h=d||this._isEBClick())?f?c&&this.handleBRDFlow():(d||e)&&this.reportThirdPartyUrls():c&&i&&(i=EBG.Interactions.checkURL(i),this._openOrRedirect(i))),h=g?this._getReportingData(a,f):""):!j&&i&&(i=EBG.Interactions.checkURL(i),this._openOrRedirect(i));return h},reportThirdPartyUrls:function(){var a=this.interactionData.reportingName.toLowerCase()==EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase(),
b=this.interactionData.counterJumpUrlData,c=[];if(b&&b.tmpData&&b.tmpData.isClick&&(c=this.interactionData.adConfig.clickTrackingUrls,a||this.interactionData.adConfig.showOnlyImage))for(a=0;a<this.interactionData.adConfig.defaultClickTrackingUrls.length;a++)c[c.length]=this.interactionData.adConfig.defaultClickTrackingUrls[a];if(b&&b.tmpData&&b.tmpData.isProductClick&&b.tmpData.clickedVerUrl)c[c.length]=b.tmpData.clickedVerUrl;for(a=0;a<c.length;a++)EBG.adaptor.reportToRemoteServerUsingImage(c[a])},
shouldReportInteraction:function(){var a=!0;0==this.interactionData.numLeftToReport||EBG.isPreview||EBG.isInWorkshop?a=!1:this.interactionData.numLeftToReport--;return a},handleBRDFlow:function(){var a=this.interactionData,b=this.interactionData.counterJumpUrlData,c=EBGInfra.isDefinedNotNull(b)&&b.tmpData?b.tmpData.clickUrl:null,d=c||EBGInfra.isDefinedNotNull(b)&&b.jumpUrl;this._isEBClick()&&(c||(d=""));a=a.reportingName.toLowerCase()==EBG.Interactions.SystemInts.DEFAULT_CLICK.toLowerCase();c=0;b.tmpData.isClick?
c=1:b.tmpData.isProductClick&&(c=2);d=""==d?"":EBG.Interactions.checkURL(d);d=this._getBannerRedirectUrl(d,c,a,b.tmpData.clickedVersion);d=EBG.Interactions.checkURL(d);this._openOrRedirect(d)},_openOrRedirect:function(a){-1==this.interactionData.counterJumpUrlData.target.indexOf(EBG.WindowTarget.BLANK)?(this.interactionData.reportImmediately=!0,EBG.runTimed(this,this._openPage,[a,this.interactionData.counterJumpUrlData],1E3)):this._openPage(a,this.interactionData.counterJumpUrlData)},getClickTagUrl:function(a){var b=
"",a=EBG.isDefined(a)&&""!=a?EBG.Interactions.checkURL(a):void 0;EBG.isPreview?EBG.isInWorkshop?b=EBG.format("ReportPage_{0}.html",HTMLPageVer):(b=this.interactionData.counterJumpUrlData.jumpUrl,4<=b.length&&"http"!=b.substr(0,4)&&(b=EBG.format("{0}{1}",ebPtcl,b))):(b=this._getBannerRedirectUrl(a,null,null,null,!0),b=EBG.format("{0}/ReportPage{1}.html?ebReportURL={2}$$ebImpressionID={3}",ebBigS,EBG.reportPageVer,escape(b),EBG.Ads.Ad.Fn.getRandFromAdUId(this.interactionData.adConfig.uid)),a=-1,EBG.adaptor.browser.isIE()&&
(a=9<=EBG.adaptor.browser.getVersion()?4096:2048,a-=b.length),a=this._getReportPageTrackingUrls(a),b+=a);return b},_getReportPageTrackingUrls:function(a){var b="$$ebTURLs=[";if(-1!=a){if(b.length>=a)return"";a-=b.length}for(var c=this.interactionData.adConfig.clickTrackingUrls,d=0;d<c.length;d++){var e=EBG.format('{0}"{1}"',0!=d?",":"",c[d]);if(-1!=a){if(e.length>=a)break;a-=e.length}b+=e}return b+"]"},_openPage:function(a,b){var c=b.tmpData.clickedVerUrl?encodeURIComponent('"'+b.tmpData.clickedVerUrl.split("|").join('","')+
'"'):"",d=b.tmpData.clickedVerUrl&&!EBG.isPreview&&!EBG.isInWorkshop?a+"&cvurl="+c:a;switch(EBG.adaptor.getRequestMethod(d)){case "GET":EBG.adaptor.openPage(d,b);break;case "POST":var e=b.target;if(!(EBG.adaptor.browser.isIE()&&9>=EBG.adaptor.browser.getVersion()))b.target=!b.target||b.target==EBG.WindowTarget.BLANK?"ebReportPage"+parseInt(1E8*Math.random()):b.target,EBG.adaptor.openPage("",b);EBG.runTimed(this,function(){function c(a,b){var d=document.createElement("input");d.setAttribute("type",
"hidden");d.setAttribute("name",a);d.setAttribute("value",b);return d}var g=document.createElement("form");g.setAttribute("method","post");g.setAttribute("action",a.substring(0,d.indexOf("?"))+"?cn=brd&ebReferrer="+encodeURIComponent(this.interactionData.adConfig.ebReferrer));g.setAttribute("target",b.target);b.target=e;var h=this._urlQueryStringToJSON(d),i;for(i in h)g.appendChild(c(i,unescape(h[i])));EBG.adaptor.getDisplayWin().document.body.appendChild(g);g.submit()},[],25);break;default:EBG.adaptor.openPage(d,
b)}},_urlQueryStringToJSON:function(a){var b={},c=a.substring(a.indexOf("?")+1);if(!c)return b;for(var a=[],d=0,e=0;e<c.length;e++)switch(c.charAt(e)){case "&":a.push(c.substring(d,e));d=e+1;break;case "$":if("="==c.charAt(e-1)&&"$"==c.charAt(e+1))for(e+=2;!("$"==c.charAt(e)&&"$"==c.charAt(e-1));)e++}a.push(c.substring(d));for(e=0;e<a.length;e++)c=a[e],b[c.substring(0,c.indexOf("="))]=c.substring(c.indexOf("=")+1);return b},_getReportScript:function(a,b){return'<script type="text/javascript">var clkURLs = ["'+
a.join('","')+'"];var reported = false;var cntr = 0; for (var i=0;i<'+a.length+';i++){var img = document.createElement("img");img.onload = img.onerror = function(){cntr++; if (cntr=='+a.length+' && !reported){reported = true; window.location.replace("'+b+'");}};try{img.src = clkURLs[i];}catch(e){cntr++; if (cntr=='+a.length+' && !reported){reported = true; window.location.replace("'+b+'");}}}setTimeout(function(){if (!reported){reported=true;window.location.replace("'+b+'");}}, 1000);<\/script><body></body>'},
_getReportingData:function(a,b){var c=0,d=0;b||(c=this.interactionData.counterJumpUrlData&&this.interactionData.counterJumpUrlData.tmpData.isClick?1:0,d=this.interactionData.initiationType==EBG.Interactions.InitiationTypes.USER?1:0);var e=this.interactionData.value?this.interactionData.value:0;if(EBG.isObj(e)&&this.interactionData.useInteractionsStrPipe){if(this.interactionData.reportingName==EBG.Interactions.SystemInts.AD_PARAMS)e.idx=this.interactionData.numToReport-this.interactionData.numLeftToReport;
e=EBG.serializeObject(e)}c=this._buildReportFormat(c,d,e,a);this.unique=0;return c},_getBannerRedirectUrl:function(a,b,c,d,e){var f=this.interactionData.adConfig,g;if(f.massVersioning&&(f.massVersioning.adVersions||f.massVersioning.defaultAdVersion))g=d?d:EBG.Ads.Ad.Fn.getVersionToReport(f.massVersioning.adVersions);return EBG.InteractionUtil.getBannerRedirectUrl({adConfig:f,sJumpUrl:a,clickVal:b,fIsDefClick:c,sClickedVersion:d,isClickTag:e,versionToReport:g})},_handleRemoteServers:function(){if(!EBG.isPreview&&
this.interactionData.remoteServers){var a=this.interactionData.remoteServers,b=new EBG.Events.Event(EBG.Events.EventNames.INTERACTION_REPORT_REMOTE_SERVERS);b.dispatcher=this;b.timing=EBG.Events.EventTiming.BEFORE;b.eventData={remoteServers:a};EBG.eventMgr.dispatchEvent(b)||(a.networkUrl&&(b=this._replaceRSTokens(a.networkUrl),EBG.adaptor.reportToRemoteServerUsingImage(b)),a.agencyUrl&&(a=this._replaceRSTokens(a.agencyUrl),EBG.adaptor.reportToRemoteServerUsingImage(a)))}},_replaceRSTokens:function(a){try{a=
a.replace(/\[ebInteraction\]/ig,this.interactionData.reportingName),a=a.replace(/\[ebInteractionNum\]/ig,EBG.intMgr.adsData[this.interactionData.adConfig.uid].numOfInteractions)}catch(b){}return a},_getReportingPage:function(){var a=this.interactionData.adConfig.page,a=a.replace(/\~/ig,"_"),a=a.replace(/\^/ig,"_"),a=a.replace(/\|/ig,"_");return escape(a)},_isEBClick:function(){return this.interactionData&&(EBG.strEQ(this.interactionData.reportingName,EBG.Interactions.SystemInts.CLICK)||EBG.strEQ(this.interactionData.reportingName,
EBG.Interactions.SystemInts.DEFAULT_CLICK))}};EBG.declareClass(EBG.Interactions.CounterInteraction,EBG.Interactions.Interaction);EBG.Interactions.StdInteractionManager=function(){this.adsData=EBG.intMgr?EBG.intMgr.adsData:{};this.adsIntQueues=EBG.intMgr?EBG.intMgr.adsIntQueues:{}};
EBG.Interactions.StdInteractionManager.prototype={copy:function(a){this.adsIntQueues=a.adsIntQueues;this.adsData=a.adsData},initAdData:function(a,b){var c=a.uid;this.adsIntQueues[c]=this.adsIntQueues[c]?this.adsIntQueues[c]:[];c=this.adsData[c]={adConfig:a,isUserInteractionOccur:!1,isClickOccur:!1,isProductClicked:{},numOfInteractions:0,delayIntReport:b,videoState:{},assetsTimers:{},clickReportScript:""};c[EBG.Interactions.InteractionTypes.COUNTER]={};c[EBG.Interactions.InteractionTypes.TIMER]={};
c.adConfig.isStdAd||this._addSystemInteractions(a)},allowInteractionReport:function(a){if(this.adsData[a])this.adsData[a].delayIntReport=!1},addInteraction:function(a,b){var c=EBG.isDefinedNotNull(b)?b.toLowerCase():a.interactionData.reportingName.toLowerCase(),d=a.interactionData.adUId,e=new EBG.Events.Event(EBG.Events.EventNames.ADD_INTERACTION);e.eventData=a;e.dispatcher={_adConfig:{rnd:this.adsData[d].adConfig.rnd}};e.timing=EBG.Events.EventTiming.BEFORE;var f=EBG.eventMgr.dispatchEvent(e),g=
this.adsData[d];if(!f){if(!g)return;g[a.type][c]=a;a.interactionData.adConfig=this.adsData[d].adConfig}e.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(e)},getClickTag:function(a){return(a=this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a))?a.getClickTagUrl():""},getClickTarget:function(a){var b="_blank";if(!EBG.isPreview&&EBG.isInWorkshop&&(a=this._getCounterInteraction(EBG.Interactions.SystemInts.CLICK,a)))b=a.interactionData.counterJumpUrlData.target;return b},
handleCloseAdParts:function(a,b){if(a&&1==a.fClose){var c=new EBG.Events.Event(EBG.Events.EventNames.CLOSE_AD);c.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}};c.eventData={closeDueToClickthrough:!0};EBG.eventMgr.dispatchEvent(c)}},handleCounterInteraction:function(a,b,c,d,e,f){var g=this._getCounterInteraction(a,b),h=g?g.interactionData:null,i=h?h.counterJumpUrlData:null,j=this.adsData[b],m=j.adConfig.isStdAd,l="",f=EBGInfra.isDefined(f)?f:!0,c=c||0;if(!m&&h)h.initiationType=d?EBG.Interactions.InitiationTypes.USER:
h.initiationType,this._handleUserInteraction(b,h),this._handleSpecialInteractions(a,b,c);if(g&&(a=new EBG.Events.Event(EBG.Events.EventNames.HANDLE_COUNTER_INTERACTION),a.dispatcher={_adConfig:{rnd:EBG.Ads.Ad.Fn.getRandFromAdUId(b)}},a.timing=EBG.Events.EventTiming.BEFORE,a.eventData={interaction:g},!EBG.eventMgr.dispatchEvent(a))){if(i)i.tmpData=e,i.tmpData.isClick=h.countAsClick&&!j.isClickOccur,j.isClickOccur=i.tmpData.isClick?!0:j.isClickOccur,e=i.tmpData.clickedVersion,i.tmpData.isProductClick=
h.countAsClick&&i.tmpData.clickedVersion&&e&&!j.isProductClicked["V_"+e],i.tmpData.isProductClick&&(j.isProductClicked["V_"+e]=!0);else if(e&&e.value)g.interactionData.value=e.value;l=f?g.handle(c):"";j.numOfInteractions++;l&&(this._handleReportData(b,h,l),this._isReportDataInQueue(b,l)||this.reportInteractionQueues());this.handleCloseAdParts(i,b);a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}},isInteractionExist:function(a,b,c){if(this.adsData[c]&&this.adsData[c][b])return this.adsData[c][b][a]?
!0:!1},_getCounterInteraction:function(a,b){a=a.toLowerCase();if(this.adsData[b]&&this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER]&&this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a])return this.adsData[b][EBG.Interactions.InteractionTypes.COUNTER][a]},getRepScr:function(a){if(this.adsData[a]&&this.adsData[a].clickReportScript)return this.adsData[a].clickReportScript}};EBG.declareClass(EBG.Interactions.StdInteractionManager,null);
EBG.DataProfile={GENERAL:"general",SERVING:"serving",USERINFO:"userInfo",PLATFORM:"platform",FRAUD:"fraud",VISIBILITY:"visibility",ERROR:"error"};EBG.DataPipe=function(a,b){this._profile=this._buildProfile(b||this._defaultProfile);this._duration=0;this._firstTickDelay=5E3;this._serverPipeUrl=a;EBG.setInterval(this,function(){this._duration++},[],1E3);EBG.setInterval(this,function(){this._observedHandler()},[],100);b&&b.length&&EBG.runTimed(this,this._tick,[],this._firstTickDelay)};
EBG.DataPipe.prototype={_data:{general:{}},_observedObjects:[],_tickCount:0,_tickDelay:1,_maxTicks:1,_completeProfile:{general:{sid:!0,dur:!0,time:!1,adid:!1,frmt:!1},serving:{prtcl:!1,dmn:!1,url:!1,vurl:!1,srvmd:!1,aie:!1,imapp:!1},userInfo:{geo:!1,ip:!1},platform:{os:!1,osv:!1,ua:!1,brsrc:!1,brsrv:!1,brsrt:!1,flsv:!1,scrw:!1,scrh:!1,scrl:!1,fh:!1,fw:!1,env:!1,mraid:!1,mraidw:!1},fraud:{bot:!1,injct:!1,stack:!1},visibility:{vsbp:!1,pct:!1,scrsr:!1,loc:!1,vsr:!1,vsri:!1,uvsr:!1,vsiab:!1,uvsiab:!1},
error:{errnum:!1,errmsg:!1,errfunc:!1,errpos:!1}},_defaultProfile:{general:{adid:!1,sid:!0,dur:!0}},_buildProfile:function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=EBG.cloneObj(this._completeProfile[a[c]]);EBG.mergeObj(this._defaultProfile,b,!1);return b},_clear:function(){for(var a in this._profile){var b=this._profile[a],c=void 0;for(c in b)!this._profile[a][c]&&this._data[a]&&(this._data[a][c]=null,delete this._data[a][c])}},_post:function(){var a={x:function(){if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;
for(var a=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],c,d=0;d<a.length;d++)try{c=new ActiveXObject(a[d]);break}catch(e){}return c},post:function(b,c,d,e){try{var f=a.x();f.open("POST",b,e);f.onreadystatechange=function(){4==f.readyState&&d&&d(f.responseText)};f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.send(JSON.stringify(c))}catch(g){}}};return a.post}(),_tick:function(){++this._tickCount;this.flush();this._tickCount<
this._maxTicks&&(EBG.runTimed(this,this._tick,[],1E3*Math.pow(2,this._tickDelay)),this._tickDelay++)},send:function(a,b,c){c=c||{};if(this._profile[a]){this._data[a]=this._data[a]||{};for(var d in b)d in this._profile[a]&&(this._data[a][d]=b[d]);if(c.constant)for(d in this._data[a])this._profile[a][d]=!0;c.flush&&this.flush()}},flush:function(){this._data.general.dur=this._duration;var a={},b;for(b in this._data)for(var c in this._data[b])a[c]=this._data[b][c];this._post(this._serverPipeUrl,a);this._clear()},
watch:function(a,b,c,d,e){if(this._profile[a]&&c){var f=this;Object.observe?Object.observe(c,function(g){for(var h=0;h<g.length;h++)if(g[h].name===d){var i={};i[b]=c[d].toString();f.send(a,i,e)}}):this._observedObjects.push({ns:a,key:b,value:c[d],obj:c,prop:d,options:e})}},_observedHandler:function(){for(var a=0;a<this._observedObjects.length;a++){var b=this._observedObjects[a];if(b.obj[b.prop]!==b.value){b.value=b.obj[b.prop];var c={};c[key]=b.obj[b.prop].toString();this.send(ns,c,b.options)}}}};
EBG.DataPipeManager=function(a,b){this._default=b;this._dpUrl=a};EBG.DataPipeManager.prototype={_pipes:{},createPipe:function(a,b){var c=new EBG.DataPipe(this._dpUrl,b||this._default);c.send(EBG.DataProfile.GENERAL,{sid:a});this._pipes[a]=c},getPipe:function(a){this._pipes[a]||this.createPipe(a);return this._pipes[a]},send:function(a,b,c,d){(a=this._pipes[a])&&a.send(b,c,d)}};EBG.declareNamespace("AdChoice");
EBG.AdChoice.AdChoiceManager=function(a){this._adConfig=a;this._active=a.adChoice.includeMarker;this._iconAdded=!1};EBG.AdChoice.AdChoiceManager.ImageData=function(){this.iconSrc="";this.id=""};
EBG.AdChoice.AdChoiceManager.IabIconData={en:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/uk/"},"de-at":{icon:"OBA_AUSTRIA.png",url:"http://www.youronlinechoices.com/at/"},"fr-be":{icon:"OBA_BELGIUM_FR.png",url:"http://www.youronlinechoices.com/be-fr/"},"nl-be":{icon:"OBA_BELGIUM_NL.png",url:"http://www.youronlinechoices.com/be-nl/"},bg:{icon:"OBA_BULGARIA.png",url:"http://www.youronlinechoices.com/bg/"},cs:{icon:"OBA_CZECH.png",url:"http://www.youronlinechoices.com/cs/"},da:{icon:"OBA_DENMARK.png",
url:"http://www.youronlinechoices.com/den/"},fi:{icon:"OBA_FINLAND.png",url:"http://www.youronlinechoices.com/fi/"},fr:{icon:"OBA_FRANCE.png",url:"http://www.youronlinechoices.com/fr/"},de:{icon:"OBA_GERMANY.png",url:"http://www.youronlinechoices.com/de/"},el:{icon:"OBA_GREEK.png",url:"http://www.youronlinechoices.com/gr/"},hu:{icon:"OBA_HUNGARY.png",url:"http://www.youronlinechoices.com/hu/"},"en-ie":{icon:"OBA_IRELAND.png",url:"http://www.youronlinechoices.com/ie/"},it:{icon:"OBA_ITALY.png",url:"http://www.youronlinechoices.com/it/"},
nl:{icon:"OBA_NETHERLANDS.png",url:"http://www.youronlinechoices.com/nl/"},no:{icon:"OBA_NORWAY.png",url:"http://www.youronlinechoices.com/nor/"},pl:{icon:"OBA_POLAND.png",url:"http://www.youronlinechoices.com/pl/"},ro:{icon:"OBA_ROMANIA.png",url:"http://www.youronlinechoices.com/ro/"},sl:{icon:"OBA_SLOVAKIA.png",url:"http://www.youronlinechoices.com/sl/"},es:{icon:"OBA_SPAIN.png",url:"http://www.youronlinechoices.com/es/"},sv:{icon:"OBA_SWEDEN.png",url:"http://www.youronlinechoices.com/se/"},"de-ch":{icon:"OBA_SWITZERLAND_DE.png",
url:"http://www.youronlinechoices.com/ch-de/"},"fr-ch":{icon:"OBA_SWITZERLAND_FR.png",url:"http://www.youronlinechoices.com/ch-fr/"},"it-ch":{icon:"OBA_SWITZERLAND_IT.png",url:"http://www.youronlinechoices.com/ch-it/"},"en-gb":{icon:"OBA_UK.png",url:"http://www.youronlinechoices.com/uk/"},hr:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/hr/"},is:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/is/"},lt:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/lt/"},
lv:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/lv/"},pt:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/pt/"},sk:{icon:"OBA_DEFAULT.png",url:"http://www.youronlinechoices.com/sk/"}};EBG.AdChoice.AdChoiceManager.NaiIconData={en:{icon:"OBA_DEFAULT.png",url:"http://www.aboutads.info/consumers"}};EBG.AdChoice.AdChoiceManager.IabClosedIconName="OBA.png";EBG.AdChoice.AdChoiceManager.NaiClosedIconName="OBA.png";
EBG.AdChoice.AdChoiceManager.VisibilityState={HIDDEN:"hidden",VISIBLE:"visible"};EBG.AdChoice.AdChoiceManager.Position={ABSOLUTE:"absolute",RELATIVE:"relative"};EBG.AdChoice.AdChoiceManager.ImageLoadTimeout=100;EBG.AdChoice.AdChoiceManager.DefaultOffset=-1E3;
EBG.AdChoice.AdChoiceManager.prototype={_imgData:null,_imgExpData:null,_iconLocalData:null,_acCloseIconName:null,_spanId:null,_iconsBaseUrl:null,_containerId:null,_assetObjId:null,init:function(){if(this._active){this._iconsBaseUrl=this._getIconsDir(this._adConfig.adChoice.iconPosition);var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_CREATIVES,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);
a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ADD_BANNER_DEFAULT_FLASH_CREATIVE,this._handleAdChoice,this);a.timing=EBG.Events.EventTiming.AFTER;a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(a);EBG.eventMgr.subscribeToEvent(new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_RESIZE,
this._pageResizeHandler,this));this._adConfig.adChoice.certificationProgram==EBG.AcCertProgram.NAI_US?(this._iconLocalData=this._getIconDataByLanguage(EBG.AdChoice.AdChoiceManager.NaiIconData),this._acCloseIconName=EBG.AdChoice.AdChoiceManager.NaiClosedIconName):(this._iconLocalData=this._getIconDataByLanguage(EBG.AdChoice.AdChoiceManager.IabIconData),this._acCloseIconName=EBG.AdChoice.AdChoiceManager.IabClosedIconName)}},_handleAdChoice:function(a){if(a.eventData&&!a.eventData.isPanel)this._assetObjId=
a.eventData.assetId;if(this._iconAdded){var a=EBG.adaptor.getElementById(this._containerId),b=EBG.adaptor.getElementById(this._spanId);EBG.adaptor.removeElement(b);EBG.adaptor.appendChildElement(a.id,b)}else this._iconAdded=!0,this._containerId=this._adConfig.placeHolderId,this._imgData=this._getImageData(),this._imgExpData=this._getExpImageData(),this._addAdChoiceIcons(this._imgData,this._imgExpData,this._getAdChoiceUrl()),this._subscribeIconToEvents(this._imgData.id,this._imgExpData.id)},_getImageData:function(){var a=
new EBG.AdChoice.AdChoiceManager.ImageData;a.iconSrc=this._iconsBaseUrl+this._acCloseIconName;a.id="acImage_"+this._adConfig.uid;return a},_getExpImageData:function(){var a=new EBG.AdChoice.AdChoiceManager.ImageData;a.iconSrc=this._iconsBaseUrl+this._iconLocalData.icon;a.id="acExpImage_"+this._adConfig.uid;return a},_getAdChoiceUrl:function(){var a="";return a=this._adConfig.adChoice.customUrl?unescape(this._adConfig.adChoice.customUrl):this._iconLocalData.url},_getIconDataByLanguage:function(a){var b=
EBG.adaptor.getBrowserLanguage().toLowerCase(),c=a[b];c||(b=b.split("-")[0],c=a[b]);c||(c=a.en);return c},_getIconOffsets:function(a,b,c,d,e,f){var g={offsetLeft:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),offsetTop:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)};if(this._assetObjId&&(adPos=EBG.adaptor.getPositioningById(this._assetObjId,!0,this._adConfig.actualServingMode))){if(!e||!f)var h=EBG.adaptor.getElementById(this._assetObjId),h=EBG.adaptor.getBoundingClientRect(h),e=e?e:h.width,
f=f?f:h.height;acPos=EBG.adaptor.getPositioningById(a,!0,this._adConfig.actualServingMode);h=EBG.adaptor.getStyleOfElem(EBG.adaptor.getElementById(a));a=parseInt(h.left)+adPos.X-acPos.X;h=parseInt(h.top)+adPos.Y-acPos.Y;switch(b){case EBG.AcIconPosition.BottomLeft:g.offsetLeft=EBG.px(a);g.offsetTop=EBG.px(h+f-d);break;case EBG.AcIconPosition.BottomRight:g.offsetLeft=EBG.px(a+e-c);g.offsetTop=EBG.px(h+f-d);break;case EBG.AcIconPosition.TopLeft:g.offsetLeft=EBG.px(a);g.offsetTop=EBG.px(h);break;case EBG.AcIconPosition.TopRight:g.offsetLeft=
EBG.px(a+e-c),g.offsetTop=EBG.px(h)}}return g},_getIconsDir:function(a){var b=this._adConfig.imagesDir+"/AdChoice/";switch(a){case EBG.AcIconPosition.BottomLeft:b+="BottomLeft/";break;case EBG.AcIconPosition.BottomRight:b+="BottomRight/";break;case EBG.AcIconPosition.TopLeft:b+="TopLeft/";break;case EBG.AcIconPosition.TopRight:b+="TopRight/"}return b},_addAdChoiceIcons:function(a,b,c){var d="acImgLinkWrapper_"+this._adConfig.uid;this._spanId="acSpan_"+this._adConfig.uid;var e=EBG.adaptor.getElementById(this._containerId);
if(e&&(c={tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:this._spanId,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,zIndex:EBG.adaptor.getMaxZIndex(e)+1}},children:[{tagName:EBG.Adaptors.TagNames.A,attributes:{id:d,target:"_blank",onClick:EBG.format("EBG.adaptor.openPage('{0}');",c),mmskipreplace:1},children:null}]},this._containerId==this._adConfig.placeHolderId?EBG.adaptor.inject(c,EBG.Adaptors.InjectionMethod.APPEND,e):EBG.adaptor.inject(c,EBG.Adaptors.InjectionMethod.INSERT_BEFORE,
e),d=EBG.adaptor.getElementById(d))){e={tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:a.id,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,visibility:EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE,left:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),top:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)}},children:null};EBG.adaptor.inject(e,EBG.Adaptors.InjectionMethod.APPEND,d);e={tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:b.id,style:{position:EBG.AdChoice.AdChoiceManager.Position.ABSOLUTE,
visibility:EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN,left:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset),top:EBG.px(EBG.AdChoice.AdChoiceManager.DefaultOffset)}},children:null};EBG.adaptor.inject(e,EBG.Adaptors.InjectionMethod.APPEND,d);var d=EBG.adaptor.getElementById(a.id),e=EBG.adaptor.getElementById(b.id),f=this,g=function(){EBG.runTimed(f,f._handleImgOnloadEvent,[a.id,0],EBG.AdChoice.AdChoiceManager.ImageLoadTimeout)},c=function(){EBG.runTimed(f,f._handleImgOnloadEvent,[b.id,0],
EBG.AdChoice.AdChoiceManager.ImageLoadTimeout)};if(d)g=new EBG.Events.EventSubscription("load",g,this),g.isElementEvent=!0,g.elementId=a.id,EBG.eventMgr.subscribeToEvent(g),d.src=a.iconSrc;if(e)g=new EBG.Events.EventSubscription("load",c,this),g.isElementEvent=!0,g.elementId=b.id,EBG.eventMgr.subscribeToEvent(g),e.src=b.iconSrc}},_subscribeIconToEvents:function(a,b){var c=this,d=function(){c._handleMouseOverEvent(a,b)},e=new EBG.Events.EventSubscription("mouseover",d,this);e.isElementEvent=!0;e.elementId=
a;EBG.eventMgr.subscribeToEvent(e);e=new EBG.Events.EventSubscription("mouseout",d,this);e.isElementEvent=!0;e.elementId=b;EBG.eventMgr.subscribeToEvent(e)},_handleMouseOverEvent:function(a,b){var c=EBG.adaptor.getElementById(a),d=EBG.adaptor.getElementById(b),e=EBG.adaptor.getStyleOfElem(c),f=EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE,g=EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN;if(e.visibility==EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE)f=EBG.AdChoice.AdChoiceManager.VisibilityState.HIDDEN,
g=EBG.AdChoice.AdChoiceManager.VisibilityState.VISIBLE;e={visibility:g};EBG.adaptor.setStyleToElem(c,{visibility:f});EBG.adaptor.setStyleToElem(d,e)},_pageResizeHandler:function(){this._handleImgOnloadEvent(this._imgData.id,0);this._handleImgOnloadEvent(this._imgExpData.id,0)},_handleImgOnloadEvent:function(a,b){var c=EBG.adaptor.getElementById(a);imgPos=this._getIconOffsets(a,this._adConfig.adChoice.iconPosition,c.width,c.height,this._adConfig.width,this._adConfig.height);EBGInfra.isDefinedNotNull(b)&&
10>b?EBG.runTimed(this,this._rehandleImgOnloadEvent,[a,b],EBG.AdChoice.AdChoiceManager.ImageLoadTimeout):EBG.adaptor.setStyleToElem(c,{left:imgPos.offsetLeft,top:imgPos.offsetTop})},_rehandleImgOnloadEvent:function(a,b){this._handleImgOnloadEvent(a,b+1)}};EBG.declareNamespace("Ads");
EBG.Ads.Ad=function(a){this._adConfig=a;this._adConfig.isStdAd=this._isStdAd();this.startTime=(new Date).getTime()/1E3;this._fixPage();this._updateURLs();this._subscribeEventTriggeringURLs();EBG.ads[a.uid]=this;this._show();this.placeHolderElement?this._handleMultiBurn():this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._handleMultiBurn,EBG.Events.EventTiming.ONTIME);this._dpm=EBG.dataPipeMgr.getPipe(this._adConfig.sID);this._sendInitAdInformation()};
EBG.Ads.Ad.prototype={resizePlaceHolder:!0,checkingThrottle:!1,_throttleState:null,_adConfig:null,_adChoice:null,_cdiReason:0,_showOnlyDefaultImg:!1,_banner:{divId:"",resId:"",width:0,height:0},_hasDefaultImageInteraction:!1,_isStdAd:function(){return!0},_subscribeEventTriggeringURLs:function(){if(this._adConfig.eventTrackingURLs){this._adConfig.eventTrackingURLs=this._eventTrackingURLsAdapter(this._adConfig.eventTrackingURLs);for(var a in this._adConfig.eventTrackingURLs)this._subscribeToAdEvent(a,
this._handleEventTrackingURLs,EBG.Events.EventTiming.ONTIME)}},_eventTrackingURLsAdapter:function(a){function b(b){c.ebVideoInteraction=c.ebVideoInteraction||[];c.ebVideoInteraction.push({filter:{"eventData.intName":b},urls:a[d]})}var c={},d;for(d in a)switch(d){case "vidStart":b(EBG.VideoInteraction.STARTED);break;case "vid25Played":b(EBG.VideoInteraction.PERCENT_25_PLAYED);break;case "vid50Played":b(EBG.VideoInteraction.PERCENT_50_PLAYED);break;case "vid75Played":b(EBG.VideoInteraction.PERCENT_75_PLAYED);
break;case "vidFullyPlayed":b(EBG.VideoInteraction.FULLPLAY)}return c},_handleEventTrackingURLs:function(a){for(var b=this._adConfig.eventTrackingURLs[a.name],c=0;c<b.length;c++){var d=b[c];if(d.filter)for(var e in d.filter)EBG.valueFromPath(a,e)==d.filter[e]&&this._reportImpressionTrackingURLs(d.urls);else this._reportImpressionTrackingURLs(d.urls)}},_counterInteractionHandler:function(a){try{var b=a.eventData.intName;if(!b)b=EBG.Interactions.SystemInts.CLICK;a.eventData.clickUrl=this._replaceURLTokens(a.eventData.clickUrl);
a.eventData.clickedVerUrl=this._replaceURLTokens(a.eventData.clickedVerUrl);EBG.intMgr.handleCounterInteraction(b,this._adConfig.uid,0,null,a.eventData,"undefined"!=typeof a.eventData.handleClickInt?a.eventData.handleClickInt:!0)}catch(c){}},_versionTrackingImpressionHandler:function(a){try{a.eventData.impTrackingUrls&&this._reportImpressionTrackingURLs(a.eventData.impTrackingUrls)}catch(b){}},_reportImpressionTrackingURLs:function(a){if(!EBG.isPreview)for(var b=0;b<a.length;b++){var c=a[b];c&&(c=
this._replaceURLTokens(c),EBG.adaptor.reportToRemoteServerUsingImage(c))}},_show:function(){this._cdiReason=this._adConfig.showAieDefaultImage?4:this._cdiReason;var a=!this._canShow()||this._adConfig.showOnlyImage||this._adConfig.showAieDefaultImage;this._adConfig.defaultImageDisplayed=!(!a||!this._adConfig.defaultImagePath);var b=this._adConfig.showOnlyImage;this._adConfig.ffs.CFF_VerifyPlaceHolderEarlier&&this._verifyPlaceHolder();var c=new EBG.Events.Event(EBG.Events.EventNames.SHOW_AD);c.dispatcher=
this;c.timing=EBG.Events.EventTiming.BEFORE;c.eventData={isDefaultImage:this._adConfig.defaultImageDisplayed};EBG.eventMgr.dispatchEvent(c);b!==this._adConfig.showOnlyImage&&(a=!this._canShow()||this._adConfig.showOnlyImage||this._adConfig.showAieDefaultImage);this._subscribeToEvents();EBG.intMgr.initAdData(this._adConfig,this._adConfig.reportDelayedImpression?!0:!1);this._addSystemInteractions();this._adConfig.ffs.CFF_VerifyPlaceHolderEarlier||this._verifyPlaceHolder();if(EBG.AdChoice&&EBG.AdChoice.AdChoiceManager)this._adChoice=
new EBG.AdChoice.AdChoiceManager(this._adConfig),this._adChoice.init();(b=EBG.adaptor.getElementById(this._adConfig.placeHolderId))&&this.resizePlaceHolder&&"undefined"!=typeof this._adConfig.display&&EBG.adaptor.setElemStyle(b,"display",this._adConfig.display);if(a)if(this._adConfig.defaultImagePath){if(!this._adConfig.imageOnly)a=new EBG.Events.Event(EBG.Events.EventNames.DEFAULT_IMPRESSION),a.eventData={impTrackingUrls:this._adConfig.defaultImpTrackingUrls},a.dispatcher=this,a.timing=EBG.Events.EventTiming.ONTIME,
EBG.eventMgr.dispatchEvent(a);this._subscribeToAdEvent(EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE,this._terminateShow,EBG.Events.EventTiming.AFTER);this._showOnlyDefaultImg=!0;this.checkAndShowDefaultImage(this.showDefaultImage)}else this._reportImpression(!0);else this._showOnlyDefaultImg=!1,this._addVideoInteractions(),this._addCustomInteractions(),this._adConfig.useHtmlConvertor&&this._subscribeToAdEvent(EBG.Events.EventNames.ADD_CREATIVES,this._terminateShow,EBG.Events.EventTiming.AFTER),
this._addCreatives(),this._adConfig.useHtmlConvertor||this._terminateShow()},_terminateShow:function(a){var b=this.placeHolderElement=EBG.adaptor.getElementById(this._adConfig.placeHolderId);b&&this.resizePlaceHolder&&(EBG.adaptor.setElemStyle(b,"width",EBG.px(this._adConfig.width)),EBG.adaptor.setElemStyle(b,"height",EBG.px(this._adConfig.height)),EBG.adaptor.setElemStyle(b,"margin","0px auto"));b=new EBG.Events.Event(EBG.Events.EventNames.SHOW_AD);b.dispatcher=this;b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;
b.eventData={isDefaultImage:a?!0:!1};EBG.eventMgr.dispatchEvent(b)},_verifyPlaceHolder:function(){!EBG.adaptor.getElementById(this._adConfig.placeHolderId)&&!document.body&&document.write('<img style="width:0;height:0"></img>');return EBG.adaptor.getElementById(this._adConfig.placeHolderId)},_canShow:function(){return!0},_onPlayHandler:function(){this._adConfig.arrOnPlayEvents&&this._executeEvents(this._adConfig.arrOnPlayEvents)},_onDownloadHandler:function(){this._adConfig.arrOnStartDnlEvents&&this._executeEvents(this._adConfig.arrOnStartDnlEvents)},
_collectUrl:function(){if(!EBG.isPreview&&this._adConfig.shouldCollectUrl)try{EBG.adaptor.reportToRemoteServer(EBG.format("{0}{1}/BurstingPipe/adServer.bs?cn=curl&ai={2}&url=$${3}$$",EBG.protocol,EBG.bs,this._adConfig.adId,top.document.URL))}catch(a){}},_executeEvents:function(a){for(var b,c,d=0;d<a.length;d++)switch(c=this._replaceURLTokens(a[d].url),a[d].typeId){case 3:b="ebPlayScript"+d;EBG.adaptor.writeScript(EBG.adaptor.generateElementId(b,this._adConfig.uid),c,this._adConfig.placeHolderId);
break;case 5:b="ebDnlScript"+d;EBG.adaptor.writeScript(EBG.adaptor.generateElementId(b,this._adConfig.uid),c,this._adConfig.placeHolderId);break;case 4:b="ebPlayIFR"+d;EBG.adaptor.writeReportingIFrame(EBG.adaptor.generateElementId(b,this._adConfig.uid),c,this._adConfig.placeHolderId);break;case 6:b="ebDnlIFR"+d,EBG.adaptor.writeReportingIFrame(EBG.adaptor.generateElementId(b,this._adConfig.uid),c,this._adConfig.placeHolderId)}},_addSystemInteractions:function(){try{var a=this._adConfig.interactions[EBG.Interactions.SystemInts.CLICK];
if(a){var b=EBG.Interactions.Categories.SYSTEM;this._adConfig.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK]?this._hasDefaultImageInteraction=!0:this._adConfig.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK]=EBG.cloneObj(a);this._addCounterInteraction(EBG.Interactions.SystemInts.CLICK,b);this._addCounterInteraction(EBG.Interactions.SystemInts.DEFAULT_CLICK,b)}if((!EBG.Ads.StdBanner||!(this instanceof EBG.Ads.StdBanner))&&(!EBG.Ads.WallpaperAd||!(this instanceof EBG.Ads.WallpaperAd)))this._addCounterInteraction(EBG.Interactions.SystemInts.AD_START,
b,!0,1),this._addCounterInteraction(EBG.Interactions.SystemInts.AD_STACKING,b,!1,1),this._addCounterInteraction(EBG.Interactions.SystemInts.MULTI_BURN,b,!1,1),this._addCounterInteraction(EBG.Interactions.SystemInts.AD_COLLISION,b,!1,1),this._addCounterInteraction(EBG.Interactions.SystemInts.AD_CAROUSEL,b,!1,1),this._adConfig.adParamsEnabled&&this._addCounterInteraction(EBG.Interactions.SystemInts.AD_PARAMS,b,!1,5,null,null,!0),this._adConfig.verUrlEnabled&&this._addCounterInteraction(EBG.Interactions.SystemInts.VER_URL,
b,!1,1,null,null,!0)}catch(c){}},_addCounterInteraction:function(a,b,c){var d=this._adConfig.interactions[a],b=new EBG.Interactions.CounterInteractionData(a,b,this._adConfig.uid);b.initiationType=d.nInitiated?EBG.Interactions.InitiationTypes.USER:EBG.Interactions.InitiationTypes.AUTO;b.countAsClick=d.fClick;if(d.agencyURL)b.remoteServers.agencyUrl=d.agencyURL;if(d.networkURL)b.remoteServers.networkUrl=d.networkURL;this._adjustClickTarget(a);b.counterJumpUrlData=d;b.reportImmediately=c?!0:!1;a=new EBG.Interactions.CounterInteraction(b);
EBG.intMgr.addInteraction(a)},_addVideoInteractions:function(){},_addCustomInteractions:function(){},_adjustClickTarget:function(a){var a=this._adConfig.interactions[a],b;switch(a.target){case 0:b=EBG.WindowTarget.SELF;break;case 2:b=EBG.WindowTarget.TOP;break;default:b=EBG.WindowTarget.BLANK}a.target=b},_subscribeToEvents:function(){this._adConfig.interactionsToReport&&this._subscribeToAdEvent(EBG.Events.EventNames.ADD_INTERACTION,this._handleInteractionsSubscription,EBG.Events.EventTiming.BEFORE);
this._subscribeToAdEvent(EBG.EBMessage.CLICKTHROUGH,this._counterInteractionHandler);this._subscribeToAdEvent(EBG.EBMessage.VERSION_TRACKING_IMPRESSION,this._versionTrackingImpressionHandler);this._subscribeToAdEvent(EBG.Events.EventNames.DEFAULT_IMPRESSION,this._versionTrackingImpressionHandler,EBG.Events.EventTiming.ONTIME);this._subscribeToAdEvent(EBG.Events.EventNames.DEFAULT_CLICK,this._counterInteractionHandler);this._subscribeToAdEvent(EBG.Events.EventNames.ADD_CREATIVES,this._onAddCreativesHandler,
EBG.Events.EventTiming.ONTIME);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._onDownloadHandler,EBG.Events.EventTiming.ONTIME);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._onPlayHandler,EBG.Events.EventTiming.AFTER);this._subscribeToAdEvent(EBG.Events.EventNames.SHOW_AD,this._collectUrl,EBG.Events.EventTiming.AFTER);this._adConfig.adParamsEnabled&&this._subscribeToAdEvent(EBG.Events.EventNames.AD_START,this._reportAdParams,EBG.Events.EventTiming.AFTER);this._subscribeToAdEvent(EBG.EBMessage.NOTIFY_INTERACTION_MONITOR,
this._notifyInteractionManager);var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.ELEMENT_LOADED,function(a){a.eventData.adUId==this._adConfig.uid&&this._triggerAdStart()},this);a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a);this._subscribeToAdEvent(EBG.Events.EventNames.THROTTLED,this._handleCreativeThrottled)},_handleInteractionsSubscription:function(a){try{var b=a.eventData.interactionData.reportingName;return this._adConfig.interactionsToReport&&this._adConfig.interactionsToReport[b]?
!0:!1}catch(c){}},_onAddCreativesHandler:function(a){this._adConfig.ffs.CFF_FlashThrottle&&(!a||!a.eventData||!(a.eventData.creativeType&&a.eventData.creativeType==EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE))&&this._checkForCreativeThrottling();try{if(!EBG.Initializer._getAdClass({tn:this._adConfig.templateName}).requiresIframeBust||this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.SCRIPT){var b=a.dispatcher._adConfig.placeHolderId;if(b){var c=(this._adConfig.displayWin||EBG.adaptor.getDisplayWin()).document.getElementById(b);
if(c)c.style.backgroundImage="",c.onclick=function(){}}}}catch(d){}},_checkForCreativeThrottling:function(){for(cc in this._CCs)this._CCs.hasOwnProperty(cc)&&this._CCs[cc].detectThrottling&&(this._CCs[cc].detectThrottling(),this._subscribeToAdEvent(EBG.Events.EventNames.MOUSE_OVER,this._stopPollingForThrottle,EBG.Events.EventTiming.ONTIME))},_stopPollingForThrottle:function(a){var b=!0;if(a&&a.eventData&&a.eventData.target&&a.eventData.target.children){for(var c in this._CCs)this._CCs.hasOwnProperty(c)&&
(a.eventData.target.children[c]&&this._CCs[c].stopPollingForThrottle&&this._CCs[c].stopPollingForThrottle(),this._CCs[c].isPollingForThrottle&&!0==this._CCs[c].isPollingForThrottle&&(b=!1));if(b)a=new EBG.Events.EventSubscription(EBG.Events.EventNames.MOUSE_OVER,this._stopPollingForThrottle,this),a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd},a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a)}},_onAdCreativesAdded:function(){var a=new EBG.Events.Event(EBG.Events.EventNames.AD_CREATIVES_ADDED);
a.dispatcher=this;EBG.eventMgr.dispatchEvent(a)},_fixPage:function(){var a=this._adConfig.page,a=a.replace(/\~/ig,"_"),a=a.replace(/\^/ig,"_"),a=a.replace(/\|/ig,"_"),a=escape(a);this._adConfig.page=a},_updateURLs:function(){for(var a=this._adConfig.clickTrackingUrls,b=0;b<a.length;b++)a[b]=this._replaceURLTokens(a[b]);var a=this._adConfig.interactions,c;for(c in a)if(a.hasOwnProperty(c))a[c].agencyURL=this._replaceURLTokens(a[c].agencyURL),a[c].networkURL=this._replaceURLTokens(a[c].networkURL),
a[c].jumpUrl=this._replaceURLTokens(a[c].jumpUrl)},_handleMultiBurn:function(){this._reportMultiBurn(this._checkMultiBurn())},_checkMultiBurn:function(){var a={isAdCarousel:!1,isAdCollision:!1,isMultiBurn:!1},b=this._adConfig.advertiserId,c=this._adConfig.placementId,d=this._adConfig.uid;try{var e=EBG.getTopAccessibleWindow(!1);e.ebAds=e.ebAds||{};for(var f in e.ebAds){var g=e.ebAds[f];if(d!=g._adConfig.uid&&g.placeHolderElement){if(!g.removed)try{if(0==g.placeHolderElement.getClientRects().length)g.removed=
!0}catch(h){g.removed=!0}if(g.removed){var i=(new Date).getTime()/1E3-g.startTime;if(!a.isAdCarousel&&10<i&&150>i)a.isAdCarousel=!0}else if(!a.isMultiBurn&&c===g._adConfig.placementId)a.isMultiBurn=!0;else if(!a.isMultiBurn&&!a.isAdCollision&&b&&b===g._adConfig.advertiserId)a.isAdCollision=!0}}}catch(j){}return a},_reportMultiBurn:function(a){a.isMultiBurn?EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.MULTI_BURN,this._adConfig.uid):a.isAdCollision&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_COLLISION,
this._adConfig.uid);a.isAdCarousel&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_CAROUSEL,this._adConfig.uid)},_reportAdParams:function(){if(EBG.intMgr.isInteractionExist(EBG.Interactions.SystemInts.AD_PARAMS.toLowerCase(),EBG.Interactions.InteractionTypes.COUNTER,this._adConfig.uid))if(EBG.adaptor.isPageLoaded()){if(this._adConfig.adParamsEnabled){var a=this._getServingModeNum(),b=this._getBannerLocation(),b=b&&b.X+"x"+b.Y,c=!this.visibilityMgr?0:this.visibilityMgr.getVisibilityProviderNum(),
d=this._adConfig.width+"x"+this._adConfig.height,e=this._getAdCodeBase(),f=EBG.adaptor.browser.getEnvironment();EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_PARAMS,this._adConfig.uid,0,!1,{value:{ifr:a,loc:b,vsbp:c,size:d,cb:e,env:f}})}}else this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_LOAD,this._reportAdParams)},_getBannerLocation:function(a){if(a&&EBG.isNumber(a.X)&&EBG.isNumber(a.Y)&&this._adConfig.actualServingMode&&this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME)for(var b=
EBG.adaptor.getDisplayWin();b!==b.parent&&b.self!==b.parent;){var c=EBG.adaptor.getPositioningByElement(b.frameElement);a.X+=c.X;a.Y+=c.Y;b=b.parent}return a},_getAdCodeBase:function(a){a=EBG.isDefined(a)?a:0;this._showOnlyDefaultImg&&(a=0);1==a&&this._adConfig.hasConverter&&this._adConfig.useHtmlConvertor&&(a=3);return a},_getServingModeNum:function(){var a={SCRIPT:0,FRIENDLY_IFRAME:1,IFRAME:2,INNER_IFRAME:3,TOPMOST_FRIENDLY_IFRAME:4};if(!EBG.adaptor.serving)return-1;var b=EBG.adaptor.serving.detectServingEnvironment(this._adConfig.actualServingMode);
return EBG.isDefined(a[b])?a[b]:-1},_getTemplateNameNum:function(){return{Html5StdBanner:0,Html5Banner:1,Html5SEBanner:2,Html5ExpBanner:3,Html5PoliteBanner:4,StdBanner:5,Banner:6,SingleExpBanner:7,ExpBanner:8,Visibility:9,FloatingAd:10,FloatingAdWithReminder:11,Tracking:12}[this._adConfig.templateName]||-1},getAdId:function(){return this._adConfig.adId},_replaceURLTokens:function(a){var b=this._adConfig;try{a&&(a=a.replace(/\[%random%\]/ig,b.rnd),a=a.replace(/\[ebRandom\]/ig,b.rnd),a=a.replace(/\[timestamp\]/ig,
b.rnd),a=a.replace(/\[%tp_adid%\]/ig,b.adId),a=a.replace(/\[%tp_flightid%\]/ig,b.placementId),a=a.replace(/\[%tp_campaignid%\]/ig,b.campaignId));if(!a||!b.sUrlTokens)return a;if(!EBG.isObj(b.objURLTokens))b.oURLTokens=this._pairsToObj(b.sUrlTokens,"$$");for(var c in b.oURLTokens)b.oURLTokens.hasOwnProperty(c)&&(a=a.replace(RegExp("\\[%"+c+"%\\]","ig"),b.oURLTokens[c]))}catch(d){}return a},_pairsToObj:function(a,b){for(var c={},d=unescape(a).split(b),e=0;e<d.length;e++)try{if(d[e]){var f=d[e].indexOf("="),
g=d[e].substr(0,f),h=d[e].substr(f+1);c[g]=escape(h)}}catch(i){}return c},_subscribeToAdEvent:function(a,b,c){a=new EBG.Events.EventSubscription(a,b,this);a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};if(c)a.timing=c;EBG.eventMgr.subscribeToEvent(a);return a},_getCDIUrl:function(a){var b=a&&a.defaultImagePath?a.defaultImagePath:null,b=EBG.format("{0}{1}/{2}/adServer.bs?cn=cdi&ai={3}&p={4}&pluid={5}&ru={6}&pc={7}&brt={8}&pltype={9}&sessionid={10}&dir={11}&ord={12}",EBG.protocol,EBG.bs,this._adConfig.interactionServer,
this._adConfig.adId,this._adConfig.page,this._adConfig.pluId,EBG.isDefinedNotNull(b)&&""!=b?b:EBG.combinePaths(this._adConfig.resourcePath,this._adConfig.defaultImagePath),this._adConfig.sPublisherPlacementId,EBG.adaptor.browser._browserCode,EBG.adaptor.browser._platform,this._adConfig.sID,this._cdiReason,this._adConfig.rnd),c=this._adConfig.massVersioning.targetAudienceId;c&&(b+=EBG.format("&ta={0}",c));(c=this._adConfig.massVersioning.deliveryGroupId)&&(b+=EBG.format("&dg={0}",c));a&&a.versionId?
b+=EBG.format("&vid={0}",a.versionId):this._adConfig.massVersioning.adVersions&&(a=this._removePrefixFromVersions(),b+=EBG.format("&vid={0}",a));EBGInfra.isDefinedNotNull(this._adConfig.diAppId)&&(b+="&diappid="+this._adConfig.diAppId);return b},_removePrefixFromVersions:function(){var a="",b=this._adConfig.massVersioning.adVersions;if(b){for(var a=[],b=b.split(","),c=0;c<b.length;c++){var d=b[c].indexOf("_");a.push(-1==d?b[c]:b[c].substring(0,d))}a=a.join()}return a},buildJSONImgObj:function(a,b){var c=
EBG.format(a+"_{0}",this._adConfig.uid);return{tagName:EBG.Adaptors.TagNames.IMG,attributes:{id:c,src:b,width:this._adConfig.width,height:this._adConfig.height,style:{width:this._adConfig.width,height:this._adConfig.height},title:this._adConfig.title?this._adConfig.title:"",onload:EBG.format('(function(e) { var event = new EBG.Events.Event(EBG.Events.EventNames.ELEMENT_LOADED);event.dispatcher = this;event.eventData = { DOMEvent: e, elementId: "{0}", adUId:"{1}" };event.timing = EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(event);} )(typeof arguments != "undefined" ? arguments[0] : null);',
c,this._adConfig.uid)}}},setImageClick:function(a,b,c,d,e){a.attributes.onclick=EBG.format('EBG.ads["'+this._adConfig.uid+'"].onImageClick("{0}", {1},"{2}", "{3}", "{4}", "{5}")',this._adConfig.uid,b,a.attributes.id,c,d,e);EBG.mergeObj({cursor:"pointer; cursor: hand"},a.attributes.style)},_addDefaultImgRequest:function(){this.checkAndShowDefaultImage(this.showDefaultImage)},checkAndShowDefaultImage:function(a){var b="",c=".xml",d=!0;if(EBG.isDefinedNotNull(this._adConfig.svJSON)||EBG.isDefinedNotNull(this._adConfig.sv3CatalogMap)||
this._adConfig.massVersioning.versionFullPath)c=".json",d=!1;if(EBG.isDefinedNotNull(this._adConfig.massVersioning)&&""!=this._adConfig.massVersioning.defaultAdVersion&&""!=this._adConfig.massVersioning.adBasePath){b=this._adConfig.massVersioning.defaultAdVersion;b=0<this._adConfig.massVersioning.massVersionFolderDivider?EBG.Ads.Ad.Fn.fixMVPathString(b,this._adConfig.massVersioning.massVersionFolderDivider):b;if(this._adConfig.massVersioning.versionFullPath)b=b.p;b=EBG.combinePaths(this._adConfig.massVersioning.adBasePath,
b+c);b=this._adConfig.massVersioning.versionFullPath?EBG.combinePaths("//"+this._adConfig.sHost,b):EBG.combinePaths(this._adConfig.resourcePath,b)}c=d?this._readMassVersionInfo:this._readJsonVersionInfo;(!b||!EBG.adaptor.getDataFromRemoteServer(b,c,this,!0,d))&&a.apply(this)},subscribeToStandardElementEvents:function(){},showDefaultImage:function(a){var b=!this._adConfig.imageOnly||this._hasDefaultImageInteraction,c="";this._adConfig.showOnlyImage||this._adConfig.imageOnly||this._adConfig.reportDelayedImpression?
c=a&&a.isValid?a.defaultImagePath:EBG.combinePaths(this._adConfig.resourcePath,this._adConfig.defaultImagePath):(c=a&&a.isValid?this._getCDIUrl(a):this._getCDIUrl(),this._adConfig.massVersioning.adVersions="");var c=this.buildJSONImgObj("ebDefaultImg",c),d=a&&a.isValid&&a.jumpUrl?a.jumpUrl:b?this._adConfig.interactions[EBG.Interactions.SystemInts.DEFAULT_CLICK].jumpUrl:this._adConfig.interactions[EBG.Interactions.SystemInts.CLICK].jumpUrl;d&&this.setImageClick(c,b,d,a&&a.isValid?a.selectedVersion:
"",a&&a.isValid?a.thirdPartyClks:"");a&&a.thirdPartyImps&&a.thirdPartyImps.length&&this._reportImpressionTrackingURLs(a.thirdPartyImps);a=new EBG.Events.Event(EBG.Events.EventNames.ADD_CREATIVES);a.dispatcher=this;a.eventData={tagsObj:c,assetId:c.attributes.id,isPanel:!1,creativeType:EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE};a.timing=EBG.Events.EventTiming.BEFORE;d=EBG.eventMgr.dispatchEvent(a);if(!d&&(b=new EBG.Events.Event(EBG.Events.EventNames.ADD_BANNER_DEFAULT_IMAGE_CREATIVE),
b.eventData={assetId:c.attributes.id},b.dispatcher=this,b.timing=EBG.Events.EventTiming.BEFORE,d=EBG.eventMgr.dispatchEvent(b),!d)){var d=EBG.adaptor._getTags(c),e=EBG.adaptor.getElementById(this._adConfig.placeHolderId);EBG.adaptor.setInnerHtml(e,d);this._defaultImgResId=c.attributes.id;this.subscribeToStandardElementEvents(this._defaultImgResId);b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b);a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}},
_triggerAdStart:function(a){if(!(this._shouldWaitForTriggerAdStart()&&!(EBGInfra.isDefined(a)&&a.name===EBG.EBMessage.TRIGGER_AD_START)||this._adConfig.adStarted))if(this._adConfig.adStarted=!0,a=new EBG.Events.Event(EBG.Events.EventNames.AD_START),a.eventData={intName:EBG.Interactions.SystemInts.Ad_START},a.dispatcher=this,a.timing=EBG.Events.EventTiming.BEFORE,!EBG.eventMgr.dispatchEvent(a))this._shouldFireAdStart()&&EBG.intMgr.handleCounterInteraction(EBG.Interactions.SystemInts.AD_START,this._adConfig.uid),
a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER,EBG.eventMgr.dispatchEvent(a)},_shouldFireAdStart:function(){var a=!1;if(this._adConfig.isInstream){if(this._adConfig.isInstreamVisibility||this._adConfig.isInstreamVerification)a=!0}else if(this._adConfig.displayVerification||this._adConfig.visibility.mode==EBG.VisibilityMode.BASIC_MODE||this._adConfig.visibility.mode==EBG.VisibilityMode.ENHANCED_MODE)a=!0;return a},_shouldWaitForTriggerAdStart:function(){return!1},_readJsonVersionInfo:function(a){var b=
JSON.parse(a),a=this._adConfig.massVersioning.defaultAdVersion.indexOf("_"),a={isValid:!!b.DefaultImage,jumpUrl:b.ClickthroughURL?b.ClickthroughURL:"",defaultImagePath:b.DefaultImage?b.DefaultImage:"",selectedVersion:-1==a?this._adConfig.massVersioning.defaultAdVersion:this._adConfig.massVersioning.defaultAdVersion.substring(0,a),thirdPartyImps:b.ThirdPartyImpressionURL?this._parseUrlValue(b.ThirdPartyImpressionURL):[],thirdPartyClks:b.ThirdPartyClickthroughURL?this._parseUrlValue(b.ThirdPartyClickthroughURL):
[],versionId:b.versionId?b.versionId:0};if(a.isValid&&EBG.isNumber(b.DefaultImage)){a.isValid=!1;var b=this._adConfig.assets,c="ebMovie"+a.defaultImagePath;if(EBG.isDefinedNotNull(b[c].dsPath))a.defaultImagePath=EBG.isInWorkshop?b[c].dsPath:EBG.combinePaths(this._adConfig.resourcePath,b[c].dsPath),a.isValid=!0}(this._showOnlyDefaultImg?this.showDefaultImage:this._showImgAsCreative).apply(this,[a])},_readMassVersionInfo:function(a){var b={isValid:!1,jumpUrl:"",defaultImagePath:"",selectedVersion:"",
thirdPartyImps:[],thirdPartyClks:[]};try{if(EBG.isDefined(a)&&null!=a){var c=a.documentElement.attributes.getNamedItem("productClickThrough"),d=a.documentElement.attributes.getNamedItem("DefaultImage"),e=a.documentElement.attributes.getNamedItem("ThirdPartyImps"),f=a.documentElement.attributes.getNamedItem("ThirdPartyClickThrough"),g=this._adConfig.massVersioning.defaultAdVersion.indexOf("_"),b={isValid:null!=d&&""!=d.value,jumpUrl:null!=c?c.value:"",defaultImagePath:null!=d?d.value:"",selectedVersion:-1==
g?this._adConfig.massVersioning.defaultAdVersion:this._adConfig.massVersioning.defaultAdVersion.substring(0,g),thirdPartyImps:e&&e.value?this._parseUrlValue(e.value):[],thirdPartyClks:f&&f.value?this._parseUrlValue(f.value):[]};if(b.isValid&&EBG.isNumber(b.defaultImagePath)){b.isValid=!1;var h=this._adConfig.assets,i="ebMovie"+b.defaultImagePath;if(EBG.isDefinedNotNull(h[i].dsPath))b.defaultImagePath=EBG.isInWorkshop?h[i].dsPath:EBG.combinePaths(this._adConfig.resourcePath,h[i].dsPath),b.isValid=
!0}}(this._showOnlyDefaultImg?this.showDefaultImage:this._showImgAsCreative).apply(this,[b])}catch(j){this.showDefaultImage(b)}},_parseUrlValue:function(a){for(var b=[],a=a.split("\u007f"),c=0;c<a.length;c++)for(var d=a[c].split("|"),e=0;e<d.length;e++)b.push(d[e]);return b},_sendInitAdInformation:function(){this._dpm.send(EBG.DataProfile.GENERAL,{frmt:this._getTemplateNameNum()});if(EBG.adaptor.browser.isMobile()){var a={};if(this._adConfig.ffs.CFF_DataPipeUserAgent)a.ua=window.navigator.userAgent;
if(this._adConfig.actualServingMode&&this._adConfig.actualServingMode==EBG.Adaptors.ServingMode.SCRIPT)a.scrl=~~(window.innerWidth>document.documentElement.clientWidth),a.fh=~~(window.innerHeight===this._adConfig.height),a.fw=~~(window.innerWidth===this._adConfig.width);0<Object.getOwnPropertyNames(a).length&&this._dpm.send(EBG.DataProfile.PLATFORM,a)}a=this._getServingModeNum();this._dpm.send(EBG.DataProfile.SERVING,{srvmd:a});this._adConfig.MRAID&&this._dpm.send(EBG.DataProfile.PLATFORM,{mraid:1});
"undefined"!=typeof mraid&&this._dpm.send(EBG.DataProfile.PLATFORM,{mraidw:1})},_switchAssetsAfterThrottle:function(){},_handleCreativeThrottled:function(a){if(this._adConfig.ffs.CFF_FlashThrottle&&a.eventData)if(a.eventData.state&&a.eventData.state==EBG.ThrottleStates.RESUME)clearTimeout(this._throttleTimeout),this._throttleState=EBG.ThrottleStates.RESUME;else if(a.eventData.state&&a.eventData.state==EBG.ThrottleStates.POLLED&&a.dispatcher._adConfig.uid==this._adConfig.uid)this._switchAssetsAfterThrottle(),
EBG.adaptor.flash.removeThrottleDetectionSwf(this._adConfig.uid);else if(this.visibilityMgr&&a.eventData.id){if(this.visibilityMgr.isVisibile()){var b=EBG.adaptor.getElementById(a.eventData.id),b=b&&EBG.adaptor.getBoundingClientRect(b);this._throttleState==EBG.ThrottleStates.THROTTLE&&(!b||0<b.width&&0<b.height)?(this._switchAssetsAfterThrottle(),EBG.adaptor.flash.removeThrottleDetectionSwf(this._adConfig.uid)):this._throttleTimeout=EBG.runTimed(this,this._handleCreativeThrottled,[a],1E3)}else this._subscribeToAdEvent(EBG.Events.EventNames.PAGE_SCROLL,
this._checkIfStillThrottled);this._throttleState=EBG.ThrottleStates.THROTTLE}},_checkIfStillThrottled:function(a){if(a){if(this.visibilityMgr&&!this._throttleTimeout&&this._throttleState==EBG.ThrottleStates.THROTTLE&&this.visibilityMgr.isVisibile())this._throttleTimeout=EBG.runTimed(this,this._checkIfStillThrottled,[],1E3)}else{if(this._throttleState==EBG.ThrottleStates.THROTTLE&&this.visibilityMgr&&this.visibilityMgr.isVisibile())this._switchAssetsAfterThrottle(),EBG.adaptor.flash.removeThrottleDetectionSwf(this._adConfig.uid),
a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_SCROLL,this._checkIfStillThrottled,this),a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd},a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a);clearTimeout(this._throttleTimeout);this._throttleTimeout=null;if(this._throttleState==EBG.ThrottleStates.RESUME)a=new EBG.Events.EventSubscription(EBG.Events.EventNames.PAGE_SCROLL,this._checkIfStillThrottled,this),a.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd},
a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.unsubscribeFromEvent(a)}},dispatchCustomEvent:function(a,b,c,d){a=new EBG.Events.Event(a);a.dispatcher=d;a.eventData={assetId:b};a.timing=c;return EBG.eventMgr.dispatchEvent(a)},_notifyInteractionManager:function(a){var b={};if(a&&a.eventData)b=a.eventData;b.elapsedTime="";if(EBG.intMgr.getAdDuration)b.elapsedTime=EBG.intMgr.getAdDuration(this._adConfig.uid);EBG.adaptor.notifyIntMonitor(a.eventData)},onImageClick:function(a,b,c,d,e,f){try{var g=
b?new EBG.Events.Event(EBG.Events.EventNames.DEFAULT_CLICK):new EBG.Events.Event(EBG.EBMessage.CLICKTHROUGH);g.eventData=b?{intName:EBG.Interactions.SystemInts.DEFAULT_CLICK}:{intName:EBG.Interactions.SystemInts.CLICK};if(EBG.isDefined(d))g.eventData.clickUrl=d;if(EBG.isDefined(e))g.eventData.clickedVersion=e;if(EBG.isDefined(f))g.eventData.clickedVerUrl=f;g.dispatcher=EBG.ads[a];EBG.eventMgr.dispatchEvent(g);if(EBG.adaptor.intMonitorExist()){var h=new EBG.Events.Event(EBG.EBMessage.NOTIFY_INTERACTION_MONITOR);
h.eventData={command:EBG.EBMessage.CLICKTHROUGH,args:"",objName:c,adId:EBG.Ads.Ad.Fn.getAdIdFromAdUId(a)};EBG.eventMgr.dispatchEvent(h)}}catch(i){}}};EBG.declareClass(EBG.Ads.Ad,null);
EBG.Ads.Ad.Fn={getAdIdFromAdUId:function(a){return a.split("_")[0]},getRandFromAdUId:function(a){return a.split("_")[1]},getVersionToReport:function(a){return-1<a.indexOf(",")?"m":-1<a.indexOf("_")?a.substr(0,a.indexOf("_")):a},getAdVersions:function(a){for(var b="",a=a.adVersions.split(","),c=0;c<a.length;c++)b&&(b+=","),b+=a[c];return b},fixMVPathString:function(a,b){if(0<b)for(var c=a.split(","),d="",e="",f,g,h,i=0;i<c.length;i++)h=c[i],f="",EBG.isDefinedNotNull(h.match("_"))&&(f=h.substr(h.indexOf("_"))),
h=parseInt(h),g=parseInt(h/b),h=g+f+"/"+h,d+=e+h,""==e&&(e=",");return d},_handlePageResizeOrScroll:function(){}};EBG.Ads.StdBanner=function(a){EBG.callSuperConstructor(EBG.Ads.StdBanner,this,[a])};EBG.Ads.StdBanner.requiresIframeBust=!1;
EBG.Ads.StdBanner.prototype={_flashResID:null,_CCs:{},_show:function(){EBG.callSuperFunction(EBG.Ads.StdBanner,this,"_show");this._adConfig.ffs.CFF_FlashBlockPixel&&this._shouldCheckIfFlashBlocked()&&EBG.adaptor.flash.doFlashBlockDetection(this._adConfig.placeHolderId)},_subscribeToEvents:function(){try{if(EBG.callSuperFunction(EBG.Ads.StdBanner,this,"_subscribeToEvents"),this._adConfig.ffs.CFF_FlashBlockPixel){var a=new EBG.Events.EventSubscription(EBG.Events.EventNames.FLASH_DETECTED,this._handleFlashDetected,
this);a.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(a)}}catch(b){}},_canShow:function(){var a=!1;if(this._adConfig.flashResPath)if(EBG.adaptor.flash.version>=this._adConfig.flashVer&&!EBG.adaptor.flash.isBlocked)a=!0;else if(this._adConfig.hasConverter&&this._adConfig.html5supported)a=this._adConfig.useHtmlConvertor=!0;else if(EBG.adaptor.flash.version<this._adConfig.flashVer)this._cdiReason=2;else{if(EBG.adaptor.flash.isBlocked)this._cdiReason=6}else this._adConfig.imageOnly=
!0;return a},_writeCreativeElements:function(){try{var a={resPath:this._adConfig.flashResPath,resId:this._flashResID,width:this._adConfig.width,height:this._adConfig.height,play:"true",wmode:this._adConfig.wmode?this._adConfig.wmode:"opaque"},b=EBG.adaptor.generateElementId("StdBannerDiv",this._adConfig.uid);this._banner.divId=b;var c={tagName:EBG.Adaptors.TagNames.DIV,attributes:{id:b,dir:"ltr",style:{width:this._adConfig.width,height:this._adConfig.height}},children:this._CCs[this._flashResID].buildCreativeContainerJson(a)};
if("undefined"!=typeof this._adConfig.display)c.attributes.style.display=this._adConfig.display;var d=new EBG.Events.Event(EBG.Events.EventNames.ADD_CREATIVES);d.dispatcher=this;d.eventData={tagsObj:c,assetId:this._flashResID,isPanel:!1,creativeType:EBG.Events.EventNames.ADD_BANNER_DEFAULT_FLASH_CREATIVE};d.timing=EBG.Events.EventTiming.BEFORE;if(!EBG.eventMgr.dispatchEvent(d))EBG.adaptor.addInlineDOM(c,this._adConfig.placeHolderId),this._CCs[this._flashResID].checkPlaying(),d.timing=EBG.Events.EventTiming.ONTIME,
EBG.eventMgr.dispatchEvent(d),d.timing=EBG.Events.EventTiming.AFTER,EBG.eventMgr.dispatchEvent(d)}catch(e){}},_addConvertorModules:function(){if(!EBG.Modules||!EBG.Modules.DelayedImpression)return EBG.adaptor.loadModule("DelayedImpression",this._adConfig,this._addConvertorModules,this);this.delayedImpressionModule=new EBG.Modules.DelayedImpression(this._adConfig);this._subscribeToAdEvent(EBG.Events.EventNames.CREATIVE_CONTAINER_READY,this._handleDelayedImpressionReport,EBG.Events.EventTiming.AFTER);
!EBG.Modules||!EBG.Modules.ConUtil?EBG.adaptor.loadModule("ConvertorUtil",this._adConfig,function(){this._writeCreativeElements();this._CCs[this._flashResID]._convertor.isReady()},this):(this._writeCreativeElements(),this._CCs[this._flashResID]._convertor.isReady())},_addCreatives:function(){this._flashResID=EBG.adaptor.generateElementId("StdBannerFlash",this._adConfig.uid);this._CCs[this._flashResID]=new EBG.FlashCC(this._adConfig);this._adConfig.useHtmlConvertor?this._addConvertorModules():this._writeCreativeElements()},
_shouldCheckIfFlashBlocked:function(){var a=!1;if((EBG.adaptor.browser.isFF()||EBG.adaptor.browser.isChrome()||EBG.adaptor.browser.isSafari())&&!EBG.adaptor.browser.isMobile())this._adConfig.flashResPath&&-1!=this._adConfig.flashResPath.indexOf(".swf")&&!EBG.adaptor.flash.checkedBlock&&!EBG.adaptor.flash.checkingBlock&&(a=!0);return a},_handleFlashDetected:function(a){a&&a.eventData&&a.eventData.isBlocked&&this._switchAssetsAfterThrottle()},_switchAssetsAfterThrottle:function(){if(this._adConfig.hasConverter&&
this._adConfig.html5supported)this._adConfig.useHtmlConvertor=!0;this._adConfig.useHtmlConvertor?(this._defaultImgResId&&EBG.adaptor.getElementById(this._defaultImgResId)?EBG.adaptor.removeElement(this._defaultImgResId):this._preloadImgResId&&EBG.adaptor.getElementById(this._preloadImgResId)?EBG.adaptor.removeElement(this._preloadImgResId):this._banner&&this._banner.divId&&EBG.adaptor.getElementById(this._banner.divId)&&EBG.adaptor.removeElement(this._banner.divId),this._addCreatives()):(this._cdiReason=
5,this.showDefaultImage())}};EBG.declareClass(EBG.Ads.StdBanner,EBG.Ads.Ad);EBG.declareNamespace("CreativeContainer");EBG.CreativeContainer=function(a){this._adConfig=a};EBG.declareClass(EBG.CreativeContainer,null);EBG.declareNamespace("FlashCC");EBG.FlashCC=function(a){EBG.callSuperConstructor(EBG.FlashCC,this,[a]);this.fs={};this.isPollingForThrottle=!1;this._addSupportedFSCommands()};
EBG.FlashCC.prototype={_convertor:null,_createIntMonitorObj:function(a,b){return this._convertor&&EBG.isObj(b)?this._convertor._createIntMonitorObj(a,b):{command:a,args:b,objName:this._flashResID,adId:this._adConfig.adId}},_buildAdditionalResStr:function(){var a="",b=this._adConfig.assets,c;for(c in b)try{var d=b[c],e=EBG.isInWorkshop?d.dsPath:EBG.combinePaths(this._adConfig.resourcePath,d.dsPath),a=EBG.format("{0}{1}{2}={3}",a,a?"&":"",c,e)}catch(f){}return a},_getSmartVersioningFlashVars:function(){var a=
"",b="",a="undefined"!=typeof this._adConfig.isSVSVP&&this._adConfig.isSVSVP,c=this._adConfig.massVersioning.adVersions&&this._adConfig.sv2DisplayMap;c&&(b=EBG.Ads.Ad.Fn.getAdVersions(this._adConfig.massVersioning),b=0<this._adConfig.massVersioning.massVersionFolderDivider?EBG.Ads.Ad.Fn.fixMVPathString(b,this._adConfig.massVersioning.massVersionFolderDivider):b,b=EBG.format("&ebAdVersions={0}&ebAdMap={1}&ebResPath={2}&ebAdSVBasePath={3}",b,this._adConfig.sv2DisplayMap,EBG.isInWorkshop?"":this._adConfig.resourcePath,
this._adConfig.massVersioning.adBasePath));if(this._adConfig.svXML&&(a||!c))a=EBG.isGlobalDef("ebAdXmlPath")&&ebAdXmlPath?ebAdXmlPath:EBG.isInWorkshop?this._adConfig.svXML:EBG.combinePaths(this._adConfig.resourcePath,this._adConfig.svXML),b+=EBG.format("&ebAdXML={0}",a);return b},_getFlashParams:function(){var a=EBG.adaptor.getHostName(),b=EBG.intMgr.getClickTag(this._adConfig.uid),c=EBG.intMgr.getClickTarget(this._adConfig.uid),d=EBG.adaptor.browser.isIE()?"":this._flashResID+"_DoFSCommand",e=EBG.format("ebDomain={0}&ebAdID={1}&clickTag={2}&clickTAG={2}&clicktag={2}&ebFSCmdHandler={3}&TemplateName={9}&clickTARGET={4}&ebFlashID={5}{6}&{7}{8}",
a,this._adConfig.adId,escape(b),d,c,this._flashResID,this._getSmartVersioningFlashVars(),this._buildAdditionalResStr(),this._getAdditionalClickTagParams(),this._adConfig.templateName);EBG.adaptor.browser.isChrome()&&21<=EBG.adaptor.browser.getVersion()&&!EBG.adaptor.browser.isMac()&&(e=EBG.format("ebDomain={0}&ebAdID={1}&clickTag={2}&clickTAG={2}&clicktag={2}&TemplateName={9}&clickTARGET={4}&ebFlashID={5}{6}&{7}{8}",a,this._adConfig.adId,escape(b),d,c,this._flashResID,this._getSmartVersioningFlashVars(),
this._buildAdditionalResStr(),this._getAdditionalClickTagParams(),this._adConfig.templateName));if(this._adConfig.additionalFlashVars)for(var f in this._adConfig.additionalFlashVars)this._adConfig.additionalFlashVars.hasOwnProperty(f)&&f&&(e+=EBG.format("&{0}={1}",f.toLowerCase(),this._adConfig.additionalFlashVars[f]));return e},_getAdditionalClickTagParams:function(){var a="",b=this._adConfig.interactions,c;for(c in b)try{if(/clicktag\d+/i.test(c)){var d=EBG.intMgr.adsData[this._adConfig.uid][EBG.Interactions.InteractionTypes.COUNTER][c.toLowerCase()],
e=d&&""!=d.interactionData.counterJumpUrlData.jumpUrl?d.getClickTagUrl(d.interactionData.counterJumpUrlData.jumpUrl):"";""!=e&&(a+=EBG.format("&{0}={1}",c,escape(e)))}}catch(f){}return a},_isPowerSaveExist:function(){return EBG.adaptor.browser.isSafari()&&6<=EBG.adaptor.browser.getVersion()&&EBG.adaptor.browser.isMac()},_handleThrottle:function(a){var a=a&&a[0].state?a[0].state:"polled",b=new EBG.Events.Event(EBG.Events.EventNames.THROTTLED);b.dispatcher=this;b.eventData={state:a};EBG.eventMgr.dispatchEvent(b)},
_detectThrottling:function(a){var b=EBG.adaptor.getElementById(this._flashResID);if(EBG.adaptor.browser.isChrome()&&b&&b.title&&"Adobe Flash Player"==b.title)this._handleThrottle();else if(this._isPowerSaveExist()&&b&&"function"!=typeof b.Play){var c=EBG.adaptor.browser.isFF()||EBG.adaptor.isPageVisible();a?this._handleThrottle():b.tagName==EBG.Adaptors.TagNames.OBJECT&&EBG.runTimed(this,this._detectThrottling,[c],1E3)}else b&&this.isPollingForThrottle&&EBG.runTimed(this,this._detectThrottling,[],
1E3)},detectThrottling:function(){if(!this._convertor&&!this.isPollingForThrottle)this.isPollingForThrottle=!0,EBG.runTimed(this,this._detectThrottling,[],1E3)},stopPollingForThrottle:function(){this.isPollingForThrottle=!1},buildCreativeContainerJson:function(a){var b,c,d=null;b=["transparent","opaque","window"];for(c=0;3>c;c++)b[b[c]]=b[c];this._flashResID=a.resId;this.isIMPanel&&0<a.unique&&(a.resPath+="?"+Math.random());this._src=a.resPath;this._weight=a.weight;var e=EBG.format("EBG.ads['{0}']._CCs['{1}']",
this._adConfig.uid,this._flashResID),d=EBG.format("function {0}_DoFSCommand(command,args)",this._flashResID),d=d+EBG.format("{ try{ if(!args||args=='null')args='';command = command.replace(/FSCommand:/ig,''); return "+(this.isIMPanel?"document.parentWindow.parent.":"")+"{0}._handleMessage(command,args,'{1}');}catch(e){if(window.mmFSExceptionAlert)mmFSExceptionAlert('Command: '+command+'\\nargs: '+args.toString()+'\\n\\nexception in DoFS func:\\n'+e.message)}}",e,this._flashResID);c={tagName:EBG.Adaptors.TagNames.SCRIPT,
text:d+"function ebIsFlashExtInterfaceExist(){return true;}"};var d=EBG.format("try{{0}_DoFSCommand(command,args);}catch(e){}",this._flashResID),d={tagName:EBG.Adaptors.TagNames.SCRIPT,attributes:{"for":this._flashResID,event:"FSCommand(command,args)"},text:d},f=this.getResPath(a.resPath),f=-1!=f.toLowerCase().indexOf("http://")||-1!=f.toLowerCase().indexOf("https://")||EBG.isInWorkshop&&-1!=f.toLowerCase().indexOf("file://")?f:EBG.combinePaths(this._adConfig.resourcePath,f),g=this._getFlashParams();
if(this._adConfig.useHtmlConvertor&&EBG.Modules.ConUtil)this.fs[EBG.EBMessage.REQ_INIT.toLowerCase()]={mapEvent:EBG.EBMessage.REQ_INIT},this._convertor=new EBG.Modules.ConUtil(this._adConfig),b=this._convertor.buildIframeObj(g,this._flashResID,a,e);else{b={tagName:EBG.Adaptors.TagNames.OBJECT,attributes:{id:this._flashResID,dir:"ltr",name:this._flashResID,style:{textAlign:"left",width:EBG.format("{0}px",a.width),height:EBG.format("{0}px",a.height)},codebase:EBG.format("{0}download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#",
EBG.protocol),version:EBG.format("{0},0,0,0",this._getFlashVersion()),title:this._adConfig.title?this._adConfig.title:""},params:{play:a.play,wmode:this.isIMPanel?"opaque":b[a.wmode],menu:"false",flashVars:this._getFlashParams(),allowScriptAccess:"always",allowFullScreen:"true"}};if(EBG.adaptor.browser.isChrome())b.attributes.style.width=b.attributes.style.height="0px",b.meta={isChromePowerSaver:!0,origWidth:EBG.px(a.width),origHeight:EBG.px(a.height)};this._isSupportShockwave()?(b.attributes.type=
"application/x-shockwave-flash",b.attributes.data=f):(b.attributes.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",b.params.movie=f);if(0<a.unique)return[b,d];if(this._shouldCheckForThrottling(a))return a=this._buildThrottleDetectJson(b,a),e=this._buildThrottleDetectScriptJson(),EBG.ads[this._adConfig.uid].checkingThrottle=!0,[b,c,d,a,e]}return[b,c,d]},_buildThrottleDetectJson:function(a,b){var c=EBG.cloneObj(a);c.attributes.id=c.attributes.name="ebFlashThrottleDetection_"+this._adConfig.uid;
c.attributes.style["z-index"]="-1";c.attributes.style.position="relative";c.attributes.style["margin-left"]=EBG.px(-b.width);c.attributes.version="11,2,0,0";c.attributes.title="";c.params.wmode="transparent";c.params.flashVars="id="+c.attributes.id+"&adUId="+this._adConfig.uid+"&elemId="+this._flashResID;c.attributes.data?c.attributes.data=ebBigS+"/Res/Assets/Pixel"+EBG.flashPixelVer+"/ebThrottleDetect.swf":c.params.movie=ebBigS+"/Res/Assets/Pixel"+EBG.flashPixelVer+"/ebThrottleDetect.swf";return c},
_buildThrottleDetectScriptJson:function(){var a=EBG.format("function {0}(args)","DoFS_ebFlashThrottleDetection_"+this._adConfig.uid),a=a+EBG.format("{ try{ if(!args||args=='null')args=''; return {0}(args);}catch(e){if(window.mmFSExceptionAlert)mmFSExceptionAlert('Command: '+command+'\\nargs: '+args.toString()+'\\n\\nexception in DoFS func:\\n'+e.message)}}","EBG.adaptor.flash._handleThrottleEvent");return{tagName:EBG.Adaptors.TagNames.SCRIPT,text:a}},_isSupportShockwave:function(){var a=!0,b=EBG.adaptor.browser.getDocumentMode(),
b=b?b:5;EBG.adaptor.browser.isIE()&&11>b&&(a=!1);return a},isPlaying:function(){if(!this._flashResID)return!1;var a=EBG.adaptor.getElementById(this._flashResID);if(!a)return!1;if(this._convertor)return this._convertor.getIframeLoaded();try{if("undefined"==typeof a.PercentLoaded&&"undefined"==typeof a.TGetProperty||"undefined"!=typeof a.PercentLoaded&&100==a.PercentLoaded())return!0;if("undefined"!=typeof a.TGetProperty)try{return 1<a.TGetProperty("/",4)}catch(b){}}catch(c){return!0}return!1},checkPlaying:function(){if(this.isPlaying()){var a=
new EBG.Events.Event(EBG.Events.EventNames.ELEMENT_LOADED);a.dispatcher=this;a.eventData={DOMEvent:null,elementId:this._flashResID,adUId:this._adConfig.uid};a.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(a)}else EBG.runTimed(this,this.checkPlaying,[],50)},getResPath:function(a){return a},_getFlashVersion:function(){return this._adConfig.flashVer},_handleMessage:function(a,b,c){var a=a.replace(/FSCommand:/ig,""),d=a=a.toLowerCase(),e=b;a==EBG.EBMessage.CLICKTHROUGH&&b&&
b.indexOf&&0==b.indexOf("SV2:")&&-1!=b.indexOf(String.fromCharCode(127))&&(e=b.substring(4),d=a+"sv2");var f=this.fs[d];if(f){var g=f.mapEvent||d.toLowerCase(),g=new EBG.Events.Event(g);g.dispatcher=this;g.flashResId=c;var c=",",h=!1;switch(d){case EBG.EBMessage.CLICKTHROUGH:g.eventData={};break;case EBG.EBMessage.CLICKTHROUGH+"sv2":case EBG.FS.EB_SET_JS_VAR:c="\u007f";break;case EBG.EBMessage.VERSION_TRACKING_IMPRESSION:h=!0,g.eventData={},g.eventData[f.args[0]]=this._formatUrls(b)}if(f&&f.args&&
!h&&(g.eventData={adUId:this._adConfig.uid},0<b.length)){d=e.split(c);for(e=0;e<f.args.length;e++)c=f.args[e],h="",e<d.length&&(h='"'==d[e].charAt(0)||"'"==d[e].charAt(0)||"false"==d[e]||"true"==d[e]?eval(d[e]):d[e]),g.eventData[c]=h}this._handleIntMonitor(a,b);if(f){if(f.command)return b=[g.eventData],f.command.call(this,b);f.combinedCommand&&(b=[g.eventData],f.combinedCommand.call(this,b));if(EBG.isObj(b)&&this._convertor)g.eventData=b,g.eventData.adUId=this._adConfig.uid;EBG.eventMgr.dispatchEvent(g)}}},
_formatUrls:function(a){for(var b=[],a=a.split("\u007f"),c=0;c<a.length;c++)for(var d=a[c].split("|"),e=0;e<d.length;e++)b.push(d[e]);return b},_handleIntMonitor:function(a,b){if(EBG.adaptor.intMonitorExist()){var c=new EBG.Events.Event(EBG.EBMessage.NOTIFY_INTERACTION_MONITOR);c.eventData=this._createIntMonitorObj(a,b);EBG.eventMgr.dispatchEvent(c)}},_addSupportedFSCommands:function(){this.fs[EBG.FS.EB_CLICKTHROUGH]={mapEvent:EBG.EBMessage.CLICKTHROUGH};this.fs[EBG.FS.EB_CLICKTHROUGH+"sv2"]={mapEvent:EBG.EBMessage.CLICKTHROUGH,
args:["clickUrl","clickedVersion","clickedVerUrl"]};this.fs[EBG.FS.EB_VERSION_TRACKING_IMPRESSION]={mapEvent:EBG.EBMessage.VERSION_TRACKING_IMPRESSION,args:["impTrackingUrls"]};this.fs[EBG.FS.EB_CREATIVE_EVENT_SUBSCRIPTION]={mapEvent:!1,args:["eventHandler","interAd"],command:this._addCreativeEventSubscription};this._adConfig.ffs.CFF_FlashThrottle&&(this.fs[EBG.FS.EB_THROTTLE]={mapEvent:!1,args:["state"],command:this._handleThrottle})},_addCreativeEventSubscription:function(a){var b=a[0].eventHandler.split(String.fromCharCode(127)),
c=new EBG.Events.EventSubscription(b[0],function(a){this.call("ebCallHandlerWithObj",b[0],a.eventData)},this);if(!a[0].interAd)c.dispatcherFilters={"_adConfig.rnd":this._adConfig.rnd};EBG.eventMgr.subscribeToEvent(c)},_shouldCheckForThrottling:function(a){var b=parseInt(a.height),c=parseInt(a.width);if(0==c&&0==b)b=this._adConfig.height,c=this._adConfig.width;var d=!0;this._adConfig.ffs.CFF_FlashThrottle?"transparent"==a.wmode&&!this._adConfig.ffs.CFF_FlashThrottleTransparent?d=!1:11>EBG.adaptor.flash.version?
d=!1:!this._adConfig.visibility||!this._adConfig.visibility.mode||this._adConfig.visibility.mode==EBG.VisibilityMode.DEFAULT_MODE?d=!1:EBG.ads&&EBG.ads[this._adConfig.uid]&&EBG.ads[this._adConfig.uid].checkingThrottle?d=!1:this._flashResID==EBG.ads[this._adConfig.uid]._defaultResId&&EBG.ads[this._adConfig.uid]._gotRich&&(d=!1):d=!1;if(EBG.adaptor.browser.isChrome()){if(5>c&&5>b||398<c&&298<b)d=!1}else d=!1;return d}};
EBG.FlashCC.FlashProperty={XPOSITION:0,YPOSITION:1,XSCALE:2,YSCALE:3,CURRENTFRAME:4,TOTALFRAMES:5,ALPHA:6,VISIBILITY:7,WIDTH:8,HEIGHT:9,ROTATION:10,TARGET:11,FRAMESLOADED:12,NAME:13,DROPTARGET:14,URL:15};EBG.declareClass(EBG.FlashCC,EBG.CreativeContainer);var tempExtensionHook=ebO.extensionHooks;
try{ebO.extensionHooks.splice(0,0,function(a,b){function c(){EBG.Interactions.checkURL=function(a){if(a){var b=a.toLowerCase();b.match("^[^?]*:.*")||(a="http://"+b);return a}}}EBG.getFeatureFlagValue(b.ffs,"CFF_DeepLink")&&c()})}catch(e$$46){ebO.extensionHooks=tempExtensionHook}tempExtensionHook=ebO.extensionHooks;
try{ebO.extensionHooks.splice(0,0,function(a,b){function c(){b.adConfig.UiVz=!1;if(EBG.Adaptors&&EBG.Adaptors.ServingMgr&&EBG.Adaptors.ServingMgr.prototype)EBG.Initializer._initServingMode=function(a){var b=this._getAdClass(a);a.requiresIframeBust=b.requiresIframeBust;var c=EBGInfra.isDefined(EBG.adaptor.serving)?EBG.adaptor.serving.detectServingMode(!0):null;if(EBG.adaptor.isSafeFrame())a.ifrm=0,a.adConfig.UiVz=!1;else{if(b.requiresIframeBust){if(!a.ifrm||a.soi)a.ifrm=0;if(a.innerIframe)a.ifrm=EBG.Adaptors.ServingMode.INNER_IFRAME;
EBG.adaptor.initServingMode(a.ifrm,!1,c)}else if(a.ifrm=0,b!=EBG.Ads.StdBanner&&b!=EBG.Ads.StdBannerHtml5&&(EBG.adaptor.initServingMode(a.ifrm,!b.requiresIframeBust,c),c==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME))try{document.close()}catch(d){}if(EBG.adaptor.inPlacementIframe()||!b.requiresIframeBust&&!a.innerIframe&&c==EBG.Adaptors.ServingMode.IFRAME&&!EBG.adaptor.isSkype()&&b!=EBG.Ads.StdBanner&&b!=EBG.Ads.StdBannerHtml5&&!EBG.adaptor.isSafeFrame())if(b.requiresIframeBust||a.IABBV||a.IABEV||a.invVis)a.ifrm=
1,b=new EBG.Events.EventSubscription(EBG.Events.EventNames.AIE_LOADED,this._handleAieLoad,this),b.dispatcherFilters={"_adConfig.rnd":a.rnd,"_adConfig.templateName":a.tn},b.timing=EBG.Events.EventTiming.BEFORE,EBG.eventMgr.subscribeToEvent(b),EBG.adaptor.serving.handleAieServing(a)}},EBG.Adaptors.ServingMgr.prototype.checkAie=function(a,c,d){EBG.serverResponses=EBG.serverResponses||{};EBG.serverResponses[a.adConfig.uid]||(EBG.serverResponses[a.adConfig.uid]=a);d.ebO=EBG.cloneObj(a);if(EBG.adaptor.browser.isIE()&&
9>EBG.adaptor.browser.getVersion())try{delete d.ebO.ut,delete d.ebO.fru}catch(h){d.ebO.ut="",d.ebO.fru=""}EBG.iframeLocation?c.apply(d,['{"iflExists":1,"iflCheck":0}']):EBG.isDefinedNotNull(b.aiE)&&EBG.isDefinedNotNull(b.aiE.iflExists)?c.apply(d,[JSON.stringify(b.aiE)]):(a=encodeURIComponent(document.referrer||document.location.href))?EBG.adaptor.getDataFromRemoteServer(ebPtcl+b.bs+this.aieServerRequestPrefix+a+this.aieServerRequestPrefixVersion,this._handleAddInEyeServerResponse,this,!0,!1)||c.apply(d,
['{"iflExists":1,"iflCheck":0}']):c.apply(d)},EBG.Adaptors.ServingMgr.prototype.handleAieServing=function(a){this.checkAie(a,this._handleAddInEyeServerResponse,this)},EBG.Adaptors.ServingMgr.prototype._handleAddInEyeServerResponse=function(a,b){var c;try{c=!b&&a?JSON.parse(a):{iflExists:0,iflCheck:1}}catch(d){c={iflExists:0,iflCheck:1}}EBG.serverResponses[this.ebO.adConfig.uid].aiE=c;this.ebO.aiE=c;if(!this.ebO.dmn)this.ebO.dmn=c.Domain?c.Domain:this._ebGetHostName(document.referrer);if(this.ebO.requiresIframeBust&&
c&&c.iflExists)this.insertInnerIframe(this.ebO.phid,c.iflCheck?EBG.Adaptors.IframeMode.SERVEANDVERIFY:EBG.Adaptors.IframeMode.SERVE);else{if(this.ebO.requiresIframeBust)this.ebO.adConfig.showAieDefaultImage=1;this.ebO.ifrm=0;var i=new EBG.Events.Event(EBG.Events.EventNames.AIE_LOADED);i.eventData={loadDefault:!0,currentResponse:this.ebO};i.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(i);c.iflCheck&&this.insertInnerIframe(this.ebO.phid,EBG.Adaptors.IframeMode.VERIFY)}};if(EBG.RichModules&&
EBG.RichModules.VisibilityManager){var a=function(){return!0};EBG.RichModules.BasicVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.GeometricVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.GeometricVisibilityProvider._isAvailable=function(a){return(a.actualServingMode!=EBG.Adaptors.ServingMode.IFRAME||EBG.adaptor.serving.servingMode==EBG.Adaptors.ServingMode.INNER_IFRAME)&&!(a.ffs.CFF_MRAIDVis&&EBG.adaptor.isInApp())};EBG.RichModules.MouseVisibilityProvider.prototype.shouldReportRecordable=
a;EBG.RichModules.MouseVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.GridVisibilityProvider.prototype.shouldReportRecordable=a;if(EBG.RichModules.MraidVisibilityProvider)EBG.RichModules.MraidVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.FlashVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.SafeFrameVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.FFVisibilityProvider.prototype.shouldReportRecordable=a;EBG.RichModules.VisibilityManager.prototype._availableVisibilityProviders=
[EBG.RichModules.GeometricVisibilityProvider,EBG.RichModules.SafeFrameVisibilityProvider,EBG.RichModules.AddingEyeProvider,EBG.RichModules.MouseVisibilityProvider,EBG.RichModules.GridVisibilityProvider,EBG.RichModules.FlashVisibilityProvider,EBG.RichModules.FFVisibilityProvider,EBG.RichModules.MraidVisibilityProvider];a=EBG.RichModules.VisibilityManager.prototype;EBG.RichModules.VisibilityManager=function(a,b,c){this.adConfig=a;this._resObjId=b;this._res=EBG.adaptor.getElementById(b);this.actualServingMode=
this.adConfig.actualServingMode;this._averageLastCalcTime=(new Date).getTime();this._isPanel=c;this._dpm=EBG.dataPipeMgr.getPipe(this.adConfig.sID);if(this._shouldInitialize())(this._visibilityProvider=this._getVisibilityProvider(this._resObjId,this.adConfig))?(this._dpm.send(EBG.DataProfile.VISIBILITY,{vsr:1,vsbp:this.getVisibilityProviderNum()}),this._initializeVisibilityData(),this._subscribeToEvents(),a=function(){this._visibilityProvider.shouldReportRecordable()&&this._reportVisibilityRecordable();
this._visibilityProvider.start()},this.adConfig.adStarted?a.apply(this):(a=new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_START,a,this),a.timing=EBG.Events.EventTiming.ONTIME,EBG.eventMgr.subscribeToEvent(a))):this._dpm.send(EBG.DataProfile.VISIBILITY,{uvsr:3})};EBG.RichModules.VisibilityManager.ThreholdType={IAB:0,Agency:1,Advertiser:2};EBG.RichModules.VisibilityManager.VisibilityPollingTimer=1E3;EBG.RichModules.VisibilityManager.prototype=a;EBG.RichModules.VisibilityManager.prototype._shouldInitialize=
function(){EBG.Initializer._getAdClass({tn:this.adConfig.templateName});return this.adConfig.visibility.mode==EBG.VisibilityMode.DEFAULT_MODE?!1:!0}}}EBG.getFeatureFlagValue(b.ffs,"CFF_RemoveUivz")&&c()})}catch(e$$49){ebO.extensionHooks=tempExtensionHook}tempExtensionHook=ebO.extensionHooks;
try{ebO.extensionHooks.splice(0,0,function(a,b){function c(){if(EBG.Interactions&&EBG.Interactions.InteractionManager&&EBG.Interactions.InteractionManager.prototype.reportInteractionQueues)EBG.Interactions.InteractionManager.prototype.reportInteractionQueues=function(a,b,c){if(!(EBG.getTime()>EBG.Interactions.InteractionManager.INTERACTION_THRESHOLD_SEC)){var a=EBG.isBool(a)?a:!0,b=EBG.isBool(b)?b:!1,g={},h={},i;for(i in this.adsData)if(this.adsData.hasOwnProperty(i)){var j=this.adsIntQueues[i];if(!this.adsData[i].delayIntReport)for(;j.length;){for(var m=
this._getAdReportData(i),l=this.adsData[i].adConfig._interactionPipe,k=0,p=this._isUnloadHandled?j.length:EBG.Interactions.InteractionManager.intStackLength,n=0;n<j.length&&n<p;n++)m+=j[n],k++;for(n=0;n<k;n++)j.shift();this._isUnloadHandled?(k=g[l]?g[l]:"",""!=k&&(k+="|"),h[l]||(h[l]=this._getPipeParams(i,b)),k+=m,g[l]=k):this._reportServer(l+m+this._getPipeParams(i,b),a,c)}}for(var o in g)this._reportServer(o+g[o]+(h[o]?h[o]:""),a,c)}},EBG.Interactions.InteractionManager.prototype._handleDataParams=
function(a,b,c){var b=this._getAdReportData(a),c=encodeURIComponent(c),g=this._getPipeParams(a,!1);this._reportServer(this.adsData[a].adConfig._interactionsStrPipe+"$$"+b+c+"$$"+g,!0)}}EBG.getFeatureFlagValue(b.ffs,"CFF_SupportMultiEnv")&&c()})}catch(e$$50){ebO.extensionHooks=tempExtensionHook}EBG.declareNamespace("Initializer");
EBG.Initializer={initialize:function(){var a=null,b;void 0!==b&&b||(a=EBG.Initializer._getCurrentServerResponse(a),EBG.Initializer._initGlobals(a),EBG.Initializer._callExtensionHooks(a),EBG.Initializer._initAdaptor(a),EBG.Initializer._initManagers(a),EBG.Initializer._initDisplayAd(a));return a},_initManagers:function(a){var b=new EBG.Events.Event(EBG.Events.EventNames.INIT_MANAGERS);b.eventData={"_adConfig.rnd":a.rnd};b.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(b);EBG.Initializer._initInteractionManager(a);
EBG.Initializer._initAnimationManager(a);EBG.Initializer._initDataPipeManager(a);(!~a.tn.toLowerCase().indexOf("html5")||!a.ffs.CFF_Html5Shrink)&&EBG.Initializer._initPositioningHelper();b.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(b)},_initDisplayAd:function(a){EBG.Initializer._updateAdConfig(a);a.ffs.CFF_ClientDITest&&a.diParams&&EBG.adaptor.loadModule(ebBigS+ebO.uipv+"/SizmekDI.js",a.adConfig,function(){(new EBGUIP.SizmekDI({},a.diParams)).post("//datahub.serving-sys.com/samurai/collect/di")},
this);this._sendInitialDataPipeData(a);if(EBG.Initializer._shouldInitAd(a)){if(EBG.isDefined(EBG.adaptor.getDisplayWin().EBG))try{EBGInfra.mergeObj(EBG,EBG.adaptor.getDisplayWin().EBG,!1)}catch(b){if(a.ffs.CFF_IEFreedScriptMerge)EBG.adaptor.getDisplayWin().EBG=EBG}else EBG.adaptor.getDisplayWin().EBG=EBG;EBG.Initializer._initAd(a)}},_InitAdPreGlobals:function(a){try{var b=EBG.adaptor.getPageWin();if(!b.gEbPageGUID)b.gEbPageGUID=a.adConfig.rnd;EBG.pageGUID=b.gEbPageGUID}catch(c){EBG.pageGUID=a.adConfig.rnd}},
_shouldInitAd:function(a){if(a.ffs.CFF_TopmostIframeBust){var b=!1;a.innerIframe?b=!0:0==a.ifrm?b=a.requiresIframeBust&&EBG.adaptor.serving&&EBG.adaptor.serving.servingMode==EBG.Adaptors.ServingMode.IFRAME&&(!a.aiE||a.aiE&&void 0===a.aiE.iflExists)?!1:!0:-1==a.ifrm&&EBG.adaptor.serving&&EBG.adaptor.serving.servingMode!=EBG.Adaptors.ServingMode.IFRAME&&(b=!0);return b}return a.innerIframe||0==a.ifrm||-1==a.ifrm&&EBG.adaptor.serving&&EBG.adaptor.serving.servingMode!=EBG.Adaptors.ServingMode.IFRAME},
_getCurrentServerResponse:function(){for(var a=0,b;a<ebOArr.length;){if((b=ebOArr[a])&&this._getAdClass(b)){ebOArr.splice(a,1);break}a++}return b},_initGlobals:function(a){var b=navigator.userAgent.toLowerCase(),c=a.adConfig;EBG.isOfflineDemo=!!window.gEbfOfflineDemo;if("/"==a.resPath.charAt(a.resPath.length-1)&&"/"==a.resPath.charAt(a.resPath.length-2))a.resPath=a.resPath.substring(0,a.resPath.length-1);EBG.resourcePath=a.resPath;c.rnd=a.rnd;c.uid=EBG.format("{0}_{1}",c.adId,c.rnd);c.resourcePath=
a.resPath;c.ffs=a.ffs;EBG.sms=a.sms||"";EBG.fcsVirtualPath=a.fvp||"";EBG.pluId=a.pi;EBG.dataCapture=EBG.bs=a.bs;EBG.protocol=ebPtcl;EBG.reportPageVer=a.rpv;EBG.html5Ver=a.html5v;EBG.flashPixelVer=a.vfp;EBG.intReportTimeout=a.irt||null;EBG.isMSNMessenger=(-1<b.indexOf("msn messenger")||-1<b.indexOf("windows live messenger"))&&window==parent;EBG.isIMBanner=window.gfEbExpBanerIM||window.gfEbExpBannerIM;EBG.isPreview=!!a.pr;EBG.isInWorkshop=window.gEbFlyLocal;EBG.iframeLocation=a.ifl||window.gstrEbIframeLocation;
EBG.minZIndex=a.z||window.gnEbMinZIndex||1E4;EBG.eyeDivRefElement=window.gEbEyeDivRefElement;EBG.eventMgr=EBG.eventMgr||new EBG.Events.EventManager;b=EBG.getTopAccessibleWindow(!1);b.ebAds=b.ebAds||{};EBG.ads=b.ebAds;EBG.serverResponses=EBG.serverResponses||{};if((b=c.adHtmlPath)&&a.h5mi)c.adKitData={paths:{cachedScript:ebBigS,nonCachedScript:ebPtcl+a.sms,folderRoot:ebResourcePath+b.substring(0,b.lastIndexOf("/")+1)},version:a.h5mi.adkitversion}},_initServingMode:function(a){var b=this._getAdClass(a),
c=a.adConfig;a.requiresIframeBust=b.requiresIframeBust;var d=EBG.adaptor.serving?EBG.adaptor.serving.detectServingMode(!0):null;if(EBG.adaptor.isSafeFrame())a.ifrm=0,c.UiVz=!1;else if(b.requiresIframeBust){if(a.innerIframe)a.ifrm=EBG.Adaptors.ServingMode.INNER_IFRAME;if(!a.ifrm||a.soi)a.ifrm=0;EBG.adaptor.initServingMode(a.ifrm,!1,d,a.ffs.CFF_TopmostIframeBust);if(EBG.adaptor.inPlacementIframe())b=new EBG.Events.EventSubscription(EBG.Events.EventNames.AIE_LOADED,this._handleAieLoad,this),b.dispatcherFilters=
{"_adConfig.rnd":a.rnd},b.timing=EBG.Events.EventTiming.BEFORE,EBG.eventMgr.subscribeToEvent(b),EBG.adaptor.serving.handleAieServing(a)}else if(a.ifrm=0,b!=EBG.Ads.StdBanner&&b!=EBG.Ads.StdBannerHtml5){EBG.adaptor.initServingMode(a.ifrm,!b.requiresIframeBust,d);if(d==EBG.Adaptors.ServingMode.FRIENDLY_IFRAME){c.UiVz=!1;try{document.close()}catch(e){}}if(d==EBG.Adaptors.ServingMode.SCRIPT)c.UiVz=!1}else c.UiVz=!1},_handleAieLoad:function(a){a.eventData.loadDefault&&a.eventData.currentResponse.tn!=EBG.adTypes.VisibilityAd&&
(EBG.Initializer._initManagers(a.eventData.currentResponse),EBG.Initializer._initDisplayAd(a.eventData.currentResponse))},_callExtensionHooks:function(a){if(a.extensionHooks)for(;0!==a.extensionHooks.length;)a.extensionHooks.pop().apply(null,[a.adConfig,a])},getRichestAdaptor:function(){return EBG.Adaptors.WebAdaptor||EBG.Adaptors.StdWebAdaptor},getRichestInteractionManager:function(){return EBG.Interactions.InteractionManager||EBG.Interactions.StdInteractionManager},_initAdaptor:function(a){var b=
this.getRichestAdaptor(),c=new EBG.Events.Event(EBG.Events.EventNames.CREATE_ADAPTOR);c.eventData={currentClass:b};c.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(c);if(!EBG.adaptor||EBG.adaptor.constructor.toString()!==c.eventData.currentClass.toString())b=new c.eventData.currentClass,EBG.adaptor=b;c.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(c);EBG.adaptor.initInnerModules(a.plt,a.bt,a.bv,a.dt,a.bc,!!a.adConfig.ffs.CFF_NoInDapIF);this._initServingMode(a);
EBG.adaptor.registerSpecialBrowserEvents();EBG.eventMgr.attachToAdaptor()},_initInteractionManager:function(a){newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_INT_MGR);newEvent.eventData={currentClass:this.getRichestInteractionManager()};newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);if(!EBG.intMgr||EBG.intMgr.constructor.toString()!=newEvent.eventData.currentClass.toString())a=new newEvent.eventData.currentClass(a),EBG.intMgr=a;newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;
EBG.eventMgr.dispatchEvent(newEvent)},_initAnimationManager:function(a){try{if(EBG.RichModules&&EBG.RichModules.AnimationManager){newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_ANIM_MGR);newEvent.eventData=EBG.RichModules.AnimationManager;newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);if(!EBG.animationMgr)EBG.animationMgr=new newEvent.eventData;if(!EBG.animator&&EBG.RichModules&&EBG.RichModules.Animator)EBG.animator=new EBG.RichModules.Animator(a.adConfig);
newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent)}}catch(b){}},_initDataPipeManager:function(a){var b,c=(1==a.dt||2==a.dt)&&a.ffs.CFF_DataPipeMobile,d=!1,e=!1;if("https://"!=EBG.protocol||a.ffs.CFF_DataPipeHttps){if(a.ffs.CFF_DataPipeAlways)e=!0;else if(c||(d=this._getNumericDataFromFlag(a.ffs,"CFF_DataPipeGeneral")))c=d||this._getNumericDataFromFlag(a.ffs,"CFF_DataPipeThreshold"),e=Math.floor(1E4*Math.random())+1<=100*c;e&&(b=["general","platform","serving",
"visibility","error"])}a.dpu=a.dpu||"//datahub.serving-sys.com/samurai/collect/events";EBG.dataPipeMgr=new EBG.DataPipeManager(a.dpu,b)},_getNumericDataFromFlag:function(a,b){for(var c in a)if(0==c.indexOf(b)&&a[c]){var d=parseFloat(c.substr(b.length).replace("_","."));if(!isNaN(d))return d}return 0},_initPositioningHelper:function(){try{if(EBG.Positioning&&EBG.Positioning.PositionManager){newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_POSITIONING_HELPER);newEvent.eventData=EBG.Positioning.PositionManager;
newEvent.timing=EBG.Events.EventTiming.BEFORE;EBG.eventMgr.dispatchEvent(newEvent);if(!EBG.posHelper)EBG.posHelper=new newEvent.eventData;newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent)}}catch(a){}},_initAd:function(a){try{var b=this._getAdClass(a),c=a.adConfig;newEvent=new EBG.Events.Event(EBG.Events.EventNames.CREATE_AD);newEvent.eventData={currentClass:b,adConfig:c};newEvent.timing=EBG.Events.EventTiming.BEFORE;newEvent.dispatcher={_adConfig:{rnd:c.rnd,
uid:c.uid}};EBG.eventMgr.dispatchEvent(newEvent);EBG.Initializer._InitAdPreGlobals(a);new newEvent.eventData.currentClass(c);newEvent.timing=EBG.Events.EventTiming.ONTIME_AND_AFTER;EBG.eventMgr.dispatchEvent(newEvent);EBG.adaptor.getDisplayWin().EBG.ads[c.uid]||(EBG.adaptor.getDisplayWin().EBG.ads[c.uid]=EBG.ads[c.uid]);if(EBG.BWDetection&&window.gEBMainWindow&&gEBMainWindow.EBP)if(gEBMainWindow.EBP.ebBW&&gEBMainWindow.EBP.ebBW.checked)EBG.BWDetection.speed=gEBMainWindow.EBP.ebBW.speed,EBG.BWDetection.checked=
!0;else if(gEBMainWindow.EBP.BW&&gEBMainWindow.EBP.BW.checked)EBG.BWDetection.speed=gEBMainWindow.EBP.BW.speed,EBG.BWDetection.checked=!0;if(c.pckAssets){var b=0,d;for(d in c.pckAssets)c.pckAssets.hasOwnProperty(d)&&b++;if(0<b&&!EBG.BWDetection.checked)c.bwApplied=!0,EBG.BWDetection.init();c.BWD=EBG.BWDetection}}catch(e){if(a.ffs.CFF_DataPipeErrors){a="_initAd";c="none";if(e.stack)c=e.stack.match(/((.*)@|at(.*)).*:(\d+:\d+)/),c.length=5,a=c[2]||c[3],c=c[4];this._dpm.send(EBG.DataProfile.ERROR,{errmsg:e.message,
errfunc:a,errpos:c})}}},_getAdClass:function(a){var b;switch(a.tn){case EBG.adTypes.RichBannerHtml5:b=EBG.Ads.RichBannerHtml5;break;case EBG.adTypes.PoliteBannerHtml5:b=EBG.Ads.PoliteBannerHtml5;break;case EBG.adTypes.SEBannerHtml5:b=EBG.Ads.SEBannerHtml5;break;case EBG.adTypes.ExpBannerHtml5:b=EBG.Ads.ExpBannerHtml5;break;case EBG.adTypes.StdBannerHtml5:b=EBG.Ads.StdBannerHtml5;break;case EBG.adTypes.StdBanner:b=a.IABBV||a.IABEV?EBG.Ads.StdBannerEx:EBG.Ads.StdBanner;break;case EBG.adTypes.Banner:b=
EBG.Ads.RichBanner;break;case EBG.adTypes.SingleExpBanner:b=EBG.Ads.SingleExpBanner;break;case EBG.adTypes.ExpBanner:b=EBG.Ads.ExpBanner;break;case EBG.adTypes.VisibilityAd:b=EBG.Ads.VisibilityAd;break;case EBG.adTypes.FloatingAd:b=EBG.Ads.Floating;break;case EBG.adTypes.FloatingAdWithRem:b=EBG.Ads.FloatingWithReminder;break;case EBG.adTypes.TrackingAd:b=EBG.Ads.TrackingAd;break;case EBG.adTypes.WallpaperAd:b=EBG.Ads.WallpaperAd}return b},_updateAdConfig:function(a){var b=a.adConfig;b.sHost=window.sHost;
EBG.serverResponses[b.uid]||(EBG.serverResponses[b.uid]=a);b.placeHolderId=a.phid;b.sUrlTokens=a.ut;if(a.element_id)b.element_id=a.element_id;var c=EBG.adaptor.getPageWin();if(c=EBG.getPageUrl(c))b.ebReferrer=c;b.html5supported=a.html5Enabled;b.useHtmlConvertor=b.html5supported&&window.ebUseHtml5;b.preloadCustomScript=window.ebAdCS;b.actualServingMode=EBG.adaptor.serving?EBG.adaptor.serving.detectServingMode(!0):null;if(a.ffs.CFF_RemoveUivz)EBG.adaptor.focused=b.focused?b.focused:EBG.adaptor.focused;
if(a.ffs.CFF_ServingMode)b.displayWin=EBG.adaptor.getDisplayWin(),b.pageWin=EBG.adaptor.getPageWin();if(a.ffs.CFF_SupportMultiEnv)b._interactionServer=a.is||"BurstingPipe",b._interactionPipe=EBG.combinePaths(EBG.protocol+EBG.bs,b._interactionServer+"/adServer.bs?cn=int&iv=2&int="),b._interactionsStrPipe=EBG.combinePaths(EBG.protocol+EBG.bs,b._interactionServer+"/adServer.bs?cn=int&iv=2&interactionsStr=");if(b.expandDynamic)b.showSinglePanel=1;if(!b.clickTrackingUrls)b.clickTrackingUrls=[];if(a.ncu)b.clickTrackingUrls.push(a.ncu),
b.ncu=a.ncu;if(!b.defaultImpTrackingUrls)b.defaultImpTrackingUrls=[],b.defaultClickTrackingUrls=[];if(a.dctu)b.defaultClickTrackingUrls=a.dctu;if(a.ditu)b.defaultImpTrackingUrls=a.ditu;b.delayedImpParams=a.delayedImpParams;b.impressionTrackingURLs=[];if(a.itu&&0<a.itu.length)b.impressionTrackingURLs=a.itu;window.gEbBAd&&(gEbBAd.playRS&&gEbBAd.playRS.strNUrl&&b.impressionTrackingURLs.push(gEbBAd.playRS.strNUrl),gEbBAd.strNImpUrl&&b.impressionTrackingURLs.push(gEbBAd.strNImpUrl));b.imageOnly=!1;b.page=
a.p;b.massVersioning={targetAudienceId:a.ta&&"-1"!=a.ta?a.ta:"",deliveryGroupId:a.dg&&"-1"!=a.dg?a.dg:"",subDeliveryGroupId:a.sdg&&"-1"!=a.sdg?a.sdg:"",adVersions:a.av||"",defaultAdVersion:a.avd||"",adBasePath:a.abp||"",massVersionFolderDivider:a.mvfd||0,versionTargetAudienceId:a.tav&&"-1"!=a.tav?a.tav:"",dgTargetAudienceId:a.tadg&&"-1"!=a.tadg?a.tadg:"",originalDeliveryGroupId:a.dgo&&"-1"!=a.dgo?a.dgo:""};if(0<=b.massVersioning.adVersions.indexOf("/")){if(b.massVersioning.defaultAdVersion)b.massVersioning.defaultAdVersion=
JSON.parse(b.massVersioning.defaultAdVersion);b.massVersioning.versionFullPath=!0}if(a.soi)b.showOnlyImage=a.soi,b.massVersioning.adVersions=b.massVersioning.defaultAdVersion;if(EBGInfra.isDefinedNotNull(a.diAppId))b.diAppId=a.diAppId;b.reportDelayedImpression=a.rdi||0;b.defaultImageReason=a.dir||"";b.mobileSDK=a.sdk||"";b.isOfflineDemo=EBG.isOfflineDemo;if("undefined"==typeof b.openWindow)b.openWindow=!0;this._updateAdConfigToHandleOpenWindow(a);b.bigSDir=unescape(ebBigS);b.imagesDir=unescape(ebBigS)+
"Res/Images"+a.imgv+"/";b.modulesDir=unescape(ebBigS)+"Modules"+a.modv+"/";b.arrOnStartDnlEvents=a.osde;b.arrOnPlayEvents=a.ope;b.isGeoStrict=0!=a.igs?1:0;c=a.oo||0;EBG.adaptor.optOut=b.optOut=window.gEbFOptOut||c;EBG.adaptor.histLen=b.histLen=a.hl||30;b.sPublisherPlacementId=a.ppi||"";b.width=b.width||"";b.height=b.height||"";b.adHtmlOptions?(b.width=a.adw||b.width,b.height=a.adh||b.height,b.defaultWidth=a.w||b.width,b.defaultHeight=a.h||b.height,b.adaptiveAd=!0):(b.width=a.w||b.width,b.height=a.h||
b.height);b.shouldCollectUrl=a.cu||0;b.sID=a.sid||"";b.dlm=a.dlm||3;b.testImp=!!a.t;b.usercookie=a.usercookie||"";b.visibility={};c=b.visibility;c.mode=EBG.VisibilityMode.DEFAULT_MODE;if(a.IABEV||a.insVis)c.mode=EBG.VisibilityMode.ENHANCED_MODE;else if(a.IABBV)c.mode=EBG.VisibilityMode.BASIC_MODE;c.iabMinSurface=a.IABMS;c.iabMinDuration=a.IABMD;c.agencyMinSurface=a.AgMS;c.agencyMinDuration=a.AgMD;c.advertiserMinSurface=a.AdMS;c.advertiserMinDuration=a.AdMD;c.iabMinLargeSurface=30;c.iabMinLargeDuration=
a.IABMD;b.isInstreamVisibility=!!a.insVis;b.isInstreamVerification=!!a.insVer;b.displayVerification=!!a.disVer;if(c=b.interactionsToReport)if(c[EBG.Interactions.SystemInts.AD_START]=EBG.Interactions.SystemInts.AD_START,c[EBG.Interactions.SystemInts.AD_STACKING]=EBG.Interactions.SystemInts.AD_STACKING,c[EBG.Interactions.SystemInts.MULTI_BURN]=EBG.Interactions.SystemInts.MULTI_BURN,c[EBG.Interactions.SystemInts.AD_COLLISION]=EBG.Interactions.SystemInts.AD_COLLISION,c[EBG.Interactions.SystemInts.AD_CAROUSEL]=
EBG.Interactions.SystemInts.AD_CAROUSEL,c.visibility&&(c[EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE]=EBG.Interactions.SystemInts.VISIBILITY_RECORDABLE,c[EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE]=EBG.Interactions.SystemInts.VISIBILITY_AGENCY_RECORDABLE,c[EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE]=EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_RECORDABLE,c[EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER]=EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER,
c[EBG.Interactions.SystemInts.VISIBILITY_AGENCY]=EBG.Interactions.SystemInts.VISIBILITY_AGENCY,c[EBG.Interactions.SystemInts.VISIBILITY_IAB]=EBG.Interactions.SystemInts.VISIBILITY_IAB,c[EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_DURATION]=EBG.Interactions.SystemInts.VISIBILITY_ADVERTISER_DURATION,c[EBG.Interactions.SystemInts.VISIBILITY_AGENCY_DURATION]=EBG.Interactions.SystemInts.VISIBILITY_AGENCY_DURATION,c[EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE]=EBG.Interactions.SystemInts.VISIBILITY_AVG_AD_SURFACE,
!EBG.adaptor.isInApp()))c[EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE]=EBG.Interactions.SystemInts.VISIBILITY_AVG_SCREEN_SHARE;b.adParamsEnabled=b.displayVerification||b.isInstreamVerification||!!a.ap;b.playerParamsEnabled=b.isInstreamVerification||!!a.pp;b.verUrlEnabled=b.isInstreamVerification||!!a.verUrl;if(b.defaultFlashName&&!b.defaultFlashPath)b.defaultFlashPath=b.imagesDir+"BannerAssets/"+b.defaultFlashName;b.offsetX=a.offsetX||0;b.offsetY=a.offsetY||0;b.adChoice={};b.adChoice.certificationProgram=
a.AcCP;b.adChoice.customUrl=a.CAcURL;b.adChoice.includeMarker=b.AcIncludeMarker;b.adChoice.iconPosition=parseInt(b.AcIconPosition);if(a.wm)b.wmode=a.wm.toLowerCase();if(!b.pushDownConfig&&"none"!=a.disp)b.display=a.disp||"inline";b.disableAutoExpand=a.dex||0;b.aiE=a.aiE||{};b.appPool=a.appPool||"BurstingPipe";b.interactionServer=a.is||"BurstingPipe";b.advertiserId=a.advid;b.moduleInfo=a.h5mi||{};try{if(window.gEbBAd){if(gEbBAd.panelsWMode)b.panelsWMode=gEbBAd.panelsWMode;if(gEbBAd.strWmode)b.wmode=
gEbBAd.strWmode.toLowerCase()}}catch(d){}if(EBG.adaptor.isSafeFrame()){b.isSafeFrame=!0;b.expandDynamic=0;for(var e in b.panels){c=b.panels[e];try{var f=$sf.ext.geom();if(c.posType==EBG.PanelPositionType.PAGE_RELATIVE_PERCENTAGE||c.posType==EBG.PanelPositionType.VIEWPORT_RELATIVE_PERCENTAGE)c.xPos=Math.round((f.win.w-c.width)*(c.xPos/100)),c.yPos=Math.round((f.win.h-c.height)*(c.yPos/100));c.posType!=EBG.PanelPositionType.BANNER_RELATIVE_PIXELS&&(c.xPos-=f.self.l,c.yPos-=f.self.t)}catch(g){c.xPos=
0,c.yPos=0}c.posType=EBG.PanelPositionType.BANNER_RELATIVE_PIXELS}}if(EBG.adaptor.isSkype()&&(b.isSkype=!0,!a.ffs.CFF_SkypeDynamic))b.expandDynamic=0;if(a.ffs.CFF_FireFoxFlash&&!a.ffs.CFF_FlashBlockPixel)a=EBG.adaptor.flash.getFlashVersionForBlockingDetection(),b.minimalflashVer=a||b.minimalflashVer,b.flashVer=a||b.flashVer;b.isInApp=EBG.adaptor.isInApp();b.locationPolling=this._setLocationPolling(b.locationPolling)},_setLocationPolling:function(a){0<a?(a=Math.min(a,100),a=Math.max(a,10)):a=0;return a},
_updateAdConfigToHandleOpenWindow:function(a){var b=a.adConfig;b.bsPath=EBG.bs;b.pluId=EBG.pluId;b.protocol=EBG.protocol;if(EBGInfra.isDefined(a.lid))b.lineId=a.lid;b.isPreview=!!a.pr},_sendInitialDataPipeData:function(a){this._dpm=EBG.dataPipeMgr.getPipe(a.adConfig.sID);this._dpm.send(EBG.DataProfile.GENERAL,{adid:a.adConfig.adId,time:+new Date});this._dpm.send(EBG.DataProfile.PLATFORM,{os:EBG.adaptor.browser._platform,brsrc:EBG.adaptor.browser._browserCode,brsrv:EBG.adaptor.browser._browserVer,
brsrt:EBG.adaptor.browser._browserType,env:EBG.adaptor.browser.getEnvironment()});a=window&&window.location&&window.location.href?window.location.href.substr(0,50):"";this._dpm.send(EBG.DataProfile.SERVING,{url:a})}};
try{var currentResponse=EBG.Initializer.initialize();if(currentResponse.adConfig.UiVz&&!currentResponse.requiresIframeBust&&(currentResponse.IABBV||currentResponse.IABEV)&&!EBG.adaptor.isSafeFrame()&&"Visibility"!=currentResponse.tn){var vizClone=EBG.cloneObj(currentResponse);vizClone.tn=vizClone.adConfig.templateName="Visibility";vizClone.ifrm=2;vizClone.soi=0;ebOArr[ebOArr.length]=vizClone;var newEbSrc=ebSrc.replace(currentResponse.tn,vizClone.tn),newEbSrc=newEbSrc.replace(/ex(debug|_api|)\.js/ig,
".js"),newScript=document.createElement("SCRIPT");newScript.src=newEbSrc;vizClone.ebSrc=newEbSrc;if(currentResponse.adConfig.adStarted){var target=document.getElementById(vizClone.phid);target&&target.appendChild(newScript)}else{var sub=new EBG.Events.EventSubscription(EBG.Events.EventNames.AD_START,function(){var a=document.getElementById(vizClone.phid);a&&a.appendChild(newScript)},this);sub.timing=EBG.Events.EventTiming.ONTIME;EBG.eventMgr.subscribeToEvent(sub)}}}catch(e$$57){};
